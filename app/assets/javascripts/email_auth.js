// (function(){function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936),d=ff(d,a,b,c,k[1],12,-389564586),c=ff(c,d,a,b,k[2],17,606105819),b=ff(b,c,d,a,k[3],22,-1044525330),a=ff(a,b,c,d,k[4],7,-176418897),d=ff(d,a,b,c,k[5],12,1200080426),c=ff(c,d,a,b,k[6],17,-1473231341),b=ff(b,c,d,a,k[7],22,-45705983),a=ff(a,b,c,d,k[8],7,1770035416),d=ff(d,a,b,c,k[9],12,-1958414417),c=ff(c,d,a,b,k[10],17,-42063),b=ff(b,c,d,a,k[11],22,-1990404162),a=ff(a,b,c,d,k[12],7,1804603682),d=ff(d,a,b,c,k[13],12,-40341101),c=ff(c,d,a,b,k[14],17,-1502002290),b=ff(b,c,d,a,k[15],22,1236535329),a=gg(a,b,c,d,k[1],5,-165796510),d=gg(d,a,b,c,k[6],9,-1069501632),c=gg(c,d,a,b,k[11],14,643717713),b=gg(b,c,d,a,k[0],20,-373897302),a=gg(a,b,c,d,k[5],5,-701558691),d=gg(d,a,b,c,k[10],9,38016083),c=gg(c,d,a,b,k[15],14,-660478335),b=gg(b,c,d,a,k[4],20,-405537848),a=gg(a,b,c,d,k[9],5,568446438),d=gg(d,a,b,c,k[14],9,-1019803690),c=gg(c,d,a,b,k[3],14,-187363961),b=gg(b,c,d,a,k[8],20,1163531501),a=gg(a,b,c,d,k[13],5,-1444681467),d=gg(d,a,b,c,k[2],9,-51403784),c=gg(c,d,a,b,k[7],14,1735328473),b=gg(b,c,d,a,k[12],20,-1926607734),a=hh(a,b,c,d,k[5],4,-378558),d=hh(d,a,b,c,k[8],11,-2022574463),c=hh(c,d,a,b,k[11],16,1839030562),b=hh(b,c,d,a,k[14],23,-35309556),a=hh(a,b,c,d,k[1],4,-1530992060),d=hh(d,a,b,c,k[4],11,1272893353),c=hh(c,d,a,b,k[7],16,-155497632),b=hh(b,c,d,a,k[10],23,-1094730640),a=hh(a,b,c,d,k[13],4,681279174),d=hh(d,a,b,c,k[0],11,-358537222),c=hh(c,d,a,b,k[3],16,-722521979),b=hh(b,c,d,a,k[6],23,76029189),a=hh(a,b,c,d,k[9],4,-640364487),d=hh(d,a,b,c,k[12],11,-421815835),c=hh(c,d,a,b,k[15],16,530742520),b=hh(b,c,d,a,k[2],23,-995338651),a=ii(a,b,c,d,k[0],6,-198630844),d=ii(d,a,b,c,k[7],10,1126891415),c=ii(c,d,a,b,k[14],15,-1416354905),b=ii(b,c,d,a,k[5],21,-57434055),a=ii(a,b,c,d,k[12],6,1700485571),d=ii(d,a,b,c,k[3],10,-1894986606),c=ii(c,d,a,b,k[10],15,-1051523),b=ii(b,c,d,a,k[1],21,-2054922799),a=ii(a,b,c,d,k[8],6,1873313359),d=ii(d,a,b,c,k[15],10,-30611744),c=ii(c,d,a,b,k[6],15,-1560198380),b=ii(b,c,d,a,k[13],21,1309151649),a=ii(a,b,c,d,k[4],6,-145523070),d=ii(d,a,b,c,k[11],10,-1120210379),c=ii(c,d,a,b,k[2],15,718787259),b=ii(b,c,d,a,k[9],21,-343485551),x[0]=add32(a,x[0]),x[1]=add32(b,x[1]),x[2]=add32(c,x[2]),x[3]=add32(d,x[3])}function cmn(q,a,b,x,s,t){return a=add32(add32(a,q),add32(x,t)),add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md51(s){/[\x80-\xFF]/.test(s)&&(s=unescape(encodeURI(s))),txt="";var i,n=s.length,state=[1732584193,-271733879,-1732584194,271733878];for(i=64;s.length>=i;i+=64)md5cycle(state,md5blk(s.substring(i-64,i)));s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;s.length>i;i++)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(tail[i>>2]|=128<<(i%4<<3),i>55)for(md5cycle(state,tail),i=0;16>i;i++)tail[i]=0;return tail[14]=n*8,md5cycle(state,tail),state}function md5blk(s){var i,md5blks=[];for(i=0;64>i;i+=4)md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return md5blks}function rhex(n){for(var s="",j=0;4>j;j++)s+=hex_chr[n>>j*8+4&15]+hex_chr[n>>j*8&15];return s}function hex(x){for(var i=0;x.length>i;i++)x[i]=rhex(x[i]);return x.join("")}function add32(a,b){return a+b&4294967295}function add32(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}var hex_chr="0123456789abcdef".split("");md5=function(s){return hex(md51(s))},md5("hello")!="5d41402abc4b2a76b9719d911017c592"})(),function(window,undefined){function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.split(core_rspace),function(_,flag){object[flag]=!0}),object}function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),typeof data=="string"){try{data=data==="true"?!0:data==="false"?!1:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj)if((name!=="data"||!jQuery.isEmptyObject(obj[name]))&&name!=="toJSON")return!1;return!0}function returnFalse(){return!1}function returnTrue(){return!0}function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11}function sibling(cur,dir){do cur=cur[dir];while(cur&&cur.nodeType!==1);return cur}function winnow(elements,qualifier,keep){if(qualifier=qualifier||0,jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});if(qualifier.nodeType)return jQuery.grep(elements,function(elem,i){return elem===qualifier===keep});if(typeof qualifier=="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem,i){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)while(list.length)safeFrag.createElement(list.pop());return safeFrag}function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag))}function cloneCopyEvent(src,dest){if(dest.nodeType===1&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function cloneFixAttributes(src,dest){var nodeName;dest.nodeType===1&&(dest.clearAttributes&&dest.clearAttributes(),dest.mergeAttributes&&dest.mergeAttributes(src),nodeName=dest.nodeName.toLowerCase(),nodeName==="object"?(dest.parentNode&&(dest.outerHTML=src.outerHTML),jQuery.support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):nodeName==="input"&&rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):nodeName==="option"?dest.selected=src.defaultSelected:nodeName==="input"||nodeName==="textarea"?dest.defaultValue=src.defaultValue:nodeName==="script"&&dest.text!==src.text&&(dest.text=src.text),dest.removeAttribute(jQuery.expando))}function getAll(elem){return elem.getElementsByTagName!==undefined?elem.getElementsByTagName("*"):elem.querySelectorAll!==undefined?elem.querySelectorAll("*"):[]}function fixDefaultChecked(elem){rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function vendorPropName(style,name){if(name in style)return name;var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function isHidden(elem,el){return elem=el||elem,jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){for(var elem,display,values=[],index=0,length=elements.length;length>index;index++)elem=elements[index],elem.style&&(values[index]=jQuery._data(elem,"olddisplay"),show?(values[index]||elem.style.display!=="none"||(elem.style.display=""),elem.style.display===""&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName)))):(display=curCSS(elem,"display"),values[index]||display==="none"||jQuery._data(elem,"olddisplay",display)));for(index=0;length>index;index++)elem=elements[index],elem.style&&(show&&elem.style.display!=="none"&&elem.style.display!==""||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox){for(var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;4>i;i+=2)extra==="margin"&&(val+=jQuery.css(elem,extra+cssExpand[i],!0)),isBorderBox?(extra==="content"&&(val-=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0),extra!=="margin"&&(val-=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0)):(val+=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0,extra!=="padding"&&(val+=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0));return val}function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,valueIsBorderBox=!0,isBorderBox=jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box";if(0>=val){if(val=curCSS(elem,name),(0>val||val==null)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox)+"px"}function css_defaultDisplay(nodeName){if(elemdisplay[nodeName])return elemdisplay[nodeName];var elem=jQuery("<"+nodeName+">").appendTo(document.body),display=elem.css("display");return elem.remove(),(display==="none"||display==="")&&(iframe=document.body.appendChild(iframe||jQuery.extend(document.createElement("iframe"),{frameBorder:0,width:0,height:0})),iframeDoc&&iframe.createElement||(iframeDoc=(iframe.contentWindow||iframe.contentDocument).document,iframeDoc.write("<!doctype html><html><body>"),iframeDoc.close()),elem=iframeDoc.body.appendChild(iframeDoc.createElement(nodeName)),display=curCSS(elem,"display"),document.body.removeChild(iframe)),elemdisplay[nodeName]=display,display}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+(typeof v=="object"?i:"")+"]",v,traditional,add)});else if(traditional||jQuery.type(obj)!=="object")add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){typeof dataTypeExpression!="string"&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,list,placeBefore,dataTypes=dataTypeExpression.toLowerCase().split(core_rspace),i=0,length=dataTypes.length;if(jQuery.isFunction(func))for(;length>i;i++)dataType=dataTypes[i],placeBefore=/^\+/.test(dataType),placeBefore&&(dataType=dataType.substr(1)||"*"),list=structure[dataType]=structure[dataType]||[],list[placeBefore?"unshift":"push"](func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0],inspected=inspected||{},inspected[dataType]=!0;for(var selection,list=structure[dataType],i=0,length=list?list.length:0,executeOnly=structure===prefilters;length>i&&(executeOnly||!selection);i++)selection=list[i](options,originalOptions,jqXHR),typeof selection=="string"&&(!executeOnly||inspected[selection]?selection=undefined:(options.dataTypes.unshift(selection),selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected)));return!executeOnly&&selection||inspected["*"]||(selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected)),selection}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);deep&&jQuery.extend(!0,target,deep)}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields)type in responses&&(jqXHR[responseFields[type]]=responses[type]);while(dataTypes[0]==="*")dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("content-type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):undefined}function ajaxConvert(s,response){var conv,conv2,current,tmp,dataTypes=s.dataTypes.slice(),prev=dataTypes[0],converters={},i=0;if(s.dataFilter&&(response=s.dataFilter(response,s.dataType)),dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(;current=dataTypes[++i];)if(current!=="*"){if(prev!=="*"&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){conv===!0?conv=converters[conv2]:converters[conv2]!==!0&&(current=tmp[0],dataTypes.splice(i--,0,current));break}if(conv!==!0)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}prev=current}return{state:"success",data:response}}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){return setTimeout(function(){fxNow=undefined},0),fxNow=jQuery.now()}function createTweens(animation,props){jQuery.each(props,function(prop,value){for(var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(collection[index].call(animation,prop,value))return})}function Animation(elem,properties,options){var result,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(remaining/animation.duration||0),index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end,easing){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){for(var index=0,length=gotoEnd?animation.tweens.length:0;length>index;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);length>index;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return createTweens(animation,props),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{anim:animation,queue:animation.opts.queue,elem:elem})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function defaultPrefilter(elem,props,opts){var index,prop,value,length,dataShow,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),hooks.unqueued==null&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),elem.nodeType===1&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],jQuery.css(elem,"display")==="inline"&&jQuery.css(elem,"float")==="none"&&(jQuery.support.inlineBlockNeedsLayout&&css_defaultDisplay(elem.nodeName)!=="inline"?style.zoom=1:style.display="inline-block")),opts.overflow&&(style.overflow="hidden",jQuery.support.shrinkWrapBlocks||anim.done(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(index in props)if(value=props[index],rfxtypes.exec(value)){if(delete props[index],value===(hidden?"hide":"show"))continue;handled.push(index)}if(length=handled.length)for(dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{}),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;jQuery.removeData(elem,"fxshow",!0);for(prop in orig)jQuery.style(elem,prop,orig[prop])}),index=0;length>index;index++)prop=handled[index],tween=anim.createTween(prop,hidden?dataShow[prop]:0),orig[prop]=dataShow[prop]||jQuery.style(elem,prop),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start=prop==="width"||prop==="height"?1:0))}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function genFx(type,includeWidth){for(var which,attrs={height:type},i=0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:!1}var rootjQuery,readyList,document=window.document,location=window.location,navigator=window.navigator,_jQuery=window.jQuery,_$=window.$,core_push=Array.prototype.push,core_slice=Array.prototype.slice,core_indexOf=Array.prototype.indexOf,core_toString=Object.prototype.toString,core_hasOwn=Object.prototype.hasOwnProperty,core_trim=String.prototype.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,core_rnotwhite=/\S/,core_rspace=/\s+/,rtrim=core_rnotwhite.test(" ")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,rquickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},DOMContentLoaded=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1),jQuery.ready()):document.readyState==="complete"&&(document.detachEvent("onreadystatechange",DOMContentLoaded),jQuery.ready())},class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,doc;if(!selector)return this;if(selector.nodeType)return this.context=this[0]=selector,this.length=1,this;if(typeof selector=="string"){if(match=selector.charAt(0)!=="<"||selector.charAt(selector.length-1)!==">"||3>selector.length?rquickExpr.exec(selector):[null,selector,null],!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1])return context=context instanceof jQuery?context[0]:context,doc=context&&context.nodeType?context.ownerDocument||context:document,selector=jQuery.parseHTML(match[1],doc,!0),rsingleTag.test(match[1])&&jQuery.isPlainObject(context)&&this.attr.call(selector,context,!0),jQuery.merge(this,selector);if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},toArray:function(){return core_slice.call(this)},get:function(num){return num==null?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems,name,selector){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,name==="find"?ret.selector=this.selector+(this.selector?" ":"")+selector:name&&(ret.selector=this.selector+"."+name+"("+selector+")"),ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.ready.promise().done(fn),this},eq:function(i){return i=+i,i===-1?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(core_slice.apply(this,arguments),"slice",core_slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for(typeof target=="boolean"&&(deep=target,target=arguments[1]||{},i=2),typeof target=="object"||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);length>i;i++)if((options=arguments[i])!=null)for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready,1);jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready"))}},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return obj==null?obj+"":class2type[core_toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},error:function(msg){throw Error(msg)},parseHTML:function(data,context,scripts){var parsed;return data&&typeof data=="string"?(typeof context=="boolean"&&(scripts=context,context=0),context=context||document,(parsed=rsingleTag.exec(data))?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts?null:[]),jQuery.merge([],(parsed.cacheable?jQuery.clone(parsed.fragment):parsed.fragment).childNodes))):null},parseJSON:function(data){return data&&typeof data=="string"?(data=jQuery.trim(data),window.JSON&&window.JSON.parse?window.JSON.parse(data):rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?Function("return "+data)():(jQuery.error("Invalid JSON: "+data),undefined)):null},parseXML:function(data){var xml,tmp;if(!data||typeof data!="string")return null;try{window.DOMParser?(tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=undefined}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&core_rnotwhite.test(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(obj,callback,args){var name,i=0,length=obj.length,isObj=length===undefined||jQuery.isFunction(obj);if(args){if(isObj){for(name in obj)if(callback.apply(obj[name],args)===!1)break}else for(;length>i;)if(callback.apply(obj[i++],args)===!1)break}else if(isObj){for(name in obj)if(callback.call(obj[name],name,obj[name])===!1)break}else for(;length>i;)if(callback.call(obj[i],i,obj[i++])===!1)break;return obj},trim:core_trim?function(text){return text==null?"":core_trim.call(text)}:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var type,ret=results||[];return arr!=null&&(type=jQuery.type(arr),arr.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(arr)?core_push.call(ret,arr):jQuery.merge(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);for(len=arr.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l=="number")for(;l>j;j++)first[i++]=second[j];else while(second[j]!==undefined)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;for(inv=!!inv;length>i;i++)retVal=!!callback(elems[i],i),inv!==retVal&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length=="number"&&(length>0&&elems[0]&&elems[length-1]||length===0||jQuery.isArray(elems));if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),value!=null&&(ret[ret.length]=value);else for(key in elems)value=callback(elems[key],key,arg),value!=null&&(ret[ret.length]=value);return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;return typeof context=="string"&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=core_slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(core_slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++,proxy):undefined},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key=="object"){for(i in key)jQuery.access(elems,fn,i,key[i],1,emptyGet,value);chainable=1}else if(value!==undefined){if(exec=pass===undefined&&jQuery.isFunction(value),bulk&&(exec?(exec=fn,fn=function(elem,key,value){return exec.call(jQuery(elem),value)}):(fn.call(elems,value),fn=null)),fn)for(;length>i;i++)fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);chainable=1}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),document.readyState==="complete"||document.readyState!=="loading"&&document.addEventListener)setTimeout(jQuery.ready,1);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",jQuery.ready,!1);else{document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",jQuery.ready);var top=!1;try{top=window.frameElement==null&&document.documentElement}catch(e){}top&&top.doScroll&&function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}jQuery.ready()}}()}return readyList.promise(obj)},jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),rootjQuery=jQuery(document);var optionsCache={};jQuery.Callbacks=function(options){options=typeof options=="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){!jQuery.isFunction(arg)||options.unique&&self.has(arg)?arg&&arg.length&&add(arg):list.push(arg)})})(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1)list.splice(index,1),firing&&(index>firingLength||firingLength--,index>firingIndex||firingIndex--)}),this},has:function(fn){return jQuery.inArray(fn,list)>-1},empty:function(){return list=[],this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return args=args||[],args=[context,args.slice?args.slice():args],!list||fired&&!stack||(firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=fns[i];deferred[tuple[1]](jQuery.isFunction(fn)?function(){var returned=fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[action+"With"](this===deferred?newDefer:this,[returned])}:newDefer[action])}),fns=null}).promise()},promise:function(obj){return typeof obj=="object"?jQuery.extend(obj,promise):promise
// }},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock),deferred[tuple[0]]=list.fire,deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?core_slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=Array(length),progressContexts=Array(length),resolveContexts=Array(length);length>i;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.support=function(){var support,all,a,select,opt,input,fragment,eventName,i,isSupported,clickFn,div=document.createElement("div");if(div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0],a.style.cssText="top:1px;float:left;opacity:.5",!all||!all.length||!a)return{};select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],support={leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:input.value==="on",optSelected:opt.selected,getSetAttribute:div.className!=="t",enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:document.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}if(!div.addEventListener&&div.attachEvent&&div.fireEvent&&(div.attachEvent("onclick",clickFn=function(){support.noCloneEvent=!1}),div.cloneNode(!0).fireEvent("onclick"),div.detachEvent("onclick",clickFn)),input=document.createElement("input"),input.value="t",input.setAttribute("type","radio"),support.radioValue=input.value==="t",input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),fragment=document.createDocumentFragment(),fragment.appendChild(div.lastChild),support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,support.appendChecked=input.checked,fragment.removeChild(input),fragment.appendChild(div),div.attachEvent)for(i in{submit:!0,change:!0,focusin:!0})eventName="on"+i,isSupported=eventName in div,isSupported||(div.setAttribute(eventName,"return;"),isSupported=typeof div[eventName]=="function"),support[i+"Bubbles"]=isSupported;return jQuery(function(){var container,div,tds,marginDiv,divReset="padding:0;margin:0;border:0;display:block;overflow:hidden;",body=document.getElementsByTagName("body")[0];body&&(container=document.createElement("div"),container.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",body.insertBefore(container,body.firstChild),div=document.createElement("div"),container.appendChild(div),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",tds=div.getElementsByTagName("td"),tds[0].style.cssText="padding:0;margin:0;border:0;display:none",isSupported=tds[0].offsetHeight===0,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&tds[0].offsetHeight===0,div.innerHTML="",div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",support.boxSizing=div.offsetWidth===4,support.doesNotIncludeMarginInBodyOffset=body.offsetTop!==1,window.getComputedStyle&&(support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%",support.boxSizingReliable=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px",marginDiv=document.createElement("div"),marginDiv.style.cssText=div.style.cssText=divReset,marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",div.appendChild(marginDiv),support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)),div.style.zoom!==undefined&&(div.innerHTML="",div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1",support.inlineBlockNeedsLayout=div.offsetWidth===3,div.style.display="block",div.style.overflow="visible",div.innerHTML="<div></div>",div.firstChild.style.width="5px",support.shrinkWrapBlocks=div.offsetWidth!==3,container.style.zoom=1),body.removeChild(container),container=div=tds=marginDiv=null)}),fragment.removeChild(div),all=a=select=opt=input=fragment=div=null,support}();var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(jQuery.acceptData(elem)){var thisCache,ret,internalKey=jQuery.expando,getByName=typeof name=="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||!getByName||data!==undefined)return id||(isNode?elem[internalKey]=id=jQuery.deletedIds.pop()||++jQuery.uuid:id=internalKey),cache[id]||(cache[id]={},isNode||(cache[id].toJSON=jQuery.noop)),(typeof name=="object"||typeof name=="function")&&(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),getByName?(ret=thisCache[name],ret==null&&(ret=thisCache[jQuery.camelCase(name)])):ret=thisCache,ret}},removeData:function(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,l,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){for(jQuery.isArray(name)||(name in thisCache?name=[name]:(name=jQuery.camelCase(name),name=name in thisCache?[name]:name.split(" "))),i=0,l=name.length;l>i;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):jQuery.support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}},_data:function(elem,name,data){return jQuery.data(elem,name,data,!0)},acceptData:function(elem){var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==!0&&elem.getAttribute("classid")===noData}}),jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length&&(data=jQuery.data(elem),elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs"))){for(attr=elem.attributes,l=attr.length;l>i;i++)name=attr[i].name,name.indexOf("data-")===0&&(name=jQuery.camelCase(name.substring(5)),dataAttr(elem,name,data[name]));jQuery._data(elem,"parsedAttrs",!0)}return data}return typeof key=="object"?this.each(function(){jQuery.data(this,key)}):(parts=key.split(".",2),parts[1]=parts[1]?"."+parts[1]:"",part=parts[1]+"!",jQuery.access(this,function(value){return value===undefined?(data=this.triggerHandler("getData"+part,[parts[0]]),data===undefined&&elem&&(data=jQuery.data(elem,key),data=dataAttr(elem,key,data)),data===undefined&&parts[1]?this.data(parts[0]):data):(parts[1]=value,this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts),jQuery.data(this,key,value),self.triggerHandler("changeData"+part,parts)}),undefined)},null,value,arguments.length>1,null,!1))},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;return elem?(type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]):undefined},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};fn==="inprogress"&&(fn=queue.shift()),fn&&(type==="fx"&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!queue.length&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery.removeData(elem,type+"queue",!0),jQuery.removeData(elem,key,!0)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return typeof type!="string"&&(data=type,type="fx",setter--),setter>arguments.length?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),type==="fx"&&queue[0]!=="inprogress"&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};typeof type!="string"&&(obj=type,type=undefined),type=type||"fx";while(i--)(tmp=jQuery._data(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var nodeHook,boolHook,fixSpecified,rclass=/[\t\r\n]/g,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea|)$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(value&&typeof value=="string")for(classNames=value.split(core_rspace),i=0,l=this.length;l>i;i++)if(elem=this[i],elem.nodeType===1)if(elem.className||classNames.length!==1){for(setClass=" "+elem.className+" ",c=0,cl=classNames.length;cl>c;c++)~setClass.indexOf(" "+classNames[c]+" ")||(setClass+=classNames[c]+" ");elem.className=jQuery.trim(setClass)}else elem.className=value;return this},removeClass:function(value){var removes,className,elem,c,cl,i,l;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(value&&typeof value=="string"||value===undefined)for(removes=(value||"").split(core_rspace),i=0,l=this.length;l>i;i++)if(elem=this[i],elem.nodeType===1&&elem.className){for(className=(" "+elem.className+" ").replace(rclass," "),c=0,cl=removes.length;cl>c;c++)while(className.indexOf(" "+removes[c]+" ")>-1)className=className.replace(" "+removes[c]+" "," ");elem.className=value?jQuery.trim(className):""}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal=="boolean";return jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(core_rspace);while(className=classNames[i++])state=isBool?state:!self.hasClass(className),self[state?"addClass":"removeClass"](className)}else(type==="undefined"||type==="boolean")&&(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1)return!0;return!1},val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val,self=jQuery(this);this.nodeType===1&&(val=isFunction?value.call(this,i,self.val()):value,val==null?val="":typeof val=="number"?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return value==null?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:(ret=elem.value,typeof ret=="string"?ret.replace(rreturn,""):ret==null?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(0>index)return null;for(i=one?index:0,max=one?index+1:options.length;max>i;i++)if(option=options[i],!(!option.selected||(jQuery.support.optDisabled?option.disabled:option.getAttribute("disabled")!==null)||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return one&&!values.length&&options.length?jQuery(options[index]).val():values},set:function(elem,value){var values=jQuery.makeArray(value);return jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0}),values.length||(elem.selectedIndex=-1),values}}},attrFn:{},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&nType!==3&&nType!==8&&nType!==2)return pass&&jQuery.isFunction(jQuery.fn[name])?jQuery(elem)[name](value):elem.getAttribute===undefined?jQuery.prop(elem,name,value):(notxml=nType!==1||!jQuery.isXMLDoc(elem),notxml&&(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)),value!==undefined?value===null?(jQuery.removeAttr(elem,name),undefined):hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,""+value),value):hooks&&"get"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null?ret:(ret=elem.getAttribute(name),ret===null?undefined:ret))},removeAttr:function(elem,value){var propName,attrNames,name,isBool,i=0;if(value&&elem.nodeType===1)for(attrNames=value.split(core_rspace);attrNames.length>i;i++)name=attrNames[i],name&&(propName=jQuery.propFix[name]||name,isBool=rboolean.test(name),isBool||jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName),isBool&&propName in elem&&(elem[propName]=!1))},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode)jQuery.error("type property can't be changed");else if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}},value:{get:function(elem,name){return nodeHook&&jQuery.nodeName(elem,"button")?nodeHook.get(elem,name):name in elem?elem.value:null},set:function(elem,value,name){return nodeHook&&jQuery.nodeName(elem,"button")?nodeHook.set(elem,value,name):(elem.value=value,undefined)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&nType!==3&&nType!==8&&nType!==2)return notxml=nType!==1||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}}),boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===!0||typeof property!="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==!1?name.toLowerCase():undefined},set:function(elem,value,name){var propName;return value===!1?jQuery.removeAttr(elem,name):(propName=jQuery.propFix[name]||name,propName in elem&&(elem[propName]=!0),elem.setAttribute(name,name.toLowerCase())),name}},getSetAttribute||(fixSpecified={name:!0,id:!0,coords:!0},nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;return ret=elem.getAttributeNode(name),ret&&(fixSpecified[name]?ret.value!=="":ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||(ret=document.createAttribute(name),elem.setAttributeNode(ret)),ret.value=value+""}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){return value===""?(elem.setAttribute(name,"auto"),value):undefined}})}),jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){value===""&&(value="false"),nodeHook.set(elem,value,name)}}),jQuery.support.hrefNormalized||jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret}})}),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return elem.style.cssText=""+value}}),jQuery.support.optSelected||(jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}})),jQuery.support.enctype||(jQuery.propFix.enctype="encoding"),jQuery.support.checkOn||jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:undefined}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*|)(?:\.(.+)|)$/,rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,handlers,special;if(elem.nodeType!==3&&elem.nodeType!==8&&types&&handler&&(elemData=jQuery._data(elem))){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),events=elemData.events,events||(elemData.events=events={}),eventHandle=elemData.handle,eventHandle||(elemData.handle=eventHandle=function(e){return jQuery===undefined||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=jQuery.trim(hoverHack(types)).split(" "),t=0;types.length>t;t++)tns=rtypenamespace.exec(types[t])||[],type=tns[1],namespaces=(tns[2]||"").split(".").sort(),special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,namespace:namespaces.join(".")},handleObjIn),handlers=events[type],handlers||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0;elem=null}},global:{},remove:function(elem,types,handler,selector,mappedTypes){var t,tns,type,origType,namespaces,origCount,j,events,special,eventType,handleObj,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(types=jQuery.trim(hoverHack(types||"")).split(" "),t=0;types.length>t;t++)if(tns=rtypenamespace.exec(types[t])||[],type=origType=tns[1],namespaces=tns[2],type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,eventType=events[type]||[],origCount=eventType.length,namespaces=namespaces?RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,j=0;eventType.length>j;j++)handleObj=eventType[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||namespaces&&!namespaces.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&(selector!=="**"||!handleObj.selector)||(eventType.splice(j--,1),handleObj.selector&&eventType.delegateCount--,special.remove&&special.remove.call(elem,handleObj));eventType.length===0&&origCount!==eventType.length&&(special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery.removeData(elem,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(event,data,elem,onlyHandlers){if(!elem||elem.nodeType!==3&&elem.nodeType!==8){var cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType,type=event.type||event,namespaces=[];if(!rfocusMorph.test(type+jQuery.event.triggered)&&(0>type.indexOf("!")||(type=type.slice(0,-1),exclusive=!0),0>type.indexOf(".")||(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),elem&&!jQuery.event.customEvent[type]||jQuery.event.global[type]))if(event=typeof event=="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type),event.type=type,event.isTrigger=!0,event.exclusive=exclusive,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,ontype=0>type.indexOf(":")?"on"+type:"",elem){if(event.result=undefined,event.target||(event.target=elem),data=data!=null?jQuery.makeArray(data):[],data.unshift(event),special=jQuery.event.special[type]||{},!special.trigger||special.trigger.apply(elem,data)!==!1){if(eventPath=[[elem,special.bindType||type]],!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode,old=elem;cur;cur=cur.parentNode)eventPath.push([cur,bubbleType]),old=cur;old===(elem.ownerDocument||document)&&eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}for(i=0;eventPath.length>i&&!event.isPropagationStopped();i++)cur=eventPath[i][0],event.type=eventPath[i][1],handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===!1&&event.preventDefault();return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&special._default.apply(elem.ownerDocument,data)!==!1||type==="click"&&jQuery.nodeName(elem,"a")||!jQuery.acceptData(elem)||ontype&&elem[type]&&(type!=="focus"&&type!=="blur"||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)&&(old=elem[ontype],old&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=undefined,old&&(elem[ontype]=old)),event.result}}else{cache=jQuery.cache;for(i in cache)cache[i].events&&cache[i].events[type]&&jQuery.event.trigger(event,data,cache[i].handle.elem,!0)}}},dispatch:function(event){event=jQuery.event.fix(event||window.event);var i,j,cur,jqcur,ret,selMatch,matched,matches,handleObj,sel,handlers=(jQuery._data(this,"events")||{})[event.type]||[],delegateCount=handlers.delegateCount,args=[].slice.call(arguments),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[];if(args[0]=event,event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){if(delegateCount&&(!event.button||event.type!=="click"))for(jqcur=jQuery(this),jqcur.context=this,cur=event.target;cur!=this;cur=cur.parentNode||this)if(cur.disabled!==!0||event.type!=="click"){for(selMatch={},matches=[],jqcur[0]=cur,i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector,selMatch[sel]===undefined&&(selMatch[sel]=jqcur.is(sel)),selMatch[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,matches:matches})}for(handlers.length>delegateCount&&handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)}),i=0;handlerQueue.length>i&&!event.isPropagationStopped();i++)for(matched=handlerQueue[i],event.currentTarget=matched.elem,j=0;matched.matches.length>j&&!event.isImmediatePropagationStopped();j++)handleObj=matched.matches[j],(run_all||!event.namespace&&!handleObj.namespace||event.namespace_re&&event.namespace_re.test(handleObj.namespace))&&(event.data=handleObj.data,event.handleObj=handleObj,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined&&(event.result=ret,ret===!1&&(event.preventDefault(),event.stopPropagation())));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return event.which==null&&(event.which=original.charCode!=null?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;return event.pageX==null&&original.clientX!=null&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||button===undefined||(event.which=button&1?1:button&2?3:button&4?2:0),event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;for(event=jQuery.Event(originalEvent),i=copy.length;i;)prop=copy[--i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),event.target.nodeType===3&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},special:{ready:{setup:jQuery.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){jQuery.isWindow(this)&&(this.onbeforeunload=eventHandle)},teardown:function(namespaces,eventHandle){this.onbeforeunload===eventHandle&&(this.onbeforeunload=null)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.event.handle=jQuery.event.dispatch,jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(elem[name]===undefined&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0,undefined):new jQuery.Event(src,props)},jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return handleObj.selector,(!related||related!==target&&!jQuery.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret
// }}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){return jQuery.nodeName(this,"form")?!1:(jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;form&&!jQuery._data(form,"_submit_attached")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"_submit_attached",!0))}),undefined)},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){return jQuery.nodeName(this,"form")?!1:(jQuery.event.remove(this,"._submit"),undefined)}}),jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){return rformElems.test(this.nodeName)?((this.type==="checkbox"||this.type==="radio")&&(jQuery.event.add(this,"propertychange._change",function(event){event.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1):(jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"_change_attached")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"_change_attached",!0))}),undefined)},handle:function(event){var elem=event.target;return this!==elem||event.isSimulated||event.isTrigger||elem.type!=="radio"&&elem.type!=="checkbox"?event.handleObj.handler.apply(this,arguments):undefined},teardown:function(){return jQuery.event.remove(this,"._change"),rformElems.test(this.nodeName)}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){attaches++===0&&document.addEventListener(orig,handler,!0)},teardown:function(){--attaches===0&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types=="object"){typeof selector!="string"&&(data=data||selector,selector=undefined);for(type in types)this.on(type,selector,data,types[type],one);return this}if(data==null&&fn==null?(fn=selector,data=selector=undefined):fn==null&&(typeof selector=="string"?(fn=data,data=undefined):(fn=data,data=selector,selector=undefined)),fn===!1)fn=returnFalse;else if(!fn)return this;return one===1&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if(typeof types=="object"){for(type in types)this.off(type,selector,types[type]);return this}return(selector===!1||typeof selector=="function")&&(fn=selector,selector=undefined),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){return jQuery(this.context).on(types,this.selector,data,fn),this},die:function(types,fn){return jQuery(this.context).off(types,this.selector||"**",fn),this},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length==1?this.off(selector,"**"):this.off(types,selector||"**",fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){return this[0]?jQuery.event.trigger(type,data,this[0],!0):undefined},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;return jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1};toggler.guid=guid;while(args.length>i)args[i++].guid=guid;return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return fn==null&&(fn=data,data=null),arguments.length>0?this.on(name,null,data,fn):this.trigger(name)},rkeyEvent.test(name)&&(jQuery.event.fixHooks[name]=jQuery.event.keyHooks),rmouseEvent.test(name)&&(jQuery.event.fixHooks[name]=jQuery.event.mouseHooks)}),function(window,undefined){function multipleContexts(selector,contexts,results,seed){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results,seed)}function handlePOSGroup(selector,posfilter,argument,contexts,seed,not){var results,fn=Expr.setFilters[posfilter.toLowerCase()];return fn||Sizzle.error(posfilter),(selector||!(results=seed))&&multipleContexts(selector||"*",contexts,results=[],seed),results.length>0?fn(results,argument,not):[]}function handlePOS(selector,context,results,seed,groups){for(var match,not,anchor,ret,elements,currentContexts,part,lastIndex,i=0,len=groups.length,rpos=matchExpr.POS,rposgroups=RegExp("^"+rpos.source+"(?!"+whitespace+")","i"),setUndefined=function(){for(var i=1,len=arguments.length-2;len>i;i++)arguments[i]===undefined&&(match[i]=undefined)};len>i;i++){rpos.exec(""),selector=groups[i],ret=[],anchor=0,elements=seed;while(match=rpos.exec(selector))lastIndex=rpos.lastIndex=match.index+match[0].length,lastIndex>anchor&&(part=selector.slice(anchor,match.index),anchor=lastIndex,currentContexts=[context],rcombinators.test(part)&&(elements&&(currentContexts=elements),elements=seed),(not=rendsWithNot.test(part))&&(part=part.slice(0,-5).replace(rcombinators,"$&*")),match.length>1&&match[0].replace(rposgroups,setUndefined),elements=handlePOSGroup(part,match[1],match[2],currentContexts,elements,not));elements?(ret=ret.concat(elements),(part=selector.slice(anchor))&&part!==")"?rcombinators.test(part)?multipleContexts(part,ret,results,seed):Sizzle(part,context,results,seed?seed.concat(elements):elements):push.apply(results,ret)):Sizzle(selector,context,results,seed)}return len===1?results:Sizzle.uniqueSort(results)}function tokenize(selector,context,xml){for(var tokens,soFar,type,groups=[],i=0,match=rselector.exec(selector),matched=!match.pop()&&!match.pop(),selectorGroups=matched&&selector.match(rgroups)||[""],preFilters=Expr.preFilter,filters=Expr.filter,checkContext=!xml&&context!==document;(soFar=selectorGroups[i])!=null&&matched;i++){groups.push(tokens=[]),checkContext&&(soFar=" "+soFar);while(soFar){matched=!1,(match=rcombinators.exec(soFar))&&(soFar=soFar.slice(match[0].length),matched=tokens.push({part:match.pop().replace(rtrim," "),captures:match}));for(type in filters)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match,context,xml))||(soFar=soFar.slice(match.shift().length),matched=tokens.push({part:type,captures:match}));if(!matched)break}}return matched||Sizzle.error(selector),groups}function addCombinator(matcher,combinator,context){var dir=combinator.dir,doneName=done++;return matcher||(matcher=function(elem){return elem===context}),combinator.first?function(elem,context){while(elem=elem[dir])if(elem.nodeType===1)return matcher(elem,context)&&elem}:function(elem,context){var cache,dirkey=doneName+"."+dirruns,cachedkey=dirkey+"."+cachedruns;while(elem=elem[dir])if(elem.nodeType===1){if((cache=elem[expando])===cachedkey)return elem.sizset;if(typeof cache=="string"&&cache.indexOf(dirkey)===0){if(elem.sizset)return elem}else{if(elem[expando]=cachedkey,matcher(elem,context))return elem.sizset=!0,elem;elem.sizset=!1}}}}function addMatcher(higher,deeper){return higher?function(elem,context){var result=deeper(elem,context);return result&&higher(result===!0?elem:result,context)}:deeper}function matcherFromTokens(tokens,context,xml){for(var token,matcher,i=0;token=tokens[i];i++)Expr.relative[token.part]?matcher=addCombinator(matcher,Expr.relative[token.part],context):(token.captures.push(context,xml),matcher=addMatcher(matcher,Expr.filter[token.part].apply(null,token.captures)));return matcher}function matcherFromGroupMatchers(matchers){return function(elem,context){for(var matcher,j=0;matcher=matchers[j];j++)if(matcher(elem,context))return!0;return!1}}var cachedruns,dirruns,sortOrder,siblingCheck,assertGetIdNotName,document=window.document,docElem=document.documentElement,strundefined="undefined",hasDuplicate=!1,baseHasDuplicate=!0,done=0,slice=[].slice,push=[].push,expando=("sizcache"+Math.random()).replace(".",""),whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",pos=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",combinators=whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*",groups="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+attributes+"|"+pseudos.replace(2,7)+"|[^\\\\(),])+",rtrim=RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcombinators=RegExp("^"+combinators),rgroups=RegExp(groups+"?(?="+whitespace+"*,|$)","g"),rselector=RegExp("^(?:(?!,)(?:(?:^|,)"+whitespace+"*"+groups+")*?|"+whitespace+"*(.*?))(\\)|$)"),rtokens=RegExp(groups.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+combinators,"g"),rquickExpr=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rsibling=/[\x20\t\r\n\f]*[+~]/,rendsWithNot=/:not\($/,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rbackslash=/\\(?!\\)/g,matchExpr={ID:RegExp("^#("+characterEncoding+")"),CLASS:RegExp("^\\.("+characterEncoding+")"),NAME:RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),TAG:RegExp("^("+characterEncoding.replace("[-","[-\\*")+")"),ATTR:RegExp("^"+attributes),PSEUDO:RegExp("^"+pseudos),CHILD:RegExp("^:(only|nth|last|first)-child(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),POS:RegExp(pos,"ig"),needsContext:RegExp("^"+whitespace+"*[>+~]|"+pos,"i")},classCache={},cachedClasses=[],compilerCache={},cachedSelectors=[],markFunction=function(fn){return fn.sizzleFilter=!0,fn},createInputFunction=function(type){return function(elem){return elem.nodeName.toLowerCase()==="input"&&elem.type===type}},createButtonFunction=function(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}},assert=function(fn){var pass=!1,div=document.createElement("div");try{pass=fn(div)}catch(e){}return div=null,pass},assertAttributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string"}),assertUsableName=assert(function(div){div.id=expando+0,div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>",docElem.insertBefore(div,docElem.firstChild);var pass=document.getElementsByName&&document.getElementsByName(expando).length===2+document.getElementsByName(expando+0).length;return assertGetIdNotName=!document.getElementById(expando),docElem.removeChild(div),pass}),assertTagNameNoComments=assert(function(div){return div.appendChild(document.createComment("")),div.getElementsByTagName("*").length===0}),assertHrefNotNormalized=assert(function(div){return div.innerHTML="<a href='#'></a>",div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#"}),assertUsableClassName=assert(function(div){return div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",div.getElementsByClassName&&div.getElementsByClassName("e").length!==0?(div.lastChild.className="e",div.getElementsByClassName("e").length!==1):!1}),Sizzle=function(selector,context,results,seed){results=results||[],context=context||document;var match,elem,xml,m,nodeType=context.nodeType;if(nodeType!==1&&nodeType!==9)return[];if(!selector||typeof selector!="string")return results;if(xml=isXML(context),!xml&&!seed&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(nodeType===9){if(elem=context.getElementById(m),!elem||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,slice.call(context.getElementsByTagName(selector),0)),results;if((m=match[3])&&assertUsableClassName&&context.getElementsByClassName)return push.apply(results,slice.call(context.getElementsByClassName(m),0)),results}return select(selector,context,results,seed,xml)},Expr=Sizzle.selectors={cacheLength:50,match:matchExpr,order:["ID","TAG"],attrHandle:{},createPseudo:markFunction,find:{ID:assertGetIdNotName?function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}}:function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}},TAG:assertTagNameNoComments?function(tag,context){return typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag):undefined}:function(tag,context){var results=context.getElementsByTagName(tag);if(tag==="*"){for(var elem,tmp=[],i=0;elem=results[i];i++)elem.nodeType===1&&tmp.push(elem);return tmp}return results}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(rbackslash,""),match[3]=(match[4]||match[5]||"").replace(rbackslash,""),match[2]==="~="&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),match[1]==="nth"?(match[2]||Sizzle.error(match[0]),match[3]=+(match[3]?match[4]+(match[5]||1):2*(match[2]==="even"||match[2]==="odd")),match[4]=+(match[6]+match[7]||match[2]==="odd")):match[2]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var argument,unquoted=match[4];return matchExpr.CHILD.test(match[0])?null:(unquoted&&(argument=rselector.exec(unquoted))&&argument.pop()&&(match[0]=match[0].slice(0,argument[0].length-unquoted.length-1),unquoted=argument[0].slice(0,-1)),match.splice(2,3,unquoted||match[3]),match)}},filter:{ID:assertGetIdNotName?function(id){return id=id.replace(rbackslash,""),function(elem){return elem.getAttribute("id")===id}}:function(id){return id=id.replace(rbackslash,""),function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===id}},TAG:function(nodeName){return nodeName==="*"?function(){return!0}:(nodeName=nodeName.replace(rbackslash,"").toLowerCase(),function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName})},CLASS:function(className){var pattern=classCache[className];return pattern||(pattern=classCache[className]=RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"),cachedClasses.push(className),cachedClasses.length>Expr.cacheLength&&delete classCache[cachedClasses.shift()]),function(elem){return pattern.test(elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")}},ATTR:function(name,operator,check){return operator?function(elem){var result=Sizzle.attr(elem,name),value=result+"";if(result==null)return operator==="!=";switch(operator){case"=":return value===check;case"!=":return value!==check;case"^=":return check&&value.indexOf(check)===0;case"*=":return check&&value.indexOf(check)>-1;case"$=":return check&&value.substr(value.length-check.length)===check;case"~=":return(" "+value+" ").indexOf(check)>-1;case"|=":return value===check||value.substr(0,check.length+1)===check+"-"}}:function(elem){return Sizzle.attr(elem,name)!=null}},CHILD:function(type,argument,first,last){if(type==="nth"){var doneName=done++;return function(elem){var parent,diff,count=0,node=elem;if(first===1&&last===0)return!0;if(parent=elem.parentNode,parent&&(parent[expando]!==doneName||!elem.sizset)){for(node=parent.firstChild;node;node=node.nextSibling)if(node.nodeType===1&&(node.sizset=++count,node===elem))break;parent[expando]=doneName}return diff=elem.sizset-last,first===0?diff===0:diff%first===0&&diff/first>=0}}return function(elem){var node=elem;switch(type){case"only":case"first":while(node=node.previousSibling)if(node.nodeType===1)return!1;if(type==="first")return!0;node=elem;case"last":while(node=node.nextSibling)if(node.nodeType===1)return!1;return!0}}},PSEUDO:function(pseudo,argument,context,xml){var fn=Expr.pseudos[pseudo]||Expr.pseudos[pseudo.toLowerCase()];return fn||Sizzle.error("unsupported pseudo: "+pseudo),fn.sizzleFilter?fn(argument,context,xml):fn}},pseudos:{not:markFunction(function(selector,context,xml){var matcher=compile(selector.replace(rtrim,"$1"),context,xml);return function(elem){return!matcher(elem)}}),enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},parent:function(elem){return!Expr.pseudos.empty(elem)},empty:function(elem){var nodeType;elem=elem.firstChild;while(elem){if(elem.nodeName>"@"||(nodeType=elem.nodeType)===3||nodeType===4)return!1;elem=elem.nextSibling}return!0},contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),header:function(elem){return rheader.test(elem.nodeName)},text:function(elem){var type,attr;return elem.nodeName.toLowerCase()==="input"&&(type=elem.type)==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===type)},radio:createInputFunction("radio"),checkbox:createInputFunction("checkbox"),file:createInputFunction("file"),password:createInputFunction("password"),image:createInputFunction("image"),submit:createButtonFunction("submit"),reset:createButtonFunction("reset"),button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},input:function(elem){return rinputs.test(elem.nodeName)},focus:function(elem){var doc=elem.ownerDocument;return elem===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&(elem.type||elem.href)},active:function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{first:function(elements,argument,not){return not?elements.slice(1):[elements[0]]},last:function(elements,argument,not){var elem=elements.pop();return not?elements:[elem]},even:function(elements,argument,not){for(var results=[],i=not?1:0,len=elements.length;len>i;i+=2)results.push(elements[i]);return results},odd:function(elements,argument,not){for(var results=[],i=not?0:1,len=elements.length;len>i;i+=2)results.push(elements[i]);return results},lt:function(elements,argument,not){return not?elements.slice(+argument):elements.slice(0,+argument)},gt:function(elements,argument,not){return not?elements.slice(0,+argument+1):elements.slice(+argument+1)},eq:function(elements,argument,not){var elem=elements.splice(+argument,1);return not?elements:elem}}};Expr.setFilters.nth=Expr.setFilters.eq,Expr.filters=Expr.pseudos,assertHrefNotNormalized||(Expr.attrHandle={href:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}}),assertUsableName&&(Expr.order.push("NAME"),Expr.find.NAME=function(name,context){return typeof context.getElementsByName!==strundefined?context.getElementsByName(name):undefined}),assertUsableClassName&&(Expr.order.splice(1,0,"CLASS"),Expr.find.CLASS=function(className,context,xml){return typeof context.getElementsByClassName===strundefined||xml?undefined:context.getElementsByClassName(className)});try{slice.call(docElem.childNodes,0)[0].nodeType}catch(e){slice=function(i){for(var elem,results=[];elem=this[i];i++)results.push(elem);return results}}var isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":!1},contains=Sizzle.contains=docElem.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:docElem.contains?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains&&adown.contains(bup))}:function(a,b){while(b=b.parentNode)if(b===a)return!0;return!1},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent=="string")return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(nodeType===3||nodeType===4)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret};Sizzle.attr=function(elem,name){var attr,xml=isXML(elem);return xml||(name=name.toLowerCase()),Expr.attrHandle[name]?Expr.attrHandle[name](elem):assertAttributes||xml?elem.getAttribute(name):(attr=elem.getAttributeNode(name),attr?typeof elem[name]=="boolean"?elem[name]?name:null:attr.specified?attr.value:null:null)},Sizzle.error=function(msg){throw Error("Syntax error, unrecognized expression: "+msg)},[0,0].sort(function(){return baseHasDuplicate=0}),docElem.compareDocumentPosition?sortOrder=function(a,b){return a===b?(hasDuplicate=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?a.compareDocumentPosition(b)&4:a.compareDocumentPosition)?-1:1}:(sortOrder=function(a,b){if(a===b)return hasDuplicate=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup)return siblingCheck(a,b);if(!aup)return-1;if(!bup)return 1;while(cur)ap.unshift(cur),cur=cur.parentNode;cur=bup;while(cur)bp.unshift(cur),cur=cur.parentNode;al=ap.length,bl=bp.length;for(var i=0;al>i&&bl>i;i++)if(ap[i]!==bp[i])return siblingCheck(ap[i],bp[i]);return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)},siblingCheck=function(a,b,ret){if(a===b)return ret;var cur=a.nextSibling;while(cur){if(cur===b)return-1;cur=cur.nextSibling}return 1}),Sizzle.uniqueSort=function(results){var elem,i=1;if(sortOrder&&(hasDuplicate=baseHasDuplicate,results.sort(sortOrder),hasDuplicate))for(;elem=results[i];i++)elem===results[i-1]&&results.splice(i--,1);return results};var compile=Sizzle.compile=function(selector,context,xml){var tokens,group,i,cached=compilerCache[selector];if(cached&&cached.context===context)return cached;for(group=tokenize(selector,context,xml),i=0;tokens=group[i];i++)group[i]=matcherFromTokens(tokens,context,xml);return cached=compilerCache[selector]=matcherFromGroupMatchers(group),cached.context=context,cached.runs=cached.dirruns=0,cachedSelectors.push(selector),cachedSelectors.length>Expr.cacheLength&&delete compilerCache[cachedSelectors.shift()],cached};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){return Sizzle(expr,null,null,[elem]).length>0};var select=function(selector,context,results,seed,xml){selector=selector.replace(rtrim,"$1");var elements,matcher,i,len,elem,token,type,findContext,notTokens,match=selector.match(rgroups),tokens=selector.match(rtokens),contextNodeType=context.nodeType;if(matchExpr.POS.test(selector))return handlePOS(selector,context,results,seed,match);if(seed)elements=slice.call(seed,0);else if(match&&match.length===1){if(tokens.length>1&&contextNodeType===9&&!xml&&(match=matchExpr.ID.exec(tokens[0]))){if(context=Expr.find.ID(match[1],context,xml)[0],!context)return results;selector=selector.slice(tokens.shift().length)}for(findContext=(match=rsibling.exec(tokens[0]))&&!match.index&&context.parentNode||context,notTokens=tokens.pop(),token=notTokens.split(":not")[0],i=0,len=Expr.order.length;len>i;i++)if(type=Expr.order[i],match=matchExpr[type].exec(token)){if(elements=Expr.find[type]((match[1]||"").replace(rbackslash,""),findContext,xml),elements==null)continue;token===notTokens&&(selector=selector.slice(0,selector.length-notTokens.length)+token.replace(matchExpr[type],""),selector||push.apply(results,slice.call(elements,0)));break}}if(selector)for(matcher=compile(selector,context,xml),dirruns=matcher.dirruns++,elements==null&&(elements=Expr.find.TAG("*",rsibling.test(selector)&&context.parentNode||context)),i=0;elem=elements[i];i++)cachedruns=matcher.runs++,matcher(elem,context)&&results.push(elem);return results};document.querySelectorAll&&function(){var disconnectedMatch,oldSelect=select,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,rbuggyQSA=[],rbuggyMatches=[":active"],matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector;assert(function(div){div.innerHTML="<select><option selected></option></select>",div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")}),assert(function(div){div.innerHTML="<p test=''></p>",div.querySelectorAll("[test^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')"),div.innerHTML="<input type='hidden'>",div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled")}),rbuggyQSA=rbuggyQSA.length&&RegExp(rbuggyQSA.join("|")),select=function(selector,context,results,seed,xml){if(!(seed||xml||rbuggyQSA&&rbuggyQSA.test(selector)))if(context.nodeType===9)try{return push.apply(results,slice.call(context.querySelectorAll(selector),0)),results}catch(qsaError){}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var old=context.getAttribute("id"),nid=old||expando,newContext=rsibling.test(selector)&&context.parentNode||context;old?nid=nid.replace(rescape,"\\$&"):context.setAttribute("id",nid);try{return push.apply(results,slice.call(newContext.querySelectorAll(selector.replace(rgroups,"[id='"+nid+"'] $&")),0)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}return oldSelect(selector,context,results,seed,xml)},matches&&(assert(function(div){disconnectedMatch=matches.call(div,"div");try{matches.call(div,"[test!='']:sizzle"),rbuggyMatches.push(Expr.match.PSEUDO)}catch(e){}}),rbuggyMatches=RegExp(rbuggyMatches.join("|")),Sizzle.matchesSelector=function(elem,expr){if(expr=expr.replace(rattributeQuotes,"='$1']"),!(isXML(elem)||rbuggyMatches.test(expr)||rbuggyQSA&&rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||disconnectedMatch||elem.document&&elem.document.nodeType!==11)return ret}catch(e){}return Sizzle(expr,null,null,[elem]).length>0})}(),Sizzle.attr=jQuery.attr,jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var i,l,length,n,r,ret,self=this;if(typeof selector!="string")return jQuery(selector).filter(function(){for(i=0,l=self.length;l>i;i++)if(jQuery.contains(self[i],this))return!0});for(ret=this.pushStack("","find",selector),i=0,l=this.length;l>i;i++)if(length=ret.length,jQuery.find(selector,this[i],ret),i>0)for(n=length;ret.length>n;n++)for(r=0;length>r;r++)if(ret[r]===ret[n]){ret.splice(n--,1);break}return ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;len>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,!0),"filter",selector)},is:function(selector){return!!selector&&(typeof selector=="string"?rneedsContext.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){for(var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||typeof selectors!="string"?jQuery(selectors,context||this.context):0;l>i;i++){cur=this[i];while(cur&&cur.ownerDocument&&cur!==context&&cur.nodeType!==11){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode}}return ret=ret.length>1?jQuery.unique(ret):ret,this.pushStack(ret,"closest",selectors)},index:function(elem){return elem?typeof elem=="string"?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(selector,context){var set=typeof selector=="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}}),jQuery.fn.andSelf=jQuery.fn.addBack,jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return runtil.test(name)||(selector=until),selector&&typeof selector=="string"&&(ret=jQuery.filter(selector,ret)),ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret,this.length>1&&rparentsprev.test(name)&&(ret=ret.reverse()),this.pushStack(ret,name,core_slice.call(arguments).join(","))}
// }),jQuery.extend({filter:function(expr,elems,not){return not&&(expr=":not("+expr+")"),elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until)))cur.nodeType===1&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)n.nodeType===1&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rcheckableType=/^(?:checkbox|radio)$/,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.support.htmlSerialize||(wrapMap._default=[1,"X<div>","</div>"]),jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){(this.nodeType===1||this.nodeType===11)&&this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(elem,this.firstChild)})},before:function(){if(!isDisconnected(this[0]))return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this)});if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(set,this),"before",this.selector)}},after:function(){if(!isDisconnected(this[0]))return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)});if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(this,set),"after",this.selector)}},remove:function(selector,keepData){for(var elem,i=0;(elem=this[i])!=null;i++)(!selector||jQuery.filter(selector,[elem]).length)&&(keepData||elem.nodeType!==1||(jQuery.cleanData(elem.getElementsByTagName("*")),jQuery.cleanData([elem])),elem.parentNode&&elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;(elem=this[i])!=null;i++){elem.nodeType===1&&jQuery.cleanData(elem.getElementsByTagName("*"));while(elem.firstChild)elem.removeChild(elem.firstChild)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=dataAndEvents==null?!1:dataAndEvents,deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):undefined;if(!(typeof value!="string"||rnoInnerhtml.test(value)||!jQuery.support.htmlSerialize&&rnoshimcache.test(value)||!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(value)||wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)elem=this[i]||{},elem.nodeType===1&&(jQuery.cleanData(elem.getElementsByTagName("*")),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(value){return isDisconnected(this[0])?this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this:jQuery.isFunction(value)?this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))}):(typeof value!="string"&&(value=jQuery(value).detach()),this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove(),next?jQuery(next).before(value):jQuery(parent).append(value)}))},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){args=[].concat.apply([],args);var results,first,fragment,iNoClone,i=0,value=args[0],scripts=[],l=this.length;if(!jQuery.support.checkClone&&l>1&&typeof value=="string"&&rchecked.test(value))return this.each(function(){jQuery(this).domManip(args,table,callback)});if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined),self.domManip(args,table,callback)});if(this[0]){if(results=jQuery.buildFragment(args,this,scripts),fragment=results.fragment,first=fragment.firstChild,fragment.childNodes.length===1&&(fragment=first),first)for(table=table&&jQuery.nodeName(first,"tr"),iNoClone=results.cacheable||l-1;l>i;i++)callback.call(table&&jQuery.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],i===iNoClone?fragment:jQuery.clone(fragment,!0,!0));fragment=first=null,scripts.length&&jQuery.each(scripts,function(i,elem){elem.src?jQuery.ajax?jQuery.ajax({url:elem.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):jQuery.error("no ajax"):jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"")),elem.parentNode&&elem.parentNode.removeChild(elem)})}return this}}),jQuery.buildFragment=function(args,context,scripts){var fragment,cacheable,cachehit,first=args[0];return context=context||document,context=(context[0]||context).ownerDocument||context[0]||context,context.createDocumentFragment===undefined&&(context=document),args.length!==1||typeof first!="string"||first.length>=512||context!==document||first.charAt(0)!=="<"||rnocache.test(first)||!jQuery.support.checkClone&&rchecked.test(first)||!jQuery.support.html5Clone&&rnoshimcache.test(first)||(cacheable=!0,fragment=jQuery.fragments[first],cachehit=fragment!==undefined),fragment||(fragment=context.createDocumentFragment(),jQuery.clean(args,context,fragment,scripts),cacheable&&(jQuery.fragments[first]=cachehit&&fragment)),{fragment:fragment,cacheable:cacheable}},jQuery.fragments={},jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,i=0,ret=[],insert=jQuery(selector),l=insert.length,parent=this.length===1&&this[0].parentNode;if((parent==null||parent&&parent.nodeType===11&&parent.childNodes.length===1)&&l===1)return insert[original](this[0]),this;for(;l>i;i++)elems=(i>0?this.clone(!0):this).get(),jQuery(insert[i])[original](elems),ret=ret.concat(elems);return this.pushStack(ret,name,insert.selector)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone;if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||elem.nodeType!==1&&elem.nodeType!==11||jQuery.isXMLDoc(elem)))for(cloneFixAttributes(elem,clone),srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)destElements[i]&&cloneFixAttributes(srcElements[i],destElements[i]);if(dataAndEvents&&(cloneCopyEvent(elem,clone),deepDataAndEvents))for(srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)cloneCopyEvent(srcElements[i],destElements[i]);return srcElements=destElements=null,clone},clean:function(elems,context,fragment,scripts){var j,safe,elem,tag,wrap,depth,div,hasBody,tbody,handleScript,jsTags,i=0,ret=[];for(context&&context.createDocumentFragment!==undefined||(context=document),safe=context===document&&safeFragment;(elem=elems[i])!=null;i++)if(typeof elem=="number"&&(elem+=""),elem){if(typeof elem=="string")if(rhtml.test(elem)){safe=safe||createSafeFragment(context),div=div||safe.appendChild(context.createElement("div")),elem=elem.replace(rxhtmlTag,"<$1></$2>"),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div.innerHTML=wrap[1]+elem+wrap[2];while(depth--)div=div.lastChild;if(!jQuery.support.tbody)for(hasBody=rtbody.test(elem),tbody=tag!=="table"||hasBody?wrap[1]!=="<table>"||hasBody?[]:div.childNodes:div.firstChild&&div.firstChild.childNodes,j=tbody.length-1;j>=0;--j)jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length&&tbody[j].parentNode.removeChild(tbody[j]);!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild),elem=div.childNodes,div=safe.lastChild}else elem=context.createTextNode(elem);elem.nodeType?ret.push(elem):ret=jQuery.merge(ret,elem)}if(div&&(safe.removeChild(div),elem=div=safe=null),!jQuery.support.appendChecked)for(i=0;(elem=ret[i])!=null;i++)jQuery.nodeName(elem,"input")?fixDefaultChecked(elem):elem.getElementsByTagName!==undefined&&jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked);if(fragment)for(handleScript=function(elem){return!elem.type||rscriptType.test(elem.type)?scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem):undefined},i=0;(elem=ret[i])!=null;i++)jQuery.nodeName(elem,"script")&&handleScript(elem)||(fragment.appendChild(elem),elem.getElementsByTagName!==undefined&&(jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript),ret.splice.apply(ret,[i+1,0].concat(jsTags)),i+=jsTags.length));return ret},cleanData:function(elems,acceptData){for(var data,id,elem,type,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;(elem=elems[i])!=null;i++)if((acceptData||jQuery.acceptData(elem))&&(id=elem[internalKey],data=id&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:elem.removeAttribute?elem.removeAttribute(internalKey):elem[internalKey]=null,jQuery.deletedIds.push(id))}}}),function(){var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||0>ua.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},matched=jQuery.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.webkit&&(browser.safari=!0),jQuery.browser=browser,jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,jQuerySub.fn=jQuerySub.prototype=this(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.sub=this.sub,jQuerySub.fn.init=function(selector,context){return context&&context instanceof jQuery&&!(context instanceof jQuerySub)&&(context=jQuerySub(context)),jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub}}();var curCSS,iframe,iframeDoc,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rposition=/^(top|right|bottom|left)$/,rmargin=/^margin/,rnumsplit=RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=RegExp("^([-+])=("+core_pnum+")","i"),elemdisplay={},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400,lineHeight:1},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"],eventsToggle=jQuery.fn.toggle;jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state,fn2){var bool=typeof state=="boolean";return jQuery.isFunction(state)&&jQuery.isFunction(fn2)?eventsToggle.apply(this,arguments):this.each(function(){(bool?state:isHidden(this))?jQuery(this).show():jQuery(this).hide()})}}),jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&elem.nodeType!==3&&elem.nodeType!==8&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];if(!((type=typeof value,type==="string"&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),value==null||type==="number"&&isNaN(value))||(type!=="number"||jQuery.cssNumber[origName]||(value+="px"),hooks&&"set"in hooks&&(value=hooks.set(elem,value,extra))===undefined)))try{style[name]=value}catch(e){}}},css:function(elem,name,numeric,extra){var val,num,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),val===undefined&&(val=curCSS(elem,name)),val==="normal"&&name in cssNormalTransform&&(val=cssNormalTransform[name]),numeric||extra!==undefined?(num=parseFloat(val),numeric||jQuery.isNumeric(num)?num||0:val):val},swap:function(elem,options,callback){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.call(elem);for(name in options)elem.style[name]=old[name];return ret}}),window.getComputedStyle?curCSS=function(elem,name){var ret,width,minWidth,maxWidth,computed=getComputedStyle(elem,null),style=elem.style;return computed&&(ret=computed[name],ret!==""||jQuery.contains(elem.ownerDocument.documentElement,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),ret}:document.documentElement.currentStyle&&(curCSS=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;return ret==null&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left,rsLeft&&(elem.runtimeStyle.left=elem.currentStyle.left),style.left=name==="fontSize"?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(elem.runtimeStyle.left=rsLeft)),ret===""?"auto":ret}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?elem.offsetWidth!==0||curCSS(elem,"display")!=="none"?getWidthOrHeight(elem,name,extra):jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):undefined},set:function(elem,value,extra){return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box"):0)}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,(1>value||jQuery.trim(filter.replace(ralpha,""))!==""||!style.removeAttribute||(style.removeAttribute("filter"),!currentStyle||currentStyle.filter))&&(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){return jQuery.swap(elem,{display:"inline-block"},function(){return computed?curCSS(elem,"marginRight"):undefined})}}),!jQuery.support.pixelPosition&&jQuery.fn.position&&jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed){var ret=curCSS(elem,prop);return rnumnonpx.test(ret)?jQuery(elem).position()[prop]+"px":ret}}}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth===0&&elem.offsetHeight===0||!jQuery.support.reliableHiddenOffsets&&(elem.style&&elem.style.display||curCSS(elem,"display"))==="none"},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value=="string"?value.split(" "):[value],expanded={};for(i=0;4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rselectTextarea=/^(?:select|textarea)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")};var ajaxLocation,ajaxLocParts,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.load=function(url,params,callback){if(typeof url!="string"&&_load)return _load.apply(this,arguments);if(!this.length)return this;var selector,type,response,self=this,off=url.indexOf(" ");return 0>off||(selector=url.slice(off,url.length),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=undefined):typeof params=="object"&&(type="POST"),jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status){callback&&self.each(callback,response||[jqXHR.responseText,status,jqXHR])}}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText)}),this},jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f)}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}}),jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,settings){return settings?ajaxExtend(target,jQuery.ajaxSettings):(settings=target,target=jQuery.ajaxSettings),ajaxExtend(target,settings),target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;state!==2&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),status>=200&&300>status||status===304?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[ifModifiedKey]=modified),modified=jqXHR.getResponseHeader("Etag"),modified&&(jQuery.etag[ifModifiedKey]=modified)),status===304?(statusText="notmodified",isSuccess=!0):(isSuccess=ajaxConvert(s,response),statusText=isSuccess.state,success=isSuccess.data,error=isSuccess.error,isSuccess=!error)):(error=statusText,(!statusText||status)&&(statusText="error",0>status&&(status=0))),jqXHR.status=status,jqXHR.statusText=""+(nativeStatusText||statusText),isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}typeof url=="object"&&(options=url,url=undefined),options=options||{};var ifModifiedKey,responseHeadersString,responseHeaders,transport,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString))responseHeaders[match[1].toLowerCase()]=match[2]}match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){return state||(s.mimeType=type),this},abort:function(statusText){return statusText=statusText||strAbort,transport&&transport.abort(statusText),done(0,statusText),this}};if(deferred.promise(jqXHR),jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,jqXHR.complete=completeDeferred.add,jqXHR.statusCode=function(map){if(map){var tmp;if(2>state)for(tmp in map)statusCode[tmp]=[statusCode[tmp],map[tmp]];else tmp=map[jqXHR.status],jqXHR.always(tmp)}return this},s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(core_rspace),s.crossDomain==null&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=parts&&(parts[1]!=ajaxLocParts[1]||parts[2]!=ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443)))),s.data&&s.processData&&typeof s.data!="string"&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),state===2)return jqXHR;if(fireGlobals=s.global,s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),fireGlobals&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart"),!s.hasContent&&(s.data&&(s.url+=(rquery.test(s.url)?"&":"?")+s.data,delete s.data),ifModifiedKey=s.url,s.cache===!1)){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+(ret===s.url?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),s.ifModified&&(ifModifiedKey=ifModifiedKey||s.url,jQuery.lastModified[ifModifiedKey]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]),jQuery.etag[ifModifiedKey]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey])),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||state===2))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(state>=2)throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},active:0,lastModified:{},etag:{}});var oldCallbacks=[],rquestion=/\?/,rjsonp=/(=)\?(?=&|$)|\?\?/,nonce=jQuery.now();jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,data=s.data,url=s.url,hasCallback=s.jsonp!==!1,replaceInUrl=hasCallback&&rjsonp.test(url),replaceInData=hasCallback&&!replaceInUrl&&typeof data=="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(data);return s.dataTypes[0]==="jsonp"||replaceInUrl||replaceInData?(callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,overwritten=window[callbackName],replaceInUrl?s.url=url.replace(rjsonp,"$1"+callbackName):replaceInData?s.data=data.replace(rjsonp,"$1"+callbackName):hasCallback&&(s.url+=(rquestion.test(url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=undefined}),"script"):undefined}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script"),script.async="async",s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,head&&script.parentNode&&head.removeChild(script),script=undefined,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(0,1)}}}});var xhrCallbacks,xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks)xhrCallbacks[key](0,1)}:!1,xhrId=0;jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR,function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&"withCredentials"in xhr})}(jQuery.ajaxSettings.xhr()),jQuery.support.ajax&&jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async),s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(_){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;
// try{if(callback&&(isAbort||xhr.readyState===4))if(callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]),isAbort)xhr.readyState!==4&&xhr.abort();else{status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),responses={},xml=xhr.responseXML,xml&&xml.documentElement&&(responses.xml=xml);try{responses.text=xhr.responseText}catch(_){}try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?status===1223&&(status=204):status=responses.text?200:404}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},s.async?xhr.readyState===4?setTimeout(callback,0):(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback):callback()},abort:function(){callback&&callback(0,1)}}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=RegExp("^(?:([-+])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,prevScale,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1;if(parts){if(end=+parts[2],unit=parts[3]||(jQuery.cssNumber[prop]?"":"px"),unit!=="px"&&start){start=jQuery.css(tween.elem,prop,!0)||end||1;do prevScale=scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit),scale=tween.cur()/target;while(scale!==1&&scale!==prevScale)}tween.unit=unit,tween.start=start,tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration),this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return tween.elem[tween.prop]==null||tween.elem.style&&tween.elem.style[tween.prop]!=null?(result=jQuery.css(tween.elem,tween.prop,!1,""),result&&result!=="auto"?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed=="boolean"||!i&&jQuery.isFunction(speed)&&jQuery.isFunction(easing)?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);empty&&anim.stop(!0)};return empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return typeof type!="string"&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||type!=null&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));(dequeue||!gotoEnd)&&jQuery.dequeue(this,type)})}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed=="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:typeof opt.duration=="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(opt.queue==null||opt.queue===!0)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.timers=[],jQuery.fx=Tween.prototype.init,jQuery.fx.tick=function(){for(var timer,timers=jQuery.timers,i=0;timers.length>i;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop()},jQuery.fx.timer=function(timer){timer()&&jQuery.timers.push(timer)&&!timerId&&(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.interval=13,jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fx.step={},jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length});var rroot=/^(?:body|html)$/i;jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var box,docElem,body,win,clientTop,clientLeft,scrollTop,scrollLeft,top,left,elem=this[0],doc=elem&&elem.ownerDocument;if(doc)return(body=doc.body)===elem?jQuery.offset.bodyOffset(elem):(docElem=doc.documentElement,jQuery.contains(docElem,elem)?(box=elem.getBoundingClientRect(),win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||docElem.scrollTop,scrollLeft=win.pageXOffset||docElem.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft,{top:top,left:left}):{top:0,left:0})},jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;return jQuery.support.doesNotIncludeMarginInBodyOffset&&(top+=parseFloat(jQuery.css(body,"marginTop"))||0,left+=parseFloat(jQuery.css(body,"marginLeft"))||0),{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");position==="static"&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={};calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),options.top!=null&&(props.top=options.top-curOffset.top+curTop),options.left!=null&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(this[0]){var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();return offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0,offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0,parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0,parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0,{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")offsetParent=offsetParent.offsetParent;return offsetParent||document.body})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);return val===undefined?win?prop in win?win[prop]:win.document.documentElement[method]:elem[method]:(win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val,undefined)},method,val,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!="boolean"),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:elem.nodeType===9?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):value===undefined?jQuery.css(elem,type,value,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable)}})}),window.jQuery=window.$=jQuery,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return jQuery})}(window);var Cookie={build:function(){for(var parts=Array.prototype.slice.apply(arguments),i=0;parts.length>i;i++)parts[i]||parts.splice(i,1);return parts.join("; ")},secondsFromNow:function(seconds){var d=new Date;return d.setTime(d.getTime()+seconds*1e3),d.toGMTString()},set:function(name,value,seconds,domain){var cookieExpiry=this._getExpiry(seconds),cookieDomain=this._getDomain(domain);typeof value=="string"&&(value=value.replace(/\s/g,"+")),document.cookie=Cookie.build(name+"="+encodeURIComponent(value),cookieExpiry,"path=/",cookieDomain)},get:function(name){var valueMatch=RegExp("(?:^|;(?:\\s*))"+name+"=([^;]+)").exec(document.cookie),value=valueMatch?valueMatch[1]:null;return value!==null?decodeURIComponent(value).replace(/\+/g," "):null},unset:function(name,domain){Cookie.set(name,"",-1,domain)},_getExpiry:function(seconds,domain){return seconds?"expires="+Cookie.secondsFromNow(seconds):null},_getDomain:function(domain){return domain?"domain="+domain:null}};(function(){var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(data){for(var i=0;data.length>i;i++){var dataString=data[i].string,dataProp=data[i].prop;if(this.versionSearchString=data[i].versionSearch||data[i].identity,dataString){if(dataString.indexOf(data[i].subString)!=-1)return data[i].identity}else if(dataProp)return data[i].identity}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index!=-1)return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init(),function(){var Exception,bind,emit,exceptionKey,global,init,listeners,__slice=[].slice;global=this,Exception=function(name,msg,file,line){return this.name=name,this.message=msg,this.fileName=file,this.lineNumber=line,this.timestamp=new Date,this.host=window.location.host,this.userAgent=window.navigator.userAgent},Exception.prototype=Error(),Exception.prototype.toString=function(){return this.stack},listeners={error:[]},init=function(){var errorCounts,origOnError;return errorCounts={},window&&window.onerror!==void 0?(origOnError=window.onerror||!1,window.onerror=function(msg,file,line){var exception,key,_ref;return msg==null&&(msg=arguments[0]),file==null&&(file=arguments[1]),line==null&&(line=arguments[2]),exception=new Exception("Uncaught Error",msg,file,line),key=exceptionKey(exception),(_ref=errorCounts[key])==null&&(errorCounts[key]=0),errorCounts[key]+=1,errorCounts[key]>3||emit("error",exception),typeof origOnError=="function"?origOnError(msg,file,line):origOnError}):void 0},exceptionKey=function(e){return""+e.message+"_"+e.fileName+"_"+e.lineNumber},bind=function(eventName,cb){return listeners[eventName].push(cb)},emit=function(){var args,eventName,listener,_i,_len,_ref,_results;for(eventName=arguments[0],args=2>arguments.length?[]:__slice.call(arguments,1),_ref=listeners[eventName],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)listener=_ref[_i],_results.push(listener.apply(null,args));return _results},global.ErrorCatcher={init:init,on:bind}}.call(this),function(){var Beagle,CookieAdapter,LocalStorageAdapter,createPersistence,isArray,isObject,jsonSafe,postParse,__slice=[].slice;Beagle=function(){return this.listeners={add:[],flush:[],log:[]},this.buffer=[],this},Beagle.listeners={log:[]},Beagle.on=function(event,cb){return this.listeners[event].push(cb)},Beagle.off=function(event,listenerToRemove){var listener,safeListeners,_i,_len,_ref;for(safeListeners=[],_ref=this.listeners[event],_i=0,_len=_ref.length;_len>_i;_i++)listener=_ref[_i],listener!==listenerToRemove&&safeListeners.push(listener);return this.listeners[event]=safeListeners},Beagle.trigger=function(){var args,event,func,_i,_len,_ref,_results;for(event=arguments[0],args=2>arguments.length?[]:__slice.call(arguments,1),_ref=this.listeners[event],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],_results.push(func.apply(null,args));return _results},Beagle.nextTick=function(func){return setTimeout(func)},Beagle.prototype.on=Beagle.on,Beagle.prototype.off=Beagle.off,Beagle.prototype.trigger=Beagle.trigger,Beagle.prototype.add=function(name,data){var obj;return data==null&&(data={}),obj={name:name,data:data,timestamp:new Date},this.buffer.push(obj),this.trigger("add",obj)},Beagle.prototype.flush=function(){var messages;return messages=this.buffer,this.buffer=[],messages.length>0&&this.trigger("flush",messages),messages},Beagle.prototype.log=function(){var args;return args=1>arguments.length?[]:__slice.call(arguments,0),this.trigger.apply(this,["log"].concat(__slice.call(args))),Beagle.trigger.apply(Beagle,["log"].concat(__slice.call(args)))},Beagle.prototype.use=function(middleware){return middleware(this)},Beagle.Timer=function(millis){var middleware,onBeforeUnload,running;return running=!0,middleware=function(beagle){var func;return func=function(){return running?(beagle.flush(),beagle.log("Flushed by Beagle.Timer("+millis+")")):void 0},setTimeout(function(){},0),setInterval(func,millis)},middleware.cancel=function(){return running=!1},middleware.resume=function(){return running=!0},typeof window!="undefined"&&(onBeforeUnload=function(e){return middleware.cancel(),e=e||window.event,e&&delete e.returnValue,void 0},window.addEventListener?window.addEventListener("beforeunload",onBeforeUnload,!1):window.attachEvent&&window.attachEvent("onbeforeunload",onBeforeUnload)),middleware},Beagle.SizeThreshold=function(threshold){return function(beagle){var dataSize;return dataSize=0,beagle.on("add",function(data){return dataSize+=JSON.stringify(data).length,dataSize>threshold?(beagle.flush(),beagle.log("Flushed by Beagle.SizeThreshold("+threshold+"), size is "+dataSize+".")):void 0}),beagle.on("flush",function(data){return dataSize=0})}},Beagle.ExternalLinks=function(delay){return delay==null&&(delay=500),function(beagle){return $("body").delegate("a[href^='http']","click",function(e){var origE,redirect,url;return origE=e.originalEvent,e.isDefaultPrevented()||origE.defaultPrevented||origE.returnValue===!1?void 0:(e.preventDefault(),url=$(e.currentTarget).attr("href"),redirect=function(){return window.location.href=url},setTimeout(redirect,delay),beagle.flush(),beagle.log("Flushed by Beagle.ExternalLinks("+delay+"), redirecting to "+url+"."))})}},Beagle.Persistence=function(key){var localStorageEnabled;return localStorageEnabled=function(){try{return localStorage.setItem("beagle-local-storage-test","true"),localStorage.removeItem("beagle-local-storage-test"),!0}catch(e){return!1}}(),localStorageEnabled?Beagle.LocalStoragePersistence(key):Beagle.CookiePersistence(key)},Beagle.LocalStoragePersistence=function(key){return createPersistence(LocalStorageAdapter,key,"LocalStoragePersistence")},Beagle.CookiePersistence=function(key){return createPersistence(CookieAdapter,key,"CookiePersistence")},Beagle.Console=function(){return function(beagle){return beagle.on("add",function(message){return console.log("Beagle::add",message)}),beagle.on("flush",function(messages){return console.log("Beagle::flush",messages)}),beagle.on("log",function(){var args;return args=1>arguments.length?[]:__slice.call(arguments,0),console.log.apply(console,["Beagle::log"].concat(__slice.call(args)))})}},createPersistence=function(store,key,name){return function(beagle){var json,messages;messages=null;try{(json=store.get(key))&&(messages=postParse(JSON.parse(json)))}catch(e){}finally{store.unset(key)}return messages&&(beagle.buffer=beagle.buffer.concat(messages)),beagle.on("add",function(data){json=store.get(key)||"[]",json=json.slice(0,json.length-1),json.length>1&&(json+=","),json+=JSON.stringify(jsonSafe(data)),json+="]";try{return store.set(key,json)}catch(e){return beagle.flush(),beagle.log("Flushed by Beagle."+name+" due to storage error.",e)}}),beagle.on("flush",function(){return store.unset(key)})}},jsonSafe=function(val){var item,k,out,v,_i,_len,_results;if(val instanceof Error)return{name:val.name,stack:val.stack,message:val.message};if(val instanceof Date)return"date-"+val.getTime();if(isObject(val)){out={};for(k in val)v=val[k],out[k]=jsonSafe(v);return out}if(isArray(val)){for(_results=[],_i=0,_len=val.length;_len>_i;_i++)item=val[_i],_results.push(jsonSafe(item));return _results}return val},isArray=function(arr){return Array.isArray?Array.isArray(arr):Object.prototype.toString.call(arr)==="[object Array]"},isObject=function(obj){return typeof obj=="object"&&!isArray(obj)&&obj!==null},postParse=function(val){var date,item,k,millis,out,v,_i,_len,_results;if(typeof val=="string"&&/^date-\d+$/.test(val))return millis=val.substr(5,val.length-5),date=new Date,date.setTime(millis),date;if(isObject(val)){out={};for(k in val)v=val[k],out[k]=postParse(v);return out}if(isArray(val)){for(_results=[],_i=0,_len=val.length;_len>_i;_i++)item=val[_i],_results.push(postParse(item));return _results}return val},LocalStorageAdapter={get:function(key){return localStorage.getItem(key)},set:function(key,val){return localStorage.setItem(key,val)},unset:function(key){return localStorage.removeItem(key)}},CookieAdapter={charLimit:4e3,build:function(){var compacted,part,parts,_i,_len;for(parts=1>arguments.length?[]:__slice.call(arguments,0),compacted=[],_i=0,_len=parts.length;_len>_i;_i++)part=parts[_i],part&&compacted.push(part);return compacted.join("; ")},secondsFromNow:function(seconds){var d;return d=new Date,d.setTime(d.getTime()+seconds*1e3),d.toGMTString()},set:function(name,value,seconds,domain){var cookie,cookieDomain,encodedValue,expiry,oneYear;if(encodedValue=encodeURIComponent(value),oneYear=31536e3,expiry="expires="+this.secondsFromNow(seconds||oneYear),domain&&(cookieDomain="domain="+domain),cookie=this.build(name+"="+encodedValue,expiry,"path=/",cookieDomain),cookie.length>this.charLimit)throw"Cookie size exceeded "+this.charLimit+" bytes";return document.cookie=cookie},get:function(name){var valueMatch;return valueMatch=RegExp("(?:^|;(?:\\s*))"+name+"=([^;]+)").exec(document.cookie),valueMatch?decodeURIComponent(valueMatch[1]):void 0},unset:function(name,domain){return this.set(name,"",-1,domain)}},module!==void 0&&module.exports?module.exports=Beagle:this.Beagle=Beagle}.call(this),function(){function pad(number){var r=number+"";return r.length===1&&(r="0"+r),r}function encodedSeed(){return Tracky.seed?encodeURI(Tracky.seed):void 0}function fireEvents(data,ls){for(var i=0;ls.length>i;i++){var listener=ls[i];try{listener(data)}catch(e){Tracky.whenDebugging(function(){console.log("Error running listener",listener)})}}}function postRequest(data){return data===void 0||data instanceof Array&&data.length===0?(Tracky.whenDebugging(function(){throw"Tracky.log error: No data to send"}),void 0):Tracky.endpoint?(Tracky.whenDebugging(function(){console.log(Tracky.endpoint+" => %s",JSON.stringify(data))}),jQuery.ajax(Tracky.endpoint,{type:"POST",data:JSON.stringify(data)}),fireEvents(data,listeners.log),void 0):(Tracky.whenDebugging(function(){throw"Tracky.log error: No endpoint defined"}),void 0)}function ensureTrackyRulesForMessage(message){var outMessage=Tracky.merge({},message,!0);if(outMessage.event_id=Tracky.generateUUID(),outMessage.event_name){var originalEventName=outMessage.event_name;outMessage.event_name=(outMessage.event_name+"").toLowerCase(),originalEventName!=outMessage.event_name&&Tracky.whenDebugging(function(){console.warn("Tracky.log: event_name being changed from %s to %s to conform with Tracky spec",originalEventName+"",outMessage.event_name)})}return outMessage.event_client_timestamp||(outMessage.event_client_timestamp=Tracky.currentISODateString()),typeof outMessage.event_client_timestamp!="string"&&(outMessage.event_client_timestamp=formatTimestamp(outMessage.event_client_timestamp)),outMessage}function formatTimestamp(now){return now.getUTCFullYear()+"-"+pad(now.getUTCMonth()+1)+"-"+pad(now.getUTCDate())+"T"+pad(now.getUTCHours())+":"+pad(now.getUTCMinutes())+":"+pad(now.getUTCSeconds())+"."+((now.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}var global=this,listeners={log:[]},Tracky=global.Tracky=function(endpoint){this.endpoint=endpoint,this.listeners={log:[]}},S4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};Tracky.on=function(name,listener){listeners[name].push(listener)},Tracky.prototype.on=function(name,listener){this.listeners[name].push(listener)},Tracky.prototype.log=function(eventName,data){var requiredData={event_name:(eventName+"").toLowerCase(),event_client_timestamp:Tracky.currentISODateString(),event_id:Tracky.generateUUID()},ajaxData=Tracky.merge({},data||{},!0);ajaxData=Tracky.merge(ajaxData,requiredData);var endpoint=this.endpoint||Tracky.endpoint;return endpoint?(Tracky.whenDebugging(function(){console.log(endpoint+" => %s",JSON.stringify(ajaxData))}),jQuery.ajax(endpoint,{type:"POST",data:JSON.stringify(ajaxData)}),fireEvents(ajaxData,this.listeners.log.concat(listeners.log)),void 0):(Tracky.whenDebugging(function(){throw"Tracky.log error: No endpoint defined"}),void 0)},Tracky.currentISODateString=function(){var now=new Date;return formatTimestamp(now)},Tracky.whenDebugging=function(callback){Tracky.debug&&callback.call()},Tracky.merge=function(source,data,checkKey){var key,output={};for(key in source)output[key]=source[key];for(key in data)key.match(/^\w+$/)||!checkKey?output[key]=data[key]:Tracky.whenDebugging(function(){console.warn("Tracky.log - Invalid key '"+key+"' ignored")});return output},Tracky.generateUUID=function(){var seed=encodedSeed(),id=S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4();return seed&&(id=id+"-"+seed),id},Tracky.log=function(){var dataForRequest,bulkRequest,bulkInputData,trackyifiedData;if(bulkRequest=arguments.length===1&&arguments[0]instanceof Array||arguments.length>1?!0:!1){dataForRequest=[],bulkInputData=arguments.length===1&&arguments[0]instanceof Array?arguments[0]:arguments;for(var i=0;bulkInputData.length>i;i++)trackyifiedData=ensureTrackyRulesForMessage(bulkInputData[i]),trackyifiedData.event_name&&dataForRequest.push(trackyifiedData);dataForRequest.length===1&&(dataForRequest=dataForRequest[0])}else trackyifiedData=ensureTrackyRulesForMessage(arguments[0]),trackyifiedData.event_name&&(dataForRequest=trackyifiedData);return postRequest(dataForRequest)}}.call(this),function(){var Bloodhound,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__slice=[].slice;this.Bloodhound=Bloodhound=function(){function Bloodhound(atts){var key,updateInterval,_i,_len,_ref,_this=this;atts==null&&(atts={}),this._onEvent=__bind(this._onEvent,this),this.handleErrors=__bind(this.handleErrors,this);try{for(this.eventListeners={},this.widgetKey=atts.widgetKey||"bhw",this.contentKey=atts.contentKey||"bhc",this.widgetContainer=atts.widgetContainer||$("body"),updateInterval=atts.updateInterval||1e3,_ref=["widgetKey","contentKey","widgetContainer","updateInterval"],_i=0,_len=_ref.length;_len>_i;_i++)key=_ref[_i],delete atts[key];this.metadata=atts,this.on("error",function(){var args;return args=1>arguments.length?[]:__slice.call(arguments,0),Bloodhound.trigger.apply(Bloodhound,["error"].concat(__slice.call(args)))}),this.reset(),Bloodhound.Helpers.nextTick(function(){return _this.updateWidgets()}),Bloodhound.Helpers.eachInterval(updateInterval,function(){return _this.paused?void 0:_this.updateWidgets()}),$("body").delegate("select","focus",function(e){return _this.paused=!0}),$("body").delegate("select","blur",function(e){return _this.paused=!1})}catch(e){Bloodhound.Helpers.nextTick(function(){return _this.trigger("error",e)})}}return Bloodhound.listeners={error:[]},Bloodhound.reset=function(){return this.listeners={error:[]}},Bloodhound.on=function(key,func){var _base,_ref;return(_ref=(_base=this.listeners)[key])==null&&(_base[key]=[]),this.listeners[key].push(func)},Bloodhound.trigger=function(){var args,func,key,_base,_i,_len,_ref,_ref1,_results;for(key=arguments[0],args=2>arguments.length?[]:__slice.call(arguments,1),(_ref=(_base=this.listeners)[key])==null&&(_base[key]=[]),_ref1=this.listeners[key],_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)func=_ref1[_i],_results.push(func.apply(null,args));return _results},Bloodhound.prototype.reset=function(){return this.widgetFinder=new Bloodhound.WidgetFinder(this.widgetKey,this.contentKey,this.widgetContainer,this),this.events=new Bloodhound.Events(this.widgetKey,this.contentKey,this.widgetContainer),this.events.listenToAll(),this.events.bind(this._onEvent),this.widgets=[]},Bloodhound.prototype.data=function(){var key,out,val,widget,_ref;out={},_ref=this.metadata;for(key in _ref)val=_ref[key],out[key]=val;return out.widgets=function(){var _i,_len,_ref1,_results;for(_ref1=this.widgets,_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)widget=_ref1[_i],_results.push(widget.data());return _results}.call(this),out},Bloodhound.prototype.updateWidgets=function(){var _this=this;return this.handleErrors(function(){var newWidgets;return newWidgets=_this.widgetFinder.findNew()||[],newWidgets.length>0?(_this.events.registerWidgets(newWidgets,_this.widgetKey,_this.contentKey),_this.widgets=_this.widgets.concat(newWidgets),_this.trigger("impression",newWidgets)):void 0})},Bloodhound.prototype.trigger=function(){var args,event,func,_base,_i,_len,_ref,_ref1,_results;for(event=arguments[0],args=2>arguments.length?[]:__slice.call(arguments,1),(_ref=(_base=this.eventListeners)[event])==null&&(_base[event]=[]),_ref1=this.eventListeners[event],_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)func=_ref1[_i],_results.push(func.apply(null,args));return _results},Bloodhound.prototype.bind=function(event,func){var _base,_ref;return(_ref=(_base=this.eventListeners)[event])==null&&(_base[event]=[]),this.eventListeners[event].push(func)},Bloodhound.prototype.unbind=function(event,funcToRemove){var func,newListeners,_i,_len,_ref;for(newListeners=[],_ref=this.eventListeners[event],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],func!==funcToRemove&&newListeners.push(func);return this.eventListeners[event]=newListeners},Bloodhound.prototype.trackEvent=function(){var args,_ref;return args=1>arguments.length?[]:__slice.call(arguments,0),(_ref=this.events).trackEvent.apply(_ref,args)},Bloodhound.prototype.handleErrors=function(cb){try{return cb()}catch(e){return this.trigger("error",e)}},Bloodhound.prototype._onEvent=function(event){return this.trigger("event",event)},Bloodhound}(),Bloodhound.prototype.on=Bloodhound.prototype.bind,Bloodhound.prototype.off=Bloodhound.prototype.unbind,Bloodhound.prototype.emit=Bloodhound.prototype.trigger}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Bloodhound.Events=function(){function Events(widgetKey,contentKey,container){this.widgetKey=widgetKey,this.contentKey=contentKey,this.container=container,this._ensurePathsExist=__bind(this._ensurePathsExist,this),this.handleEvent=__bind(this.handleEvent,this),this.pathToObjectMap={},this.events=[],this.emitters=[],this.eventListeners=[],this._updateLength(),this.selectors={widgets:"[data-"+this.widgetKey+"], [data-"+this.contentKey+"]",forms:"form[data-"+this.widgetKey+"], form[data-"+this.contentKey+"]"},this.stopListening()}return Events.prototype.listenToAll=function(){var doEvent,handleEvent;return handleEvent=this.handleEvent,doEvent=function(e){var el;return el=$(this),handleEvent(e,el)},this.container.delegate(this.selectors.widgets,"click",doEvent),this.container.delegate(this.selectors.forms,"change focusin focusout",doEvent)},Events.prototype.handleEvent=function(e,widgetEl){var content,el,path,widget;return el=$(widgetEl),this._ensurePathsExist(el),(path=el.attr("data-"+this.contentKey+"-path"))&&(content=this.pathToObjectMap[path])&&this._onEvent(e,content),(path=el.attr("data-"+this.widgetKey+"-path"))&&(widget=this.pathToObjectMap[path])?this._onEvent(e,widget):void 0
// },Events.prototype.stopListening=function(){return this.container.undelegate(this.selectors.widgets,"click"),this.container.undelegate(this.selectors.forms,"change focusin focusout")},Events.prototype.pushEvent=function(event){return this.events.push(event),this[this.length]=event,this._updateLength()},Events.prototype.trigger=function(event){var func,_i,_len,_ref,_results;for(_ref=this.eventListeners,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],_results.push(func(event));return _results},Events.prototype.bind=function(func){return this.eventListeners.push(func)},Events.prototype.unbind=function(funcToRemove){var func,newListeners,_i,_len,_ref;for(newListeners=[],_ref=this.eventListeners,_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],func!==funcToRemove&&newListeners.push(func);return this.eventListeners=newListeners,this._updateLength()},Events.prototype.registerWidgets=function(widgets){var $contentEl,$el,content,contentKey,path,widget,widgetKey,_i,_len,_results;for(widgetKey=this.widgetKey,contentKey=this.contentKey,_results=[],_i=0,_len=widgets.length;_len>_i;_i++)widget=widgets[_i],$el=$(widget.element),path=Bloodhound.Helpers.pathToElement("widget",widget.element,widgetKey,contentKey),$el.attr("data-"+widgetKey+"-path",path),this.pathToObjectMap[path]=widget,_results.push(function(){var _j,_len1,_ref,_results1;for(_ref=widget.content||[],_results1=[],_j=0,_len1=_ref.length;_len1>_j;_j++)content=_ref[_j],$contentEl=$(content.element),path=Bloodhound.Helpers.pathToElement("content",content.element,widgetKey,contentKey),this.pathToObjectMap[path]=content,_results1.push($contentEl.attr("data-"+contentKey+"-path",path));return _results1}.call(this));return _results},Events.prototype.trackEvent=function(e){var innermostWidget,selector,target,widgets;return target=$(e.target),selector="[data-"+this.widgetKey+"],[data-"+this.contentKey+"]",target.is(selector)?this.handleEvent(e,target):(widgets=target.parents(selector),(innermostWidget=widgets[0])?this.handleEvent(e,innermostWidget):void 0)},Events.prototype._onEvent=function(e,widget){var element,event,meta,parent,_i,_len,_ref,_ref1,_this=this;if(event=this._lookupEvent(e),!event){for(event={id:Bloodhound.Helpers.randomId(),jQueryEvent:e,type:e.type,widgets:[widget]},_ref=this._parentsFromPath(widget.path),_i=0,_len=_ref.length;_len>_i;_i++)parent=_ref[_i],event.widgets.push(parent);return element=$(e.target),meta={},element&&(meta.element_id=element.attr("id"),meta.element_node=element[0].nodeName.toLowerCase(),element.attr("type")&&(meta.element_type=element.attr("type"))),(_ref1=e.type)!=="change"&&_ref1!=="focusout"||!element.is("input:text, textarea, input:password, select")||(meta.populated=!!element.val()),e.type==="change"&&element.is("input:radio, input:checkbox")&&(meta.checked=element.is(":checked")),_.isEmpty(meta)||(event.meta=meta),this.pushEvent(event),Bloodhound.Helpers.nextTick(function(){return _this.trigger(event),_this._removeEvent(event)})}},Events.prototype._lookupEvent=function(e){var event,_i,_len,_ref;for(_ref=this.events,_i=0,_len=_ref.length;_len>_i;_i++)if(event=_ref[_i],event.jQueryEvent.originalEvent===e.originalEvent)return event;return null},Events.prototype._updateLength=function(){return this.length=this.events.length},Events.prototype._removeEvent=function(event){var e,i,_i,_len,_ref;for(_ref=this.events,i=_i=0,_len=_ref.length;_len>_i;i=++_i)if(e=_ref[i],e===event)return this.events.splice(i,1),this._updateLength(),void 0},Events.prototype._parentsFromPath=function(path){var delimiter,newPath,out,parts;return out=[],delimiter=Bloodhound.Helpers.pathDelimiter,parts=path.split(delimiter),parts.pop(),parts.length===0?out:(newPath=parts.join(delimiter),out.push(this.pathToObjectMap[newPath]),out=out.concat(this._parentsFromPath(newPath)))},Events.prototype._ensurePathsExist=function($el){var path;return $el.data(this.contentKey)&&!$el.data(""+this.contentKey+"-path")&&(path=Bloodhound.Helpers.pathToElement("content",$el,this.widgetKey,this.contentKey),$el.attr("data-"+this.contentKey+"-path",path)),$el.data(this.widgetKey)&&!$el.data(""+this.widgetKey+"-path")?(path=Bloodhound.Helpers.pathToElement("widget",$el,this.widgetKey,this.contentKey),$el.attr("data-"+this.widgetKey+"-path",path)):void 0},Events}()}.call(this),function(){var S4,counter;counter=0,Bloodhound.Helpers={seed:null,pathDelimiter:"|",randomId:function(){var id;return id=""+this.seed+"-"+(new Date).getTime()+"-"+counter,counter+=1,id},nextTick:function(func){return setTimeout(func)},error:function(message){throw Error("Bloodhound: "+message)},eachInterval:function(millis,func){return setInterval(func,millis)},reset:function(){return counter=0},pathToElement:function(type,element,widgetKey,contentKey){var $el,$p,content,names,p,parents,path,widget,widgetName,_i,_len;for($el=$(element),parents=$el.parents("[data-"+widgetKey+"], [data-"+contentKey+"]"),names=[],_i=0,_len=parents.length;_len>_i;_i++)p=parents[_i],$p=$(p),content=$p.attr("data-"+contentKey),widget=$p.attr("data-"+widgetKey),content&&names.unshift(content),widget&&names.unshift(widget);switch(type){case"widget":names.push($el.attr("data-"+widgetKey));break;case"content":widgetName=$el.attr("data-"+widgetKey),widgetName&&names.push(widgetName),names.push($el.attr("data-"+contentKey))}return path=names.join(Bloodhound.Helpers.pathDelimiter)}},S4=function(){var rand;return rand=((1+Math.random())*65536|0).toString(16)}}.call(this),function(){Bloodhound.WidgetContent=function(){function WidgetContent(atts){var _ref;_ref=atts.name.split(":"),this.type=_ref[0],this.name=_ref[1],this.element=atts.element,this.position=atts.position,this.path=atts.path,this.type&&this.name||Bloodhound.Helpers.error("Incomplete widget content (no name or type)")}return WidgetContent.prototype.data=function(){return{type:this.type,name:this.name,position:this.position}},WidgetContent}()}.call(this),function(){var pathToElement;pathToElement=Bloodhound.Helpers.pathToElement,Bloodhound.WidgetFinder=function(){function WidgetFinder(widgetKey,contentKey,container,bloodhound){this.widgetKey=widgetKey,this.contentKey=contentKey,this.container=container,this.bloodhound=bloodhound,this.trackedPaths={}}return WidgetFinder.prototype.findNew=function(){return this._findNewWidgets().concat(this._findNewContentElements())},WidgetFinder.prototype._findNewWidgets=function(){var widgetElements,_this=this;return widgetElements=this.container.find("[data-"+this.widgetKey+"]:visible"),this._mapUntracked(widgetElements,function(i,el){return _this._widgetFromElement(el)})},WidgetFinder.prototype._findNewContentElements=function(){var extraContentElements,_this=this;return extraContentElements=this.container.find("[data-"+this.widgetKey+"] [data-"+this.contentKey+"]:visible"),this._mapUntracked(extraContentElements,function(i,el){var $el,parentWidget;return $el=$(el),parentWidget=$el.parents("[data-"+_this.widgetKey+"]")[0],_this._widgetFromElement(parentWidget)})},WidgetFinder.prototype._widgetFromElement=function(element){var content,el,_this=this;return el=$(element),content=this._mapUntracked(el.find("[data-"+this.contentKey+"]:visible"),function(i,contentEl){return _this._contentFromElement(contentEl,i)}),el.is("[data-"+this.contentKey+"]")&&this.bloodhound.handleErrors(function(){return content.push(_this._contentFromElement(el,0))}),this._markAsTrackedWidget(element),new Bloodhound.Widget({element:element,name:$(element).data(this.widgetKey),content:content,path:pathToElement("widget",element,this.widgetKey,this.contentKey)})},WidgetFinder.prototype._contentFromElement=function(element,position){return this._markAsTrackedContent(element),new Bloodhound.WidgetContent({element:element,name:$(element).data(this.contentKey),position:position,path:pathToElement("content",element,this.widgetKey,this.contentKey)})},WidgetFinder.prototype._mapUntracked=function(elements,func){var out;return out=[],this._eachUntracked(elements,function(i,el){return out.push(func(i,el))}),out},WidgetFinder.prototype._eachUntracked=function(elements,func){var _this=this;return elements.each(function(i,e){return _this.bloodhound.handleErrors(function(){var $e,path;return $e=$(e),$e.is("[data-"+_this.widgetKey+"]")&&(path=pathToElement("widget",e,_this.widgetKey,_this.contentKey),_this.trackedPaths[path]||func.call(_this,i,e,path)),$e.is("[data-"+_this.contentKey+"]")&&(path=pathToElement("content",e,_this.widgetKey,_this.contentKey),!_this.trackedPaths[path])?func.call(_this,i,e,path):void 0})})},WidgetFinder.prototype._markAsTracked=function(type,element){var path;return path=pathToElement(type,element,this.widgetKey,this.contentKey),this.trackedPaths[path]=!0},WidgetFinder.prototype._markAsTrackedWidget=function(element){return this._markAsTracked("widget",element)},WidgetFinder.prototype._markAsTrackedContent=function(element){return this._markAsTracked("content",element)},WidgetFinder}()}.call(this),function(){Bloodhound.Widget=function(){function Widget(atts){this.name=atts.name,this.element=atts.element,this.path=atts.path,this.content=atts.content||[],this.element.length===0&&Bloodhound.Helpers.error("Widget does not exist"),this.name||Bloodhound.Helpers.error("Incomplete widget (no name)")}return Widget.prototype.data=function(){var item,out;return out={name:this.name},this.content.length>0&&(out.content=function(){var _i,_len,_ref,_results;for(_ref=this.content,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)item=_ref[_i],_results.push(item.data());return _results}.call(this)),out},Widget.prototype.value=function(){return $(this.element).val()},Widget}()}.call(this),function(){var CookieAdapter,LocalStorageAdapter,Page,Session,TrackingHub,Warehouse,__slice=[].slice;TrackingHub={init:function(config){if(config==null&&(config={}),!config.seed)throw"TrackingHub must be initialized with a seed value.";return this.counter=0,this.seed=config.seed,this.session=new Session(config.session),this.page=new Page(config.page),this.user=config.user,this.beagle.use(Beagle.Timer(config.flushInterval||3e3)),this.beagle.add("tracking-init",{session:this.session.data(),page:this.page.data(),user:this.user})},beagle:function(){var beagle;return beagle=new Beagle,beagle.use(Beagle.Persistence("tracking-hub")),beagle}(),add:function(name,data){var extraData;return extraData={session:{id:this.session.id},page:{id:this.page.id},user:this.user},_.extend(data,extraData),this.beagle.add.call(this.beagle,name,data)},flush:function(){return this.beagle.flush.apply(this.beagle,arguments)},on:function(){return this.beagle.on.apply(this.beagle,arguments)},off:function(){return this.beagle.off.apply(this.beagle,arguments)},use:function(){return this.beagle.use.apply(this.beagle,arguments)},randomId:function(){var id;return id=""+this.seed+"-"+(new Date).getTime()+"-TH"+this.counter,this.counter+=1,id}},Session=function(){function Session(config){var key,_i,_len,_ref;for(config==null&&(config={}),this.expiry=config.expiry||1800,this.cookieKey=config.cookieKey||"th-session-id",this.cookieDomain=config.cookieDomain,_ref=["expiry","cookieKey","cookieDomain"],_i=0,_len=_ref.length;_len>_i;_i++)key=_ref[_i],delete config[key];this.metadata=config,this._buildId(),this.warehouse=new Warehouse,this.storeKey="sessionStore",this.prepareSessionStore()}return Session.prototype.prepareSessionStore=function(){var sessionStore;return sessionStore=this.warehouse.get(this.storeKey),this.id!==(sessionStore!=null?sessionStore.sessionId:void 0)?this.warehouse.set(this.storeKey,{data:{},sessionId:this.id}):void 0},Session.prototype.data=function(){var key,out,val,_ref;out={},_ref=this.metadata;for(key in _ref)val=_ref[key],out[key]=val;return out.id=this.id,out},Session.prototype.get=function(key){return this.warehouse.get(this.storeKey).data[key]},Session.prototype.set=function(key,data){var sessionStore;return sessionStore=this.warehouse.get(this.storeKey),sessionStore.data[key]=data,this.warehouse.set(this.storeKey,sessionStore)},Session.prototype.unset=function(key){var sessionStore;return sessionStore=this.warehouse.get(this.storeKey),delete sessionStore.data[key],this.warehouse.set(this.storeKey,sessionStore)},Session.prototype.save=function(){return Cookie.set(this.cookieKey,this.id,this.expiry,this.cookieDomain)},Session.prototype._buildId=function(){var _ref;return this.id=this._idFromCookie(),(_ref=this.id)==null&&(this.id=TrackingHub.randomId()),this.save()},Session.prototype._idFromCookie=function(){return Cookie.get(this.cookieKey)},Session}(),Page=function(){function Page(attributes){var key,_i,_len,_ref;for(attributes==null&&(attributes={}),this.id=attributes.id||TrackingHub.randomId(),_ref=["id","widgets"],_i=0,_len=_ref.length;_len>_i;_i++)key=_ref[_i],delete attributes[key];this.metadata=attributes}return Page.prototype.data=function(){var d,key,val,_ref;d={},_ref=this.metadata;for(key in _ref)val=_ref[key],d[key]=val;return d.id=this.id,d},Page}(),Warehouse=function(){function Warehouse(){var localStorageEnabled;localStorageEnabled=function(){try{return localStorage.setItem("warehouse-local-storage-test","true"),localStorage.removeItem("warehouse-local-storage-test"),!0}catch(e){return!1}}(),this.adapter=localStorageEnabled?LocalStorageAdapter:CookieAdapter}return Warehouse.prototype.get=function(){return this.adapter.get.apply(this.adapter,arguments)},Warehouse.prototype.set=function(){return this.adapter.set.apply(this.adapter,arguments)},Warehouse.prototype.unset=function(){return this.adapter.unset.apply(this.adapter,arguments)},Warehouse}(),LocalStorageAdapter={get:function(key){var val;return val=localStorage.getItem(key),val?JSON.parse(val):void 0},set:function(key,data){return localStorage.setItem(key,JSON.stringify(data))},unset:function(key){return localStorage.removeItem(key)}},CookieAdapter={charLimit:4e3,build:function(){var compacted,part,parts,_i,_len;for(parts=1>arguments.length?[]:__slice.call(arguments,0),compacted=[],_i=0,_len=parts.length;_len>_i;_i++)part=parts[_i],part&&compacted.push(part);return compacted.join("; ")},secondsFromNow:function(seconds){var d;return d=new Date,d.setTime(d.getTime()+seconds*1e3),d.toGMTString()},set:function(name,value,seconds,domain){var cookie,cookieDomain,encodedValue,expiry,oneYear;if(encodedValue=JSON.stringify(value),oneYear=31536e3,expiry="expires="+this.secondsFromNow(seconds||oneYear),domain&&(cookieDomain="domain="+domain),cookie=this.build(name+"="+encodedValue,expiry,"path=/",cookieDomain),cookie.length>this.charLimit)throw"Cookie size exceeded "+this.charLimit+" bytes";return document.cookie=cookie},get:function(name){var decodedValue,valueMatch;return valueMatch=RegExp("(?:^|;(?:\\s*))"+name+"=([^;]+)").exec(document.cookie),valueMatch&&(decodedValue=decodeURIComponent(valueMatch[1])),decodedValue?JSON.parse(decodedValue):void 0},unset:function(name,domain){return this.set(name,"",-1,domain)}},module!==void 0&&module.exports?module.exports=TrackingHub:this.TrackingHub=TrackingHub}.call(this),function(){var Finch,debug,__hasProp={}.hasOwnProperty,__slice=[].slice,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};(typeof exports!="undefined"&&exports!==null?exports:this).Finch=Finch=function(){var listeners;return listeners={},{initialize:function(window,config){var layerConfig,layerName;return this.window=window,this.reset(),this.layers=function(){var _results;_results=[];for(layerName in config)__hasProp.call(config,layerName)&&(layerConfig=config[layerName],_results.push(new Finch.Layer(layerName,layerConfig)));return _results}(),debug("initialized"),this.runPreferredExperiments(),this},run:function(){var layer,_i,_len,_ref;if(this.layers!=null){for(_ref=this.layers,_i=0,_len=_ref.length;_len>_i;_i++)layer=_ref[_i],layer.run();return Finch.Tracking.deliver()}},reset:function(){return this.layers=[]},inTreatment:function(options){var experimentName,layer,variantName;return experimentName=options.experimentName,variantName=options.variantName,layer=_.detect(Finch.Layer.all(),function(layer){return layer.isCurrentExperiment(experimentName)&&layer.experiment().testMatches()}),layer==null?!1:variantName==null?!0:layer.experiment().variantName()===variantName},runPreferredExperiments:function(){var layer,_i,_len,_ref,_results;for(_ref=this.layers,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)layer=_ref[_i],_results.push(layer.preferredRun());return _results},on:function(name,cb){var _ref;return(_ref=listeners[name])==null&&(listeners[name]=[]),listeners[name].push(cb)},trigger:function(){var args,func,name,_i,_len,_ref,_results;if(name=arguments[0],args=2>arguments.length?[]:__slice.call(arguments,1),listeners[name]){for(_ref=listeners[name],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],_results.push(func.apply(null,args));return _results}}}}(),Finch.Experiments={},Finch.Experiments.Global={},Finch.Diversions={},Finch.Trackers=[],Finch.NUMBER_OF_BUCKETS_PER_LAYER=1e3,Finch.VERSION="0.6.7",debug=function(message){return Finch.debug&&(typeof console!="undefined"&&console!==null?console.log:void 0)!=null?console.log("::: finch.js : "+message):void 0},Finch.Diversion=function(){function Diversion(diversionCallback){this.diversionCallback=diversionCallback}return Diversion.prototype.bucket=function(layer){var bucket;if(layer==null)throw"layer is not defined";if(this.diversionCallback==null)throw"no bucketing function defined";if(bucket=this.diversionCallback(layer),bucket==null)return null;if(!this._validBucket(bucket))throw"bucket "+bucket+" out of range";return debug("diversion bucket "+bucket+" for "+(layer!=null?layer.name:void 0)),bucket},Diversion.prototype._validBucket=function(bucket){return bucket>=0&&Finch.NUMBER_OF_BUCKETS_PER_LAYER>=bucket},Diversion}(),Finch.HashCookieDiversion=function(_super){function HashCookieDiversion(){var cookies;cookies=1>arguments.length?[]:__slice.call(arguments,0),this.cookies=cookies,HashCookieDiversion.__super__.constructor.call(this,function(layer){var cookie,cookieName,cookieValue,_i,_len,_ref,_ref1,_ref2;if(this.cookies instanceof Array)for(_ref=this.cookies,_i=0,_len=_ref.length;_len>_i;_i++)cookie=_ref[_i],(cookieValue===void 0||cookieValue===null)&&(_ref1=[cookie,Cookie.get(cookie)],cookieName=_ref1[0],cookieValue=_ref1[1]);else _ref2=[this.cookies,Cookie.get(this.cookies)],cookieName=_ref2[0],cookieValue=_ref2[1];return cookieValue==null?(debug("no valid cookies"),null):(debug("bucketing with cookie: "+cookieName+"="+cookieValue),this._hash(""+cookieValue+","+layer.name))})}return __extends(HashCookieDiversion,_super),HashCookieDiversion.prototype._hash=function(input){var md5;return md5=Finch.Utility.md5(input),debug(md5),parseInt(md5.slice(24,32),16)%Finch.NUMBER_OF_BUCKETS_PER_LAYER},HashCookieDiversion}(Finch.Diversion),Finch.Diversions.RandomDiversion=new Finch.Diversion(function(layer){return Math.floor(Math.random()*Finch.NUMBER_OF_BUCKETS_PER_LAYER)}),Finch.Diversions.CookieDiversion=new Finch.HashCookieDiversion("b"),Finch.Experiment=function(){function Experiment(id,layer,config){var _ref,_ref1,_ref2,_ref3,_ref4;this.id=id,this.layer=layer,config==null&&(config={}),this.name=(_ref=config.name)!=null?_ref:"",this.status=(_ref1=config.status)!=null?_ref1:"inactive",this.variants=(_ref2=config.variants)!=null?_ref2:[],this.guards=(_ref3=config.guards)!=null?_ref3:[],this.params=(_ref4=config.params)!=null?_ref4:{},this.buckets=this._parseBucketRange(config.buckets),this.pathPatterns=this._parsePathPatterns(config.path_patterns),debug("loading experiment "+this.name)}return Experiment.prototype.run=function(){var window,_ref;return window=Finch.window,this.isDeferred()?(debug("matching experiment "+this.id+" deferred with variant "+this.variantName()),(_ref=this._deferCallback())!=null?_ref.call(this):void 0):this.testMatches()?this._execute():debug("GuardFailed on experiment "+this.id)},Experiment.prototype.deferredRun=function(){var variantName;return variantName=this.variantName(),debug("running deferred experiment "+this.id+" with bucket "+variantName),this.testMatches()?this._execute(variantName,Finch.window):debug("GuardFailed on experiment "+this.id),Finch.Tracking.deliver()},Experiment.prototype.isPreferred=function(){return!!this.experimentDefinition().runOnInit},Experiment.prototype.needsPreferredTracking=function(){return!!this.experimentDefinition().trackOnInit},Experiment.prototype.isDeferred=function(){return!!this.experimentDefinition().defer},Experiment.prototype.testMatches=function(){var window;return window=Finch.window,this.pathMatches(window.location)&&this.paramsMatches(window.location)&&this.guardMatches(window)},Experiment.prototype.pathMatches=function(location){var path;return path=location.pathname,path!=null&&this.pathPatterns.length===0?!0:_.any(this.pathPatterns,function(pattern){return pattern.test(path)})},Experiment.prototype.paramsMatches=function(location){var queryParams;return queryParams=Finch.Utility.parseQueryString(location.search),_.isEmpty(this.params)?!0:_.all(this.params,function(paramValues,paramName){return queryParams[paramName]==null?!1:_.any(paramValues,function(value){return queryParams[paramName]===value})})},Experiment.prototype.guardMatches=function(window){var _this=this;return this.guards.length===0?!0:_.all(this.guards,function(guard){var guardFunc,result,_ref,_ref1;return guardFunc=((_ref=_this.experimentDefinition().guards)!=null?_ref[guard]:void 0)||((_ref1=Finch.Experiments.Global.guards)!=null?_ref1[guard]:void 0),result=guardFunc!=null?guardFunc.call(window):void 0,result||Finch.trigger("guarded",_this,guard),result})},Experiment.prototype.currentVariant=function(bucket){return this.experimentDefinition().variants[this.variantNameForBucket(bucket)]},Experiment.prototype.randomVariant=function(){var variantName;return variantName=this.variants[Math.floor(Math.random()*this.variants.length)],this.experimentDefinition().variants[variantName]},Experiment.prototype.variant=function(){var _ref;return(_ref=this.variantCache)!=null?_ref:this.variantCache=this.experimentDefinition().variants[this.variantName()]},Experiment.prototype.variantName=function(){var _ref;return(_ref=this.variantNameCache)!=null?_ref:this.variantNameCache=this.variantNameForBucket(this.bucket())},Experiment.prototype.variantNameForBucket=function(bucket){return this._variantNameByQuerystring()||this._variantNameByCookie()||this._variantNameByRoundRobin(bucket)},Experiment.prototype._variantNameByQuerystring=function(){var experimentName,layerName,params,variantName;return params=Finch.Utility.parseQueryString(Finch.window.location.search),layerName=params.finch_layer,experimentName=params.finch_experiment,variantName=params.finch_variant,layerName===this.layer.name&&experimentName===this.name&&variantName!=null?variantName:void 0},Experiment.prototype._variantNameByCookie=function(){var key;return key=""+this.layer.name+":"+this.id+":Variant",Cookie.get(key)},Experiment.prototype._variantNameByRoundRobin=function(bucket){var variantIndex;return this.buckets.min>bucket||bucket>this.buckets.max?null:(variantIndex=(bucket-this.buckets.min)%this.variants.length,this.variants[variantIndex])},Experiment.prototype.bucket=function(){return this.layer.bucket()},Experiment.prototype.experimentDefinition=function(){var _base,_name,_ref;return(_ref=(_base=Finch.Experiments)[_name=this.id])!=null?_ref:_base[_name]={variants:{}}},Experiment.prototype._execute=function(){var variant,window,_ref,_ref1;window=Finch.window;try{return(_ref=this._beforeCallback())!=null&&_ref.call(window),variant=this.variant(),variant!=null&&(debug("rendering variant "+this.variantName()),debug(variant),this.isPreferred()&&this.needsPreferredTracking()&&(Finch.Tracking.trackExperiment(this),Finch.Tracking.deliver()),variant.call(window)),(_ref1=this._afterCallback())!=null&&_ref1.call(window),this.isPreferred()&&this.needsPreferredTracking()||Finch.Tracking.trackExperiment(this),Finch.trigger("run",this)}catch(e){return Finch.Tracking.trackExperimentError(this,e),Finch.trigger("error",e,this)}},Experiment.prototype._deferCallback=function(){return debug("initializing deferred experiment "+this.name),this.experimentDefinition().defer},Experiment.prototype._beforeCallback=function(){var self,_ref;return self=this,_.wrap((_ref=this.experimentDefinition().before)!=null?_ref:function(){},function(callback){var _base;return debug("starting experiment "+self.name),typeof(_base=Finch.Experiments.Global).before=="function"&&_base.before(),callback()})},Experiment.prototype._afterCallback=function(){var self,_ref;return self=this,_.wrap((_ref=this.experimentDefinition().after)!=null?_ref:function(){},function(callback){var _base;return typeof(_base=Finch.Experiments.Global).after=="function"&&_base.after(),callback(),debug("completed experiment "+self.name)})},Experiment.prototype._parseBucketRange=function(range){var buckets;return range==null&&(range="0..999"),buckets=range.split(".."),{min:parseInt(buckets[0],10),max:parseInt(buckets[1],10)}},Experiment.prototype._parsePathPatterns=function(patterns){var patternSource,_i,_len,_results;if(patterns==null||0>=patterns.length)return[];for(_results=[],_i=0,_len=patterns.length;_len>_i;_i++)patternSource=patterns[_i],_results.push(RegExp("^"+patternSource+"$"));return _results},Experiment}(),Finch.Layer=function(){function Layer(name,config){var experimentConfig,experimentIdentifier,_ref;this.name=name,this.preferredRun=__bind(this.preferredRun,this),this.run=__bind(this.run,this),this.bucket=__bind(this.bucket,this),config!=null&&(debug("loading layer "+this.name),this.experiments=function(){var _ref,_results;_ref=config.experiments,_results=[];for(experimentIdentifier in _ref)__hasProp.call(_ref,experimentIdentifier)&&(experimentConfig=_ref[experimentIdentifier],_results.push(new Finch.Experiment(experimentIdentifier,this,experimentConfig)));return _results}.call(this),config.diversion_type!=null&&(this.diversion=Finch.Diversions[config.diversion_type])),(_ref=this.diversion)==null&&(this.diversion=Finch.Diversions.RandomDiversion)}return Layer.all=function(){return Finch.layers||[]},Layer.prototype.findExperiments=function(selector){var experiment,_i,_len,_ref,_results;if(selector==null)return[];for(_ref=this.experiments,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)experiment=_ref[_i],selector(experiment)&&_results.push(experiment);return _results},Layer.prototype.experimentsForBucket=function(bucket){return this.findExperiments(function(exp){return exp.status==="running"&&bucket>=exp.buckets.min&&exp.buckets.max>=bucket})},Layer.prototype.experiment=function(){return this._getExperimentByQueryString()||this._getExperimentByCookie()||this._getSingleMatchingExperiment()},Layer.prototype.isCurrentExperiment=function(experimentName){var _ref;return((_ref=this.experiment())!=null?_ref.name:void 0)===experimentName},Layer.prototype.bucket=function(){var _ref;return(_ref=this.bucketCache)!=null?_ref:this.bucketCache=this.diversion.bucket(this)},Layer.prototype.run=function(){var experiment;return experiment=this.experiment(),experiment&&!experiment.isPreferred()?experiment.run():void 0},Layer.prototype.preferredRun=function(){var experiment;return experiment=this.experiment(),experiment&&experiment.isPreferred()?experiment.run():void 0},Layer.prototype._getExperimentByQueryString=function(){var experimentName,layerName,params;return this.forcedExperimentCache!=null?this.forcedExperimentCache:(params=Finch.Utility.parseQueryString(Finch.window.location.search),layerName=params.finch_layer,experimentName=params.finch_experiment,layerName&&experimentName&&layerName===this.name?this.forcedExperimentCache=_.detect(this.experiments,function(ex){return ex.name===experimentName}):null)},Layer.prototype._getExperimentByCookie=function(){var experimentName;return experimentName=Cookie.get(""+this.name+":Experiment"),_.detect(this.experiments,function(ex){return ex.name===experimentName})},Layer.prototype._getSingleMatchingExperiment=function(){var results,_this=this;return this.bucket()==null?null:(results=this.findExperiments(function(exp){var _ref;return exp.status==="running"&&(_ref=_this.bucket())>=exp.buckets.min&&exp.buckets.max>=_ref}),results.length===1?results[0]:null)},Layer}(),Finch.ConsoleLoggingTracker={track:function(expSets,window){return console.log(expSets),_(expSets).each(function(expSet){var _ref,_ref1;return console.log("*****************************"),console.log("*** ConsoleLoggingTracker ***"),console.log("*****************************"),console.log("*** layer: "+((_ref=expSet.layer)!=null?_ref.name:void 0)),console.log("*** experiment: "+((_ref1=expSet.experiment)!=null?_ref1.name:void 0)),console.log("*** variant: "+expSet.variant),expSet.error!=null&&console.log("*** error: "+expSet.error),console.log("*****************************")})}},Finch.PixelTracker={track:function(expSets,window){var e,experimentSets,trackerData;return Finch.alwaysFirePixel||!_.isEmpty(expSets)?(experimentSets=_.map(expSets,function(expSet){return{layer:expSet.layer.name,experiment:expSet.experiment.id,variant:expSet.variant,error:expSet.error}}),trackerData=Finch.externalData?{experiments:experimentSets,externalData:Finch.externalData}:experimentSets,e=encodeURIComponent(JSON.stringify(trackerData)),this.sendData(e)):void 0},sendData:function(e){var cacheBuster,trackerPath;return cacheBuster=(new Date).getTime(),trackerPath="/analytic/experiment.gif?e="+e+"&src=img&_="+cacheBuster,$("<img />",{"class":"finch-tracking",src:trackerPath,height:1,width:1}).appendTo($("body"))}},Finch.AjaxPixelTracker={track:Finch.PixelTracker.track,sendData:function(e){var trackerPath;return trackerPath="/analytic/experiment.gif?e="+e+"&src=ajax",$.ajax(trackerPath,{cache:!1})}},Finch.Tracking={deliver:function(){var tracker,_i,_len,_ref;for(_ref=Finch.Trackers,_i=0,_len=_ref.length;_len>_i;_i++){tracker=_ref[_i];try{tracker.track(this._translatedExperiments(),Finch.window)}catch(e){}}return this.reset()},trackExperiment:function(experiment){return this.experiments.push(experiment)},trackExperimentError:function(experiment,error){return this.trackExperiment(experiment),this.experimentErrors[experiment.id]=error},reset:function(){return this.experiments=[],this.experimentErrors={}},_translatedExperiments:function(){var data,error,experiment,_i,_len,_ref,_results;for(_ref=this.experiments,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)experiment=_ref[_i],data={layer:experiment.layer,experiment:experiment,variant:experiment.variantName()},error=this.experimentErrors[experiment.id],error&&(data.error=error),_results.push(data);return _results}},Finch.Tracking.reset(),Finch.Utility=function(){function Utility(){}return Utility.parseQueryString=function(queryString){var name,parameter,params,value,_i,_len,_ref,_ref1;if(params={},queryString===""||queryString==="?")return params;for(_ref=queryString.substr(1).split("&"),_i=0,_len=_ref.length;_len>_i;_i++)parameter=_ref[_i],_ref1=parameter.split("="),name=_ref1[0],value=_ref1[1],params[name]=value;return params},Utility.md5=function(string){return md5(string)},Utility}()}.call(this),function(){var SanityCheck,__slice=[].slice;this.SanityCheck=SanityCheck=function(){function SanityCheck(atts){this.name=atts.name,this.func=atts.func,this.listeners={success:[],failure:[],error:[]}}return SanityCheck.listeners={success:[],failure:[],error:[]},SanityCheck.checks=[],SanityCheck.defaultInterval=1e3,SanityCheck.add=function(name,func){var sc,_this=this;return sc=new SanityCheck({name:name,func:func}),sc.on("success",function(data){return _this.trigger("success",sc,data)}),sc.on("failure",function(data){return _this.trigger("failure",sc,data)}),sc.on("error",function(data){return _this.trigger("error",sc,data)}),this.checks.push(sc),sc
// },SanityCheck.on=function(name,func){return this.listeners[name].push(func)},SanityCheck.trigger=function(){var args,func,name,_i,_len,_ref,_results;for(name=arguments[0],args=2>arguments.length?[]:__slice.call(arguments,1),_ref=this.listeners[name]||[],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],_results.push(func.apply(null,args));return _results},SanityCheck.onNextTick=function(func){return setTimeout(func)},SanityCheck.onInterval=function(func,interval){return setInterval(func,interval)},SanityCheck.reset=function(){return this.listeners={success:[],failure:[],error:[]},this.checks=[]},SanityCheck.run=function(){var sc,_i,_len,_ref,_results;for(_ref=this.checks,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)sc=_ref[_i],_results.push(sc.run());return _results},SanityCheck.prototype.on=function(name,func){return this.listeners[name].push(func)},SanityCheck.prototype.trigger=function(){var args,name,_this=this;return name=arguments[0],args=2>arguments.length?[]:__slice.call(arguments,1),SanityCheck.onNextTick(function(){var func,_i,_len,_ref,_results;for(_ref=_this.listeners[name]||[],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],_results.push(func.apply(null,args));return _results})},SanityCheck.prototype.run=function(){try{return this.func(this)}catch(e){return this.trigger("error",e)}},SanityCheck.prototype.watch=function(selector,interval,cb){var els,finder,_this=this;return cb||(cb=interval,interval=SanityCheck.defaultInterval),els=[],finder=function(){var allEls,newEls;try{return allEls=$(selector),newEls=allEls.not(els),els=allEls,newEls.each(function(i,e){try{return cb($(e))}catch(err){return _this.trigger("error",err)}})}catch(e){return _this.trigger("error",e)}},SanityCheck.onInterval(finder,interval)},SanityCheck.prototype.success=function(data){return this.trigger("success",data)},SanityCheck.prototype.fail=function(data){return this.trigger("failure",data)},SanityCheck}()}.call(this),function(){this.Portal=function(target){var WaitForWindowLoad,addListener,listeners,onPostMessage,pastEvents,pluginQueue,portal;return listeners={},pastEvents={},addListener=function(name,func){return target.attachEvent!=null?target.attachEvent("on"+name,func):target.addEventListener!=null?target.addEventListener(name,func,!1):void 0},WaitForWindowLoad=function(){return function(beagle){var onLoad,ready;return ready=document.readyState==="complete",ready||(onLoad=function(){return ready=!0,beagle.flush()},addListener("load",onLoad)),beagle.on("add",function(){return ready?beagle.flush():void 0})}},pluginQueue=new Beagle,pluginQueue.use(WaitForWindowLoad()),pluginQueue.on("flush",function(msgs){var msg,_i,_len,_results;for(_results=[],_i=0,_len=msgs.length;_len>_i;_i++){msg=msgs[_i];try{_results.push(target.postMessage(JSON.stringify(msg.data),"*"))}catch(e){}}return _results}),onPostMessage=function(event){var channel,data,eventData,eventName,func,_base,_base1,_i,_j,_len,_len1,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_results;if(event.source===target){try{eventData=JSON.parse(event.data)}catch(err){return}for(channel=eventData.channel,eventName=eventData.name,data=eventData.data,(_ref=listeners[channel])==null&&(listeners[channel]={}),(_ref1=pastEvents[channel])==null&&(pastEvents[channel]={}),(_ref2=(_base=pastEvents[channel])["*"])==null&&(_base["*"]=[]),(_ref3=(_base1=pastEvents[channel])[eventName])==null&&(_base1[eventName]=[]),pastEvents[channel]["*"].push(eventData),pastEvents[channel][eventName].push(eventData),_ref4=listeners[channel]["*"]||[],_i=0,_len=_ref4.length;_len>_i;_i++)func=_ref4[_i],func(eventName,data);for(_ref5=listeners[channel][eventName]||[],_results=[],_j=0,_len1=_ref5.length;_len1>_j;_j++)func=_ref5[_j],_results.push(func(data));return _results}},addListener("message",onPostMessage,!1),portal=function(channel){return{add:function(eventName,data){return data==null&&(data={}),pluginQueue.add("msg",{channel:channel,name:eventName,data:data})},bind:function(eventName,func){var _base,_ref,_ref1;return(_ref=listeners[channel])==null&&(listeners[channel]={}),(_ref1=(_base=listeners[channel])[eventName])==null&&(_base[eventName]=[]),listeners[channel][eventName].push(func)},on:function(eventName,func){return this.bind(eventName,func)},replayAndBind:function(eventName,func){var pastEvent,_i,_len,_ref,_ref1;for((_ref=pastEvents[channel])==null&&(pastEvents[channel]={}),_ref1=pastEvents[channel][eventName]||[],_i=0,_len=_ref1.length;_len>_i;_i++)pastEvent=_ref1[_i],eventName==="*"?func(pastEvent.name,pastEvent.data):func(pastEvent.data);return this.bind(eventName,func)}}}}}.call(this),function(){var OptimizeSuite,addTrackingHubListeners,clearLastEventId,getLastEventId,getLastPageId,initBloodhound,initErrorCatcher,initFinch,initReferral,initSanityCheck,initTrackingHub,initTracky,setLastEventId,setLastPageId,withConfigDefaults;OptimizeSuite=window.OptimizeSuite={},OptimizeSuite.Portal=window.Portal(window),window.Portal=null,OptimizeSuite.SanityCheck=window.SanityCheck,window.SanityCheck=null,OptimizeSuite.TrackingHub=window.TrackingHub,OptimizeSuite.Bloodhound=window.Bloodhound,OptimizeSuite.init=function(c){var config;return config=withConfigDefaults(c),initErrorCatcher(),initTracky(config),initTrackingHub(config),addTrackingHubListeners(),initFinch(config.finch),initSanityCheck(),OptimizeSuite.initBloodhound=function(){return initBloodhound(config)},OptimizeSuite.treatAsNewPage=function(url){var reinitTrackingHub;return reinitTrackingHub=function(){var _ref;return config.page.parentEventId=getLastEventId(),config.page.parentPageId=getLastPageId(),config.page.url=encodeURIComponent(url),initTrackingHub(config),(_ref=OptimizeSuite.bloodhound)!=null?_ref.reset():void 0},setTimeout(reinitTrackingHub,0)},OptimizeSuite.TrackingHub.flush()},OptimizeSuite.getQueryString=function(){return window.location.search},OptimizeSuite.getReferrer=function(){return document.referrer},getLastEventId=function(){return Cookie.get("bh-last-event-id")},clearLastEventId=function(){return Cookie.unset("bh-last-event-id")},setLastEventId=function(id){return Cookie.set("bh-last-event-id",id,15)},getLastPageId=function(){return Cookie.get("bh-last-page-id")},setLastPageId=function(id){return Cookie.set("bh-last-page-id",id,1800)},withConfigDefaults=function(config){var group,k,obj,out,v;out={tracking:{interval:3e3,endpoint:"/tracky",seed:null},referralMap:{},session:{cookieKey:null,cookieDomain:null,expiry:1800},page:{parentEventId:getLastEventId(),parentPageId:getLastPageId(),url:encodeURIComponent(window.location.href)},user:{userAgent:navigator.userAgent,browser:BrowserDetect.browser||"unknown",browserVersion:BrowserDetect.version||"unknown",os:BrowserDetect.OS||"unknown"},finch:{trackers:null,debug:!1,alwaysFirePixel:!0,config:null},bloodhound:{}};for(group in config){obj=config[group];for(k in obj)v=obj[k],out[group][k]=v}return out},initSanityCheck=function(){return OptimizeSuite.SanityCheck.on("failure",function(sc,data){return OptimizeSuite.Portal("sanity-check").add(sc.name,data),OptimizeSuite.TrackingHub.add("sanity-check-failure",_.extend({sanityCheck:sc.name},data))})},initFinch=function(config){var finchPortal;return Finch.debug=config.debug,Finch.alwaysFirePixel=config.alwaysFirePixel,config.trackers&&(Finch.Trackers=config.trackers),finchPortal=OptimizeSuite.Portal("finch"),Finch.on("guarded",function(experiment,guardName){return finchPortal.add("guarded",{layer:experiment.layer.name,experiment:experiment.name,guard:guardName})}),Finch.on("run",function(experiment){var experimentNames,experiments;if(finchPortal.add("run",{layer:experiment.layer.name,experiment:experiment.name}),experiments=TrackingHub.session.get("experiments")||[],experimentNames=_.pluck(experiments,"experiment"),_.indexOf(experimentNames,experiment.name)===-1){experiments.push({layer:experiment.layer.name,experiment:experiment.name,variant:experiment.variantName()});try{return TrackingHub.session.set("experiments",experiments)}catch(e){}}}),finchPortal.add("loaded",config.config),Finch.initialize(window,config.config),$(function(){return Finch.run()})},initErrorCatcher=function(){return ErrorCatcher.init(),ErrorCatcher.on("error",function(e){var errorData;return errorData=_.clone(e),delete errorData.timestamp,delete errorData.userAgent,OptimizeSuite.TrackingHub.add("uncaught-error",errorData)})},initTracky=function(config){return Tracky.endpoint=config.tracking.endpoint,Tracky.seed=config.tracking.seed},initReferral=function(referralMap){var getQueryValue,key,q,querystring,referral,referrer,referrerHost,searchTerm,val,_ref;referralMap==null&&(referralMap={}),referral=void 0,querystring=OptimizeSuite.getQueryString(),referrer=OptimizeSuite.getReferrer(),getQueryValue=function(str,key){var m;return(m=str.match(RegExp("[?&]"+key+"=([^&]+)")))?m[1]:void 0};for(key in referralMap)val=referralMap[key],(q=getQueryValue(querystring,key))&&(referral==null&&(referral={}),referral[val]=q);return referrer?(referrerHost=referrer.match(/^https?:\/\/([^\/]+)/)[1],window.location.host!==referrerHost&&(referral||(referral={source:"general"}),referral.url=referrer,searchTerm=function(){switch(referrerHost){case"www.google.com":return getQueryValue(referrer,"q");case"search.yahoo.com":return getQueryValue(referrer,"p");case"www.bing.com":return getQueryValue(referrer,"q")}}(),searchTerm&&(referral.searchTerm=searchTerm))):(referral==null&&(referral={}),(_ref=referral.source)==null&&(referral.source="direct")),referral},initTrackingHub=function(config){var hubData;return hubData={seed:config.tracking.seed,flushInterval:config.tracking.interval,session:config.session,page:config.page,user:config.user},hubData.session.referral=initReferral(config.referralMap),OptimizeSuite.TrackingHub.init(hubData),clearLastEventId(),setLastPageId(OptimizeSuite.TrackingHub.page.id)},addTrackingHubListeners=function(){return OptimizeSuite.TrackingHub.on("add",function(msg){return OptimizeSuite.Portal("tracking-hub").add("add",msg)}),OptimizeSuite.TrackingHub.on("flush",function(messages){var trackyData;return trackyData=_(messages).map(function(message){var data;return data=_.clone(message.data),data.event_name=message.name,data.event_client_timestamp=new Date(message.timestamp),data}),Tracky.log(trackyData),OptimizeSuite.Portal("tracking-hub").add("flush",messages)})},initBloodhound=function(config){var bloodhound;return OptimizeSuite.Bloodhound.Helpers.seed=config.tracking.seed,bloodhound=OptimizeSuite.bloodhound=new OptimizeSuite.Bloodhound(config.bloodhound),bloodhound.on("event",function(event){var d,data,w,_i,_len,_ref;for(data={type:"event",event:{id:event.id,type:event.type,widgets:[]}},event.meta&&(data.event.meta=event.meta),_ref=event.widgets,_i=0,_len=_ref.length;_len>_i;_i++)w=_ref[_i],d=w.data(),delete d.content,data.event.widgets.push(d);return event.type==="click"&&setLastEventId(event.id),OptimizeSuite.TrackingHub.add("bloodhound",data)}),bloodhound.on("impression",function(widgets){var data,w,_i,_len;for(data={type:"impression",widgets:[]},_i=0,_len=widgets.length;_len>_i;_i++)w=widgets[_i],data.widgets.push(w.data());return OptimizeSuite.TrackingHub.add("bloodhound",data)}),bloodhound.on("error",function(e){var data;return data={type:"error",error:e},OptimizeSuite.TrackingHub.add("bloodhound",data)})}}.call(this)})(),BOOMR_start=(new Date).getTime(),function(w){w.parent!=w&&document.getElementById("boomr-if-as")&&document.getElementById("boomr-if-as").nodeName.toLowerCase()=="script"&&(w=w.parent);var impl,boomr,k,d=w.document;if(w.BOOMR===void 0&&(w.BOOMR={}),BOOMR=w.BOOMR,!BOOMR.version){BOOMR.version="0.9.1-itier",BOOMR.window=w,impl={beacon_url:"",site_domain:w.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",events:{page_ready:[],page_unload:[],dom_loaded:[],visibility_changed:[],before_beacon:[],click:[]},vars:{},disabled_plugins:{},onclick_handler:function(ev){var target;ev||(ev=w.event),ev.target?target=ev.target:ev.srcElement&&(target=ev.srcElement),target.nodeType==3&&(target=target.parentNode),impl.fireEvent("click",target)},fireEvent:function(e_name,data){var i,h,e;if(!this.events.hasOwnProperty(e_name))return!1;for(e=this.events[e_name],i=0;e.length>i;i++)h=e[i],h[0].call(h[2],data,h[1]);return!0},addListener:function(el,sType,fn){el.addEventListener?el.addEventListener(sType,fn,!1):el.attachEvent&&el.attachEvent("on"+sType,fn)}},boomr={t_start:BOOMR_start,t_end:null,utils:{getCookie:function(name){if(!name)return null;name=" "+name+"=";var i,cookies;return cookies=" "+d.cookie+";",0>(i=cookies.indexOf(name))?null:(i+=name.length,cookies=cookies.substring(i,cookies.indexOf(";",i)))},setCookie:function(name,subcookies,max_age){var k,nameval,c,exp,value=[];if(!name)return!1;for(k in subcookies)subcookies.hasOwnProperty(k)&&value.push(encodeURIComponent(k)+"="+encodeURIComponent(subcookies[k]));return value=value.join("&"),nameval=name+"="+value,c=[nameval,"path=/","domain="+impl.site_domain],max_age&&(exp=new Date,exp.setTime(exp.getTime()+max_age*1e3),exp=exp.toGMTString(),c.push("expires="+exp)),4e3>nameval.length?(d.cookie=c.join("; "),value===this.getCookie(name)):!1},getSubCookies:function(cookie){var cookies_a,i,l,kv,cookies={};if(!cookie)return null;if(cookies_a=cookie.split("&"),cookies_a.length===0)return null;for(i=0,l=cookies_a.length;l>i;i++)kv=cookies_a[i].split("="),kv.push(""),cookies[decodeURIComponent(kv[0])]=decodeURIComponent(kv[1]);return cookies},removeCookie:function(name){return this.setCookie(name,{},0)},pluginConfig:function(o,config,plugin_name,properties){var i,props=0;if(!config||!config[plugin_name])return!1;for(i=0;properties.length>i;i++)config[plugin_name][properties[i]]!==void 0&&(o[properties[i]]=config[plugin_name][properties[i]],props++);return props>0}},init:function(config){var i,k,properties=["beacon_url","site_domain","user_ip"];for(config||(config={}),i=0;properties.length>i;i++)config[properties[i]]!==void 0&&(impl[properties[i]]=config[properties[i]]);config.log!==void 0&&(this.log=config.log),this.log||(this.log=function(m,l,s){});for(k in this.plugins)config[k]&&"enabled"in config[k]&&config[k].enabled===!1?impl.disabled_plugins[k]=1:(impl.disabled_plugins[k]&&delete impl.disabled_plugins[k],this.plugins.hasOwnProperty(k)&&typeof this.plugins[k].init=="function"&&this.plugins[k].init(config));"autorun"in config&&config.autorun===!1||("onpagehide"in w?impl.addListener(w,"pageshow",BOOMR.page_ready):impl.addListener(w,"load",BOOMR.page_ready)),impl.addListener(w,"DOMContentLoaded",function(){impl.fireEvent("dom_loaded")});var fire_visible=function(){impl.fireEvent("visibility_changed")};return d.webkitVisibilityState?impl.addListener(d,"webkitvisibilitychange",fire_visible):d.msVisibilityState?impl.addListener(d,"msvisibilitychange",fire_visible):d.visibilityState&&impl.addListener(d,"visibilitychange",fire_visible),impl.addListener(d,"mouseup",impl.onclick_handler),"onpagehide"in w||impl.addListener(w,"unload",function(){BOOMR.window=w=null}),this},page_ready:function(){return impl.fireEvent("page_ready"),this},subscribe:function(e_name,fn,cb_data,cb_scope){var i,h,e;if(!impl.events.hasOwnProperty(e_name))return this;for(e=impl.events[e_name],i=0;e.length>i;i++)if(h=e[i],h[0]===fn&&h[1]===cb_data&&h[2]===cb_scope)return this;if(e.push([fn,cb_data||{},cb_scope||null]),e_name==="page_unload"){var unload_handler=function(){fn&&fn.call(cb_scope,null,cb_data),fn=cb_scope=cb_data=null};"onpagehide"in w?impl.addListener(w,"pagehide",unload_handler):(impl.addListener(w,"unload",unload_handler),impl.addListener(w,"beforeunload",unload_handler))}return this},addVar:function(name,value){if(typeof name=="string")impl.vars[name]=value;else if(typeof name=="object"){var k,o=name;for(k in o)o.hasOwnProperty(k)&&(impl.vars[k]=o[k])}return this},getVar:function(){var i,params,vars;if(arguments.length){if(params=arguments.length===1&&Object.prototype.toString.apply(arguments[0])==="[object Array]"?arguments[0]:arguments,params.length>1)for(vars={},i=0;params.length>i;i++)impl.vars.hasOwnProperty(params[i])&&(vars[params[i]]=impl.vars[params[i]]);else vars=impl.vars[params[0]];return vars}},removeVar:function(){var i,params;if(!arguments.length)return this;for(params=arguments.length===1&&Object.prototype.toString.apply(arguments[0])==="[object Array]"?arguments[0]:arguments,i=0;params.length>i;i++)impl.vars.hasOwnProperty(params[i])&&delete impl.vars[params[i]];return this},sendBeacon:function(){var k,url,img,nparams=0;for(k in this.plugins)if(this.plugins.hasOwnProperty(k)){if(impl.disabled_plugins[k])continue;if(!this.plugins[k].is_complete())return this}if(impl.vars.v=BOOMR.version,impl.vars.u=d.URL.replace(/#.*/,""),w!=window&&(impl.vars["if"]=""),impl.fireEvent("before_beacon",impl.vars),!impl.beacon_url)return this;url=[];for(k in impl.vars)impl.vars.hasOwnProperty(k)&&(nparams++,url.push(encodeURIComponent(k)+"="+(impl.vars[k]===void 0||impl.vars[k]===null?"":encodeURIComponent(impl.vars[k]))));return url=impl.beacon_url+(impl.beacon_url.indexOf("?")>-1?"&":"?")+url.join("&"),nparams&&(img=new Image,img.src=url),this}},delete BOOMR_start;var make_logger=function(l){return function(m,s){return this.log(m,l,"boomerang"+(s?"."+s:"")),this}};boomr.debug=make_logger("debug"),boomr.info=make_logger("info"),boomr.warn=make_logger("warn"),boomr.error=make_logger("error"),w.YAHOO&&w.YAHOO.widget&&w.YAHOO.widget.Logger?boomr.log=w.YAHOO.log:w.Y!==void 0&&w.Y.log!==void 0?boomr.log=w.Y.log:typeof console!="undefined"&&console.log!==void 0&&(boomr.log=function(m,l,s){console.log(s+": ["+l+"] "+m)});for(k in boomr)boomr.hasOwnProperty(k)&&(BOOMR[k]=boomr[k]);BOOMR.plugins=BOOMR.plugins||{}}}(window),function(){BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{};var impl={complete:!1,done:function(){var m,w=BOOMR.window,p=w.performance,c=w.console,d=w.document,_f={}.toString.call(w.opera)=="[object Opera]"?d.querySelectorAll:d.getElementsByTagName,f=_f.call===void 0?function(tag){return _f(tag)}:_f;m=p&&p.memory?p.memory:c&&c.memory?c.memory:null,m&&BOOMR.addVar({"mem.total":m.totalJSHeapSize,"mem.used":m.usedJSHeapSize}),BOOMR.addVar({"dom.ln":f.call(d,"*").length,"dom.sz":f.call(d,"html")[0].innerHTML.length,"dom.img":f.call(d,"img").length,"dom.script":f.call(d,"script").length}),this.complete=!0,BOOMR.sendBeacon()}};BOOMR.plugins.Memory={init:function(){return BOOMR.subscribe("page_ready",impl.done,null,impl),this},is_complete:function(){return impl.complete}}}(),BOOMR.addVar("mob.ct",typeof navigator!="undefined"&&navigator.connection?navigator.connection.type:0),function(){BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{};var impl={complete:!1,done:function(){var p,pn,pt,data,w=BOOMR.window;p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance,p&&p.timing&&p.navigation&&(BOOMR.info("This user agent supports NavigationTiming.","nt"),pn=p.navigation,pt=p.timing,data={nt_red_cnt:pn.redirectCount,nt_nav_type:pn.type,nt_nav_st:pt.navigationStart,nt_red_st:pt.redirectStart,nt_red_end:pt.redirectEnd,nt_fet_st:pt.fetchStart,nt_dns_st:pt.domainLookupStart,nt_dns_end:pt.domainLookupEnd,nt_con_st:pt.connectStart,nt_con_end:pt.connectEnd,nt_req_st:pt.requestStart,nt_res_st:pt.responseStart,nt_res_end:pt.responseEnd,nt_domloading:pt.domLoading,nt_domint:pt.domInteractive,nt_domcontloaded_st:pt.domContentLoadedEventStart,nt_domcontloaded_end:pt.domContentLoadedEventEnd,nt_domcomp:pt.domComplete,nt_load_st:pt.loadEventStart,nt_load_end:pt.loadEventEnd,nt_unload_st:pt.unloadEventStart,nt_unload_end:pt.unloadEventEnd},pt.secureConnectionStart&&(data.nt_ssl_st=pt.secureConnectionStart),BOOMR.addVar(data)),w.chrome&&w.chrome.loadTimes&&(pt=w.chrome.loadTimes(),pt&&(data={nt_spdy:pt.wasFetchedViaSpdy?1:0,nt_first_paint:pt.firstPaintTime},BOOMR.addVar(data))),this.complete=!0,BOOMR.sendBeacon()}};BOOMR.plugins.NavigationTiming={init:function(){return BOOMR.subscribe("page_ready",impl.done,null,impl),this},is_complete:function(){return impl.complete}}}(),function(w){w.document,BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{};var impl={complete:!1,done:function(){BOOMR.addVar({viewport_x:$(window).width(),viewport_y:$(window).height(),device_x:w.screen.width,device_y:w.screen.height,document_x:$(document).width(),document_y:$(document).height()}),this.complete=!0,BOOMR.sendBeacon()}};BOOMR.plugins.viewport={init:function(config){return BOOMR.subscribe("page_ready",impl.done,null,impl),this},is_complete:function(){return impl.complete}}}(window),function(w){var d=w.document;BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{};var impl={complete:!1,timers:{},cookie:"RT",cookie_exp:600,strict_referrer:!0,navigationType:0,navigationStart:void 0,responseStart:void 0,t_start:void 0,r:void 0,r2:void 0,setCookie:function(){var t_end,t_start=(new Date).getTime();return this.cookie?BOOMR.utils.setCookie(this.cookie,{s:t_start,r:d.URL.replace(/#.*/,"")},this.cookie_exp)?(t_end=(new Date).getTime(),t_end-t_start>50&&(BOOMR.utils.removeCookie(this.cookie),BOOMR.error("took more than 50ms to set cookie... aborting: "+t_start+" -> "+t_end,"rt")),this):(BOOMR.error("cannot set start cookie","rt"),this):this},initFromCookie:function(){var subcookies;this.cookie&&(subcookies=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie)),subcookies&&subcookies.s&&subcookies.r&&(this.r=subcookies.r,this.strict_referrer&&this.r!==this.r2||(this.t_start=parseInt(subcookies.s,10))))},checkPreRender:function(){return d.webkitVisibilityState&&d.webkitVisibilityState==="prerender"||d.msVisibilityState&&d.msVisibilityState===3?(BOOMR.plugins.RT.startTimer("t_load",this.navigationStart),BOOMR.plugins.RT.endTimer("t_load"),BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart),BOOMR.plugins.RT.startTimer("t_postrender"),BOOMR.subscribe("visibility_changed",BOOMR.plugins.RT.done,null,BOOMR.plugins.RT),!0):!1},initNavTiming:function(){var ti,p,source;this.navigationStart||(p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance,p&&p.navigation&&(this.navigationType=p.navigation.type),p&&p.timing?ti=p.timing:w.chrome&&w.chrome.csi&&w.chrome.csi().startE?(ti={navigationStart:w.chrome.csi().startE},source="csi"):w.gtbExternal&&w.gtbExternal.startE()&&(ti={navigationStart:w.gtbExternal.startE()},source="gtb"),ti?(BOOMR.addVar("rt.start",source||"navigation"),this.navigationStart=ti.navigationStart||ti.fetchStart||void 0,this.responseStart=ti.responseStart||void 0,navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=ti.unloadEventStart||ti.fetchStart||void 0)):BOOMR.warn("This browser doesn't support the WebTiming API","rt"))},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")}};BOOMR.plugins.RT={init:function(config){return w!=BOOMR.window&&(w=BOOMR.window,d=w.document),BOOMR.utils.pluginConfig(impl,config,"RT",["cookie","cookie_exp","strict_referrer"]),impl.complete?this:(impl.complete=!1,impl.timers={},BOOMR.subscribe("page_ready",this.done,null,this),BOOMR.subscribe("dom_loaded",impl.domloaded,null,impl),BOOMR.subscribe("page_unload",impl.setCookie,null,impl),BOOMR.t_start&&(this.startTimer("boomerang",BOOMR.t_start),this.endTimer("boomerang",BOOMR.t_end),this.endTimer("boomr_fb",BOOMR.t_start)),impl.r=impl.r2=d.referrer.replace(/#.*/,""),impl.initFromCookie(),this)},startTimer:function(timer_name,time_value){return timer_name&&(timer_name==="t_page"&&this.endTimer("t_resp",time_value),impl.timers[timer_name]={start:typeof time_value=="number"?time_value:(new Date).getTime()},impl.complete=!1),this},endTimer:function(timer_name,time_value){return timer_name&&(impl.timers[timer_name]=impl.timers[timer_name]||{},"end"in impl.timers[timer_name]||(impl.timers[timer_name].end=typeof time_value=="number"?time_value:(new Date).getTime())),this},setTimer:function(timer_name,time_delta){return timer_name&&(impl.timers[timer_name]={delta:time_delta}),this},done:function(){var t_start,t_name,timer,t_done=(new Date).getTime(),basic_timers={t_done:1,t_resp:1,t_page:1},ntimers=0,t_other=[];if(impl.complete=!1,impl.initNavTiming(),impl.checkPreRender())return this;impl.responseStart?(this.endTimer("t_resp",impl.responseStart),impl.timers.t_load?this.setTimer("t_page",impl.timers.t_load.end-impl.responseStart):this.setTimer("t_page",t_done-impl.responseStart)):impl.timers.hasOwnProperty("t_page")&&this.endTimer("t_page"),impl.timers.hasOwnProperty("t_postrender")&&(this.endTimer("t_postrender"),this.endTimer("t_prerender")),impl.navigationStart?t_start=impl.navigationStart:impl.t_start&&impl.navigationType!==2?(t_start=impl.t_start,BOOMR.addVar("rt.start","cookie")):(BOOMR.addVar("rt.start","none"),t_start=void 0),this.endTimer("t_done",t_done),BOOMR.removeVar("t_done","t_page","t_resp","r","r2","rt.tstart","rt.bstart","rt.end","t_postrender","t_prerender","t_load"),BOOMR.addVar("rt.tstart",t_start),BOOMR.addVar("rt.bstart",BOOMR.t_start),BOOMR.addVar("rt.end",impl.timers.t_done.end);for(t_name in impl.timers)impl.timers.hasOwnProperty(t_name)&&(timer=impl.timers[t_name],typeof timer.delta!="number"&&(typeof timer.start!="number"&&(timer.start=t_start),timer.delta=timer.end-timer.start),isNaN(timer.delta)||(basic_timers.hasOwnProperty(t_name)?BOOMR.addVar(t_name,timer.delta):t_other.push(t_name+"|"+timer.delta),ntimers++));return ntimers&&(BOOMR.addVar("r",impl.r),impl.r2!==impl.r&&BOOMR.addVar("r2",impl.r2),t_other.length&&BOOMR.addVar("t_other",t_other.join(","))),impl.timers={},impl.complete=!0,BOOMR.sendBeacon(),this},is_complete:function(){return impl.complete}}}(window),BOOMR.init({user_ip:Cookie.get("b"),beacon_url:"/analytic/view.gif",BW:{enabled:!1},DNS:{enabled:!1}}),BOOMR.t_lstart&&BOOMR.addVar("t_lstart",BOOMR.t_lstart),BOOMR.subscribe("before_beacon",function(o){var pageData=OptimizeSuite.TrackingHub.page.data();BOOMR.addVar("page_channel",pageData.channel||""),BOOMR.addVar("page_country",pageData.country||""),BOOMR.addVar("page_division",pageData.division||""),BOOMR.addVar("page_type",pageData.type||""),OptimizeSuite.TrackingHub.add("performance",{performance:o})}),BOOMR.t_end=(new Date).getTime(),BOOMR.addVar("t_lend",BOOMR.t_end),function(){function eq(a,b,stack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped),a.isEqual&&_.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&_.isFunction(b.isEqual))return b.isEqual(a);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==b+"";case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var length=stack.length;while(length--)if(stack[length]==a)return!0;stack.push(a);var size=0,result=!0;if(className=="[object Array]"){if(size=a.length,result=size==b.length)while(size--)if(!(result=size in a==size in b&&eq(a[size],b[size],stack)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var key in a)if(_.has(a,key)&&(size++,!(result=_.has(b,key)&&eq(a[key],b[key],stack))))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return stack.pop(),result}var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return new wrapper(obj)};typeof exports!="undefined"?(module!==void 0&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.3.3";var each=_.each=_.forEach=function(obj,iterator,context){if(obj!=null)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,l=obj.length;l>i;i++)if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return}else for(var key in obj)if(_.has(obj,key)&&iterator.call(context,obj[key],key,obj)===breaker)return};_.map=_.collect=function(obj,iterator,context){var results=[];return obj==null?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)}),obj.length===+obj.length&&(results.length=obj.length),results)},_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);if(each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)}),!initial)throw new TypeError("Reduce of empty array with no initial value");return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null&&(obj=[]),nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var reversed=_.toArray(obj).reverse();return context&&!initial&&(iterator=_.bind(iterator,context)),initial?_.reduce(reversed,iterator,memo,context):_.reduce(reversed,iterator)},_.find=_.detect=function(obj,iterator,context){var result;return any(obj,function(value,index,list){return iterator.call(context,value,index,list)?(result=value,!0):void 0}),result},_.filter=_.select=function(obj,iterator,context){var results=[];return obj==null?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(iterator,context):(each(obj,function(value,index,list){iterator.call(context,value,index,list)&&(results[results.length]=value)}),results)},_.reject=function(obj,iterator,context){var results=[];return obj==null?results:(each(obj,function(value,index,list){iterator.call(context,value,index,list)||(results[results.length]=value)}),results)},_.every=_.all=function(obj,iterator,context){var result=!0;return obj==null?result:nativeEvery&&obj.every===nativeEvery?obj.every(iterator,context):(each(obj,function(value,index,list){return(result=result&&iterator.call(context,value,index,list))?void 0:breaker}),!!result)};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!1;return obj==null?result:nativeSome&&obj.some===nativeSome?obj.some(iterator,context):(each(obj,function(value,index,list){return result||(result=iterator.call(context,value,index,list))?breaker:void 0}),!!result)};_.include=_.contains=function(obj,target){var found=!1;return obj==null?found:nativeIndexOf&&obj.indexOf===nativeIndexOf?obj.indexOf(target)!=-1:found=any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(_.isFunction(method)?method||value:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})}),result.value},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;
// result.computed>computed&&(result={value:value,computed:computed})}),result.value},_.shuffle=function(obj){var rand,shuffled=[];return each(obj,function(value,index,list){rand=Math.floor(Math.random()*(index+1)),shuffled[index]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sortBy=function(obj,val,context){var iterator=_.isFunction(val)?val:function(obj){return obj[val]};return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;return a===void 0?1:b===void 0?-1:b>a?-1:a>b?1:0}),"value")},_.groupBy=function(obj,val){var result={},iterator=_.isFunction(val)?val:function(obj){return obj[val]};return each(obj,function(value,index){var key=iterator(value,index);(result[key]||(result[key]=[])).push(value)}),result},_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);var low=0,high=array.length;while(high>low){var mid=low+high>>1;iterator(obj)>iterator(array[mid])?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):_.isArguments(obj)?slice.call(obj):obj.toArray&&_.isFunction(obj.toArray)?obj.toArray():_.values(obj):[]},_.size=function(obj){return _.isArray(obj)?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){return n==null||guard?array[0]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))},_.last=function(array,n,guard){return n==null||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=function(array,index,guard){return slice.call(array,index==null||guard?1:index)},_.compact=function(array){return _.filter(array,function(value){return!!value})},_.flatten=function(array,shallow){return _.reduce(array,function(memo,value){return _.isArray(value)?memo.concat(shallow?value:_.flatten(value)):(memo[memo.length]=value,memo)},[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iterator){var initial=iterator?_.map(array,iterator):array,results=[];return 3>array.length&&(isSorted=!0),_.reduce(initial,function(memo,value,index){return(isSorted?_.last(memo)===value&&memo.length:_.include(memo,value))||(memo.push(value),results.push(array[index])),memo},[]),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})},_.difference=function(array){var rest=_.flatten(slice.call(arguments,1),!0);return _.filter(array,function(value){return!_.include(rest,value)})},_.zip=function(){for(var args=slice.call(arguments),length=_.max(_.pluck(args,"length")),results=Array(length),i=0;length>i;i++)results[i]=_.pluck(args,""+i);return results},_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i,l;if(isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;l>i;i++)if(i in array&&array[i]===item)return i;return-1},_.lastIndexOf=function(array,item){if(array==null)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);var i=array.length;while(i--)if(i in array&&array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length>1||(stop=start||0,start=0),step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=Array(len);while(len>idx)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var bound,args;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor,result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);return funcs.length==0&&(funcs=_.functions(obj)),each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait){var context,args,timeout,throttling,more,result,whenDone=_.debounce(function(){more=throttling=!1},wait);return function(){context=this,args=arguments;var later=function(){timeout=null,more&&func.apply(context,args),whenDone()};return timeout||(timeout=setTimeout(later,wait)),throttling?more=!0:result=func.apply(context,args),whenDone(),throttling=!0,result}},_.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)};immediate&&!timeout&&func.apply(context,args),clearTimeout(timeout),timeout=setTimeout(later,wait)}},_.once=function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments))}},_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments,0));return wrapper.apply(this,args)}},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return times>0?function(){return 1>--times?func.apply(this,arguments):void 0}:func()},_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)_.has(obj,key)&&(keys[keys.length]=key);return keys},_.values=function(obj){return _.map(obj,_.identity)},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var result={};return each(_.flatten(slice.call(arguments,1)),function(key){key in obj&&(result[key]=obj[key])}),result},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)obj[prop]==null&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj},_.isEqual=function(a,b){return eq(a,b,[])},_.isEmpty=function(obj){if(obj==null)return!0;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return obj&&obj.nodeType==1},_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"},_.isObject=function(obj){return obj===Object(obj)},_.isArguments=function(obj){return toString.call(obj)=="[object Arguments]"},_.isArguments(arguments)||(_.isArguments=function(obj){return obj&&_.has(obj,"callee")}),_.isFunction=function(obj){return toString.call(obj)=="[object Function]"},_.isString=function(obj){return toString.call(obj)=="[object String]"},_.isNumber=function(obj){return toString.call(obj)=="[object Number]"},_.isFinite=function(obj){return _.isNumber(obj)&&isFinite(obj)},_.isNaN=function(obj){return obj!==obj},_.isBoolean=function(obj){return obj===!0||obj===!1||toString.call(obj)=="[object Boolean]"},_.isDate=function(obj){return toString.call(obj)=="[object Date]"},_.isRegExp=function(obj){return toString.call(obj)=="[object RegExp]"},_.isNull=function(obj){return obj===null},_.isUndefined=function(obj){return obj===void 0},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.times=function(n,iterator,context){for(var i=0;n>i;i++)iterator.call(context,i)},_.escape=function(string){return(""+string).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},_.result=function(object,property){if(object==null)return null;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name])})};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/.^/,escapes={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var p in escapes)escapes[escapes[p]]=p;var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g,unescaper=/\\(\\|'|r|n|t|u2028|u2029)/g,unescape=function(code){return code.replace(unescaper,function(match,escape){return escapes[escape]})};_.template=function(text,data,settings){settings=_.defaults(settings||{},_.templateSettings);var source="__p+='"+text.replace(escaper,function(match){return"\\"+escapes[match]}).replace(settings.escape||noMatch,function(match,code){return"'+\n_.escape("+unescape(code)+")+\n'"}).replace(settings.interpolate||noMatch,function(match,code){return"'+\n("+unescape(code)+")+\n'"}).replace(settings.evaluate||noMatch,function(match,code){return"';\n"+unescape(code)+"\n;__p+='"})+"';\n";settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+source+"return __p;\n";var render=Function(settings.variable||"obj","_",source);if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var wrapper=function(obj){this._wrapped=obj};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj},addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);return unshift.call(args,this._wrapped),result(func.apply(_,args),this._chain)}};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){var wrapped=this._wrapped;method.apply(wrapped,arguments);var length=wrapped.length;return name!="shift"&&name!="splice"||length!==0||delete wrapped[0],result(wrapped,this._chain)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain)}}),wrapper.prototype.chain=function(){return this._chain=!0,this},wrapper.prototype.value=function(){return this._wrapped}}.call(this);var I18n=I18n||{},module=module||{};module.exports=I18n,I18n.defaultLocale="en_us",I18n.fallbacks=!1,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.isValidNode=function(obj,node,undefined){return obj[node]!==null&&obj[node]!==undefined},I18n.lookup=function(scope,options){var currentScope,options=options||{},lookupInitialScope=scope,translations=this.prepareOptions(I18n.translations),messages=translations[options.locale||I18n.currentLocale()],options=this.prepareOptions(options);if(messages){typeof scope=="object"&&(scope=scope.join(this.defaultSeparator)),options.scope&&(scope=options.scope+""+this.defaultSeparator+scope),scope=scope.split(this.defaultSeparator);while(scope.length>0)if(currentScope=scope.shift(),messages=messages[currentScope],!messages){I18n.fallbacks&&!options.fallback&&(messages=I18n.lookup(lookupInitialScope,this.prepareOptions({locale:I18n.defaultLocale,fallback:!0},options)));break}return!messages&&this.isValidNode(options,"defaultValue")&&(messages=options.defaultValue),messages}},I18n.prepareOptions=function(){for(var opts,options={},count=arguments.length,i=0;count>i;i++)if(opts=arguments[i])for(var key in opts)this.isValidNode(options,key)||(options[key]=opts[key]);return options},I18n.interpolate=function(message,options){options=this.prepareOptions(options);var placeholder,value,name,matches=message.match(this.PLACEHOLDER);if(!matches)return message;for(var i=0;placeholder=matches[i];i++)name=placeholder.replace(this.PLACEHOLDER,"$1"),value=options[name],this.isValidNode(options,name)||(value="[missing "+placeholder+" value]"),regex=RegExp(placeholder.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),message=message.replace(regex,value);return message},I18n.translate=function(scope,options){options=this.prepareOptions(options);var translation=this.lookup(scope,options);try{return typeof translation=="object"?typeof options.count=="number"?this.pluralize(options.count,scope,options):translation:this.interpolate(translation,options)}catch(err){return this.missingTranslation(scope)}},I18n.localize=function(scope,value){switch(scope){case"currency":return this.toCurrency(value);case"number":return scope=this.lookup("number.format"),this.toNumber(value,scope);case"percentage":return this.toPercentage(value);default:return scope.match(/^(date|time)/)?this.toTime(scope,value):value+""}},I18n.parseDate=function(date){var matches,convertedDate;if(typeof date=="object")return date;if(matches=(date+"").match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/)){for(var i=1;6>=i;i++)matches[i]=parseInt(matches[i],10)||0;matches[2]-=1,convertedDate=matches[7]?new Date(Date.UTC(matches[1],matches[2],matches[3],matches[4],matches[5],matches[6])):new Date(matches[1],matches[2],matches[3],matches[4],matches[5],matches[6])}else typeof date=="number"?(convertedDate=new Date,convertedDate.setTime(date)):date.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(convertedDate=new Date,convertedDate.setTime(Date.parse(date))):(convertedDate=new Date,convertedDate.setTime(Date.parse(date)));return convertedDate},I18n.toTime=function(scope,d){var date=this.parseDate(d),format=this.lookup(scope);return(date+"").match(/invalid/i)?date+"":format?this.strftime(date,format):date+""},I18n.strftime=function(date,format){var options=this.lookup("date");if(!options)return date+"";options.meridian=options.meridian||["AM","PM"];var weekDay=date.getDay(),day=date.getDate(),year=date.getFullYear(),month=date.getMonth()+1,hour=date.getHours(),hour12=hour,meridian=hour>11?1:0,secs=date.getSeconds(),mins=date.getMinutes(),offset=date.getTimezoneOffset(),absOffsetHours=Math.floor(Math.abs(offset/60)),absOffsetMinutes=Math.abs(offset)-absOffsetHours*60,timezoneoffset=(offset>0?"-":"+")+(2>(absOffsetHours+"").length?"0"+absOffsetHours:absOffsetHours)+(2>(absOffsetMinutes+"").length?"0"+absOffsetMinutes:absOffsetMinutes);hour12>12?hour12-=12:hour12===0&&(hour12=12);var padding=function(n){var s="0"+(n+"");return s.substr(s.length-2)},f=format;return f=f.replace("%a",options.abbr_day_names[weekDay]),f=f.replace("%A",options.day_names[weekDay]),f=f.replace("%b",options.abbr_month_names[month]),f=f.replace("%B",options.month_names[month]),f=f.replace("%d",padding(day)),f=f.replace("%e",day),f=f.replace("%-d",day),f=f.replace("%H",padding(hour)),f=f.replace("%-H",hour),f=f.replace("%I",padding(hour12)),f=f.replace("%-I",hour12),f=f.replace("%m",padding(month)),f=f.replace("%-m",month),f=f.replace("%M",padding(mins)),f=f.replace("%-M",mins),f=f.replace("%p",options.meridian[meridian]),f=f.replace("%S",padding(secs)),f=f.replace("%-S",secs),f=f.replace("%w",weekDay),f=f.replace("%y",padding(year)),f=f.replace("%-y",padding(year).replace(/^0+/,"")),f=f.replace("%Y",year),f=f.replace("%z",timezoneoffset)},I18n.toNumber=function(number,options){options=this.prepareOptions(options,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var precision,formattedNumber,negative=0>number,string=Math.abs(number).toFixed(options.precision)+"",parts=string.split("."),buffer=[];number=parts[0],precision=parts[1];while(number.length>0)buffer.unshift(number.substr(Math.max(0,number.length-3),3)),number=number.substr(0,number.length-3);if(formattedNumber=buffer.join(options.delimiter),options.precision>0&&(formattedNumber+=options.separator+parts[1]),negative&&(formattedNumber="-"+formattedNumber),options.strip_insignificant_zeros){var regex={separator:RegExp(options.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};formattedNumber=formattedNumber.replace(regex.zeros,"").replace(regex.separator,"")}return formattedNumber},I18n.toCurrency=function(number,options){return options=this.prepareOptions(options,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),number=this.toNumber(number,options),number=options.format.replace("%u",options.unit).replace("%n",number)},I18n.toHumanSize=function(number,options){var unit,precision,kb=1024,size=number,iterations=0;while(size>=kb&&4>iterations)size/=kb,iterations+=1;return iterations===0?(unit=this.t("number.human.storage_units.units.byte",{count:size}),precision=0):(unit=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][iterations]),precision=size-Math.floor(size)===0?0:1),options=this.prepareOptions(options,{precision:precision,format:"%n%u",delimiter:""}),number=this.toNumber(size,options),number=options.format.replace("%u",unit).replace("%n",number)},I18n.toPercentage=function(number,options){return options=this.prepareOptions(options,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),number=this.toNumber(number,options),number+"%"},I18n.pluralize=function(count,scope,options){var translation;try{translation=this.lookup(scope,options)}catch(error){}if(!translation)return this.missingTranslation(scope);var message;switch(options=this.prepareOptions(options),options.count=count+"",Math.abs(count)){case 0:message=this.isValidNode(translation,"zero")?translation.zero:this.isValidNode(translation,"none")?translation.none:this.isValidNode(translation,"other")?translation.other:this.missingTranslation(scope,"zero");break;case 1:message=this.isValidNode(translation,"one")?translation.one:this.missingTranslation(scope,"one");break;default:message=this.isValidNode(translation,"other")?translation.other:this.missingTranslation(scope,"other")}return this.interpolate(message,options)},I18n.missingTranslation=function(){for(var message='[missing "'+this.currentLocale(),count=arguments.length,i=0;count>i;i++)message+="."+arguments[i];return message+='" translation]'},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize,window.Groupon=window.Groupon||{},Groupon.FacebookConnect=function(){function getSessionCreationUrl(){var protocol;return protocol=Groupon.sslEnabled?"https://":"http://",protocol+window.location.host+"/facebook_session"}function submitFormData(url,params){var form=$("<form class='form_submitter'></form>").attr({method:"POST",action:url});$.each(params,function(key,value){$("<input type='hidden'>").attr({name:key,value:value}).appendTo(form)}),form.appendTo($("body")),form.submit()}function submitSessionCreationRequestViaHttpPost(params){params=params||{},_request_url&&(params.request_url=_request_url),params.facebook_login=!0,Groupon.FacebookConnect.submitFormData(sessionCreationUrl,params)}function submitSessionCreationRequestViaAjax(params){params=params||{},_request_url&&(params.request_url=_request_url),params.facebook_login=!0,$.ajax({url:sessionCreationUrl,type:"POST",data:params,dataType:"json",success:function(response){Groupon.FacebookConnect.onFacebookSessionCreateSuccess(response)},error:function(response){Groupon.FacebookConnect.onFacebookSessionCreateFailure()}})}function postToFacebookConnect(){Groupon.Application&&Groupon.Application.isSSL&&Groupon.Application.isSSL()?submitSessionCreationRequestViaAjax():submitSessionCreationRequestViaHttpPost()}function onFacebookSessionCreateSuccess(sessionCreationResponse){if(PubSub.publish("facebook_connect.events.on_facebook_session_create_success",sessionCreationResponse),sessionCreationResponse.confirmEmail)this.Modals.Ajax.confirmEmailAddress(sessionCreationResponse.confirmEmail);else if(sessionCreationResponse.specifyAccount)this.Modals.Ajax.linkToExistingAccount();else if(sessionCreationResponse.passwordFailure)PubSub.publish("facebook_connect.errors.invalid_password","Incorrect email/password combination.");else if(sessionCreationResponse.facebookUserIsDeleted)addAlert("error",sessionCreationResponse.errorMessage);else if(sessionCreationResponse.location){var loc=sessionCreationResponse.location.split("#")[0];typeof _onConnectCallback=="function"?_onConnectCallback(function(){Groupon.Application.redirectTo(loc)}):Groupon.Application.redirectTo(loc)}else typeof _onConnectCallback=="function"?_onConnectCallback(function(){Groupon.Application.reloadPage()}):Groupon.Application.reloadPage()}function onFacebookSessionCreateFailure(){addAlert("error","There was a problem with Facebook login. Please try again later.");for(var i=0;_onFacebookSessionCreateFailure.length>i;++i)_onFacebookSessionCreateFailure[i]()}function bindOnFacebookSessionCreateFailure(func){_onFacebookSessionCreateFailure.push(func)}function onConnect(request_url,callback){_request_url=request_url||Groupon.FacebookConnect.locationHref(),_onConnectCallback=callback,postToFacebookConnect()}function loginWithOnlyFacebookCredentialsViaAjax(){this.submitSessionCreationRequestViaAjax({no_groupon_credentials:!0})}function loginWithOnlyFacebookCredentialsViaHttpPost(){this.submitSessionCreationRequestViaHttpPost({no_groupon_credentials:!0})}var _request_url=null,_onConnectCallback=null,sessionCreationUrl=getSessionCreationUrl(),_onFacebookSessionCreateFailure=[],locationHref=function(){return window.location.href};return{getSessionCreationUrl:getSessionCreationUrl,onConnect:onConnect,submitFormData:submitFormData,postToFacebookConnect:postToFacebookConnect,loginWithOnlyFacebookCredentialsViaAjax:loginWithOnlyFacebookCredentialsViaAjax,loginWithOnlyFacebookCredentialsViaHttpPost:loginWithOnlyFacebookCredentialsViaHttpPost,submitSessionCreationRequestViaAjax:submitSessionCreationRequestViaAjax,submitSessionCreationRequestViaHttpPost:submitSessionCreationRequestViaHttpPost,onFacebookSessionCreateSuccess:onFacebookSessionCreateSuccess,onFacebookSessionCreateFailure:onFacebookSessionCreateFailure,bindOnFacebookSessionCreateFailure:bindOnFacebookSessionCreateFailure,locationHref:locationHref}}(),Groupon.FacebookConnect.LinkToGrouponAccount=function(modal){function bindSubmitButton(onSuccess){$("#modal_window_confirm input[type='submit']").click(function(e){if(e.preventDefault(),$(this).attr("disabled","true"),onSuccess!==void 0){var data={facebook_login:!0},$email=$("#modal_window_confirm input[name='email']"),$password=$("#modal_window_confirm input[name='password']"),$confirm_linking=$("#modal_window_confirm input[name='confirm_linking']");$email&&(data.email=$email.val()),$password&&(data.password=$password.val()),$confirm_linking&&(data.confirm_linking=$confirm_linking.val()),onSuccess(data)}}),PubSub.subscribe("facebook_connect.events.on_facebook_session_create_success",function(){$("#modal_window_confirm input[type='submit']").removeAttr("disabled")})}function bindCancelButton(onCancel){$("#cancel").click(function(){onCancel!==void 0&&onCancel(),Control.Modal.close()})}function showDialog(){$(".facebook_login_button").removeClass("loading"),Control.Modal.close(),Control.Modal.open("#modal_window_confirm",{fade:!0,afterClose:function(){this.destroy()}})}function retrieveDialog(responseText,settings){$(document.body).insert(responseText),bindSubmitButton(settings.success),bindCancelButton(settings.cancel),showDialog()}function displayModal(url,settings){settings===void 0&&(settings={}),Control.Modal.close(),$("#modal_window_confirm").length===0?$.ajax({url:url,data:settings.data||{},dataType:"html",success:function(responseText){retrieveDialog(responseText,settings)}}):showDialog()}return{display:displayModal}}(),Groupon.FacebookConnect.Modals=function(){function retrySubmissionHttpPost(form_fields){Groupon.FacebookConnect.submitSessionCreationRequestViaHttpPost(form_fields)}function linkToExistingAccount(settings){Groupon.FacebookConnect.LinkToGrouponAccount.display("/users/link_to_groupon_account_modal",settings)}function confirmEmailAddress(email,settings){var fullSettings=$.extend(settings,{data:{email_address:email}});Groupon.FacebookConnect.LinkToGrouponAccount.display("/users/confirm_password_modal",fullSettings)}function linkToExistingAccountHttpPost(){linkToExistingAccount({success:_.bind(retrySubmissionHttpPost,this),cancel:_.bind(Groupon.FacebookConnect.loginWithOnlyFacebookCredentialsViaHttpPost,Groupon.FacebookConnect)})}function confirmEmailAddressHttpPost(email){confirmEmailAddress(email,{success:_.bind(retrySubmissionHttpPost,this)})}function linkToExistingAccountAjax(){linkToExistingAccount({success:_.bind(Groupon.FacebookConnect.submitSessionCreationRequestViaAjax,Groupon.FacebookConnect),cancel:_.bind(Groupon.FacebookConnect.loginWithOnlyFacebookCredentialsViaAjax,Groupon.FacebookConnect)})}function confirmEmailAddressAjax(email){confirmEmailAddress(email,{success:function(form_fields){Groupon.FacebookConnect.submitSessionCreationRequestViaAjax(form_fields)}})}return{HttpPost:{linkToExistingAccount:linkToExistingAccountHttpPost,confirmEmailAddress:confirmEmailAddressHttpPost},Ajax:{linkToExistingAccount:linkToExistingAccountAjax,confirmEmailAddress:confirmEmailAddressAjax}}}(),function(){Groupon.Facebook={_errorCallback:function(code,callback){var err;return err={error:{code:code,message:I18n.translate(code)}},Groupon.Facebook.errors.push(err),callback(err)},_fbAsyncInitCalled:!1,_fbAsyncInitCallbacks:[],_fbAsyncInit:function(){var cb,_i,_len,_ref,_results;for(_ref=Groupon.Facebook._fbAsyncInitCallbacks,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)cb=_ref[_i],_results.push(cb());return _results},_fbReadyCalled:!1,_fbReadyCallbacks:[],_fbReady:function(){var cb,_i,_len,_ref;for(Groupon.Facebook._fbReadyCalled=!0,_ref=Groupon.Facebook._fbReadyCallbacks,_i=0,_len=_ref.length;_len>_i;_i++)cb=_ref[_i],cb();return $("#fb-root").trigger("facebook:loaded"),Groupon.Facebook.facebookReady=!0,$.event.trigger("facebookReady")},config:{},responses:[],errors:[],init:function(){var _this=this;return Groupon.Facebook.onFbAsyncInit(function(){return FB.init({appId:Groupon.Facebook.config.app_id,status:!0,cookie:!0,xfbml:!0,channelUrl:""+window.location.protocol+"//"+window.location.host+"/js/facebook/xd_receiver.html"}),FB.getLoginStatus(function(res){return Groupon.Facebook.responses.push(res),Groupon.Facebook._fbReady()}),Groupon.Facebook.getLoginStatus(function(res){return res.error?void 0:$("#rail_list .facebook_widget").slideUp()}),_this.extendAccessToken(),_this.trackLikes()}),this.loadSDK(),this.onReady(function(){return _this.bindEventListeners()})},bindEventListeners:function(){var throttledLogin;return throttledLogin=_.throttle(Groupon.Facebook.loginToGroupon,2e3),$(".fb-connect-button").bind("click",function(){var $el;return $el=$(this),throttledLogin({permissions:$el.attr("data-permissions"),redirect:$el.attr("data-redirect")})})},trackLikes:function(){return FB.Event.subscribe("edge.create",function(href,widget){})},onFbAsyncInit:function(cb){return Groupon.Facebook._fbAsyncInitCalled?cb():Groupon.Facebook._fbAsyncInitCallbacks.push(cb)},isReady:function(){return Groupon.Facebook._fbReadyCalled},onReady:function(cb){return Groupon.Facebook._fbReadyCalled?cb():Groupon.Facebook._fbReadyCallbacks.push(cb)},setConfig:function(config){return this.config.app_id=config.app_id||this.config.app_id,this.config.perms=config.perms||this.config.perms,this.config.og_namespace=config.og_namespace||this.config.og_namespace,this.config.auto_logout=config.auto_logout||this.config.auto_logout,this.config.locale=config.locale||this.config.locale||"en_US"},loadSDK:function(){return window.fbAsyncInit=Groupon.Facebook._fbAsyncInit,function(d){var id,js,ref;return id="facebook-jssdk",ref=d.getElementById(id),js=d.createElement("script"),js.id=id,js.async=!0,js.src="//connect.facebook.net/"+Groupon.Facebook.config.locale+"/all.js",ref.parentNode.insertBefore(js,ref)}(document)},isComingFromAppCenterOrAuthenticatedReferrals:function(){return window.location.search.match(RegExp("medium=app_center"))!=null||window.location.href.match(RegExp("access_token="))!=null},attemptAutoLogin:function(callback){return this.onReady(function(){return FB.getLoginStatus(function(res){return Groupon.Facebook.responses.push(res),(res!=null?res.status:void 0)==="connected"?Groupon.Facebook.config.auto_logout===!0?(FB.logout(),void 0):Groupon.Facebook.isComingFromAppCenterOrAuthenticatedReferrals()?Groupon.Facebook.callApi("me"):(typeof callback=="function"&&callback(res),Groupon.FacebookConnect.onConnect()):void 0})})},extendAccessToken:function(cb){var req,_ref,_ref1;return res.status==="connected"&&((_ref=Groupon.currentUser)!=null?_ref.facebookUid:void 0)!=null===((_ref1=res.authResponse)!=null?_ref1.userID:void 0)&&2592e3>res.authResponse.expiresIn?void 0:(req=$.post("/open_graph/extend_access_token",res.authResponse,function(res){return Groupon.Facebook.responses.push(res),res.result==="ok"?typeof cb=="function"?cb(null,res):void 0:typeof cb=="function"?cb(res.error!=null?res.error:"error",res):void 0}),req.error(function(err){return Groupon.Facebook.errors.push(err),typeof cb=="function"?cb(err):void 0}))},callApi:function(path,callback){return FB.api(path,function(me_res){return Groupon.Facebook.responses.push(me_res),(me_res!=null?me_res.first_name:void 0)!=null?(typeof callback=="function"&&callback(me_res),Groupon.FacebookConnect.onConnect("/")):void 0})},loginToGroupon:function(options){var permissions;return permissions=(options!=null?options.permissions:void 0)||Groupon.Facebook.config.perms,Groupon.Facebook.login(permissions,function(res){return(res!=null?res.status:void 0)==="connected"?((options!=null?options.onSuccess:void 0)||$(".facebook_login_button").addClass("loading"),Groupon.FacebookConnect.onConnect(options!=null?options.redirect:void 0,options!=null?options.onSuccess:void 0)):void 0})},login:function(permissions,callback){return typeof permissions=="function"&&(callback=permissions,permissions=null),permissions||(permissions=Groupon.Facebook.config.perms),FB.login(callback,{scope:permissions})},getLoginStatus:function(callback){var _ref,_ref1;return((_ref=Groupon.currentUser)!=null?_ref.isAuthenticated:0)?((_ref1=Groupon.currentUser)!=null?_ref1.facebookUid:void 0)?FB.getLoginStatus(function(res){var _ref2;return Groupon.Facebook.responses.push(res),(res!=null?res.status:void 0)==="connected"?((_ref2=res.authResponse)!=null?_ref2.userID:void 0)!==Groupon.currentUser.facebookUid?Groupon.Facebook._errorCallback("js.facebook.user_mismatch",callback):callback(res):Groupon.Facebook._errorCallback("js.facebook.unauthorized",callback)}):Groupon.Facebook._errorCallback("js.facebook.not_linked",callback):Groupon.Facebook._errorCallback("js.facebook.logged_out",callback)},api:function(path,callback,timeout){var cbCalled;return timeout==null&&(timeout=3e4),cbCalled=!1,callback==null&&(callback=function(){}),Groupon.Facebook.getLoginStatus(function(res){return Groupon.Facebook.responses.push(res),cbCalled?void 0:res.error?(cbCalled=!0,callback(res)):FB.api(path,function(res){return Groupon.Facebook.responses.push(res),cbCalled?void 0:(cbCalled=!0,callback(res))})}),setTimeout(function(){return cbCalled?void 0:(cbCalled=!0,Groupon.Facebook._errorCallback("js.facebook.timeout",callback))
// },timeout)},prefillLandingPage:function(){return Groupon.Facebook.onReady(function(){return FB.getLoginStatus(function(res){return Facebook.responses.push(res),(res!=null?res.status:void 0)!=="connected"?FB.api({method:"fql.query",query:"SELECT email FROM user where uid=me()"},function(res){var email,_ref;return Facebook.responses.push(res),email=res!=null?(_ref=res[0])!=null?_ref.email:void 0:void 0,email?$("#subscription_email_address").val(email):void 0}):void 0})})},fetchEmailForCurrentSession:function(cb){return Groupon.Facebook.onReady(function(){return FB.getLoginStatus(function(res){return Facebook.responses.push(res),(res!=null?res.status:void 0)!=="connected"?FB.api({method:"fql.query",query:"SELECT email FROM user where uid=me()"},function(res){var email,_ref;return Facebook.responses.push(res),email=res!=null?(_ref=res[0])!=null?_ref.email:void 0:void 0,email?cb(email):void 0}):void 0})})},userId:function(){try{return FB.getAuthResponse().userID}catch(err){return null}},getMyPages:function(callback){return FB.api("/me/accounts",callback)}},$(document).ready(function(){return $("body").append('<div id="facebook-jssdk"></div><div id="fb-root"></div>'),Groupon.Facebook.setConfig({app_id:"7829106395",perms:"email,user_birthday,user_likes,user_location,user_checkins,publish_actions,publish_stream,offline_access,user_status",og_namespace:"groupondev",auto_logout:!1,locale:"en_US"})})}.call(this),function(){var Backbone,root=this,previousBackbone=root.Backbone,slice=Array.prototype.slice,splice=Array.prototype.splice;Backbone=typeof exports!="undefined"?exports:root.Backbone={},Backbone.VERSION="0.9.2";var _=root._;_||typeof require=="undefined"||(_=require("underscore"));var $=root.jQuery||root.Zepto||root.ender;Backbone.setDomLibrary=function(lib){$=lib},Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var eventSplitter=/\s+/,Events=Backbone.Events={on:function(events,callback,context){var calls,event,node,tail,list;if(!callback)return this;events=events.split(eventSplitter),calls=this._callbacks||(this._callbacks={});while(event=events.shift())list=calls[event],node=list?list.tail:{},node.next=tail={},node.context=context,node.callback=callback,calls[event]={tail:tail,next:list?list.next:node};return this},off:function(events,callback,context){var event,calls,node,tail,cb,ctx;if(calls=this._callbacks){if(!(events||callback||context))return delete this._callbacks,this;events=events?events.split(eventSplitter):_.keys(calls);while(event=events.shift())if(node=calls[event],delete calls[event],node&&(callback||context)){tail=node.tail;while((node=node.next)!==tail)cb=node.callback,ctx=node.context,(callback&&cb!==callback||context&&ctx!==context)&&this.on(event,cb,ctx)}return this}},trigger:function(events){var event,node,calls,tail,args,all,rest;if(!(calls=this._callbacks))return this;all=calls.all,events=events.split(eventSplitter),rest=slice.call(arguments,1);while(event=events.shift()){if(node=calls[event]){tail=node.tail;while((node=node.next)!==tail)node.callback.apply(node.context||this,rest)}if(node=all){tail=node.tail,args=[event].concat(rest);while((node=node.next)!==tail)node.callback.apply(node.context||this,args)}}return this}};Events.bind=Events.on,Events.unbind=Events.off;var Model=Backbone.Model=function(attributes,options){var defaults;attributes||(attributes={}),options&&options.parse&&(attributes=this.parse(attributes)),(defaults=getValue(this,"defaults"))&&(attributes=_.extend({},defaults,attributes)),options&&options.collection&&(this.collection=options.collection),this.attributes={},this._escapedAttributes={},this.cid=_.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(attributes,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=_.clone(this.attributes),this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},get:function(attr){return this.attributes[attr]},escape:function(attr){var html;if(html=this._escapedAttributes[attr])return html;var val=this.get(attr);return this._escapedAttributes[attr]=_.escape(val==null?"":""+val)},has:function(attr){return this.get(attr)!=null},set:function(key,value,options){var attrs,attr,val;if(_.isObject(key)||key==null?(attrs=key,options=value):(attrs={},attrs[key]=value),options||(options={}),!attrs)return this;if(attrs instanceof Model&&(attrs=attrs.attributes),options.unset)for(attr in attrs)attrs[attr]=void 0;if(!this._validate(attrs,options))return!1;this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]);var changes=options.changes={},now=this.attributes,escaped=this._escapedAttributes,prev=this._previousAttributes||{};for(attr in attrs)val=attrs[attr],(!_.isEqual(now[attr],val)||options.unset&&_.has(now,attr))&&(delete escaped[attr],(options.silent?this._silent:changes)[attr]=!0),options.unset?delete now[attr]:now[attr]=val,_.isEqual(prev[attr],val)&&_.has(now,attr)==_.has(prev,attr)?(delete this.changed[attr],delete this._pending[attr]):(this.changed[attr]=val,options.silent||(this._pending[attr]=!0));return options.silent||this.change(options),this},unset:function(attr,options){return(options||(options={})).unset=!0,this.set(attr,null,options)},clear:function(options){return(options||(options={})).unset=!0,this.set(_.clone(this.attributes),options)},fetch:function(options){options=options?_.clone(options):{};var model=this,success=options.success;return options.success=function(resp,status,xhr){return model.set(model.parse(resp,xhr),options)?(success&&success(model,resp),void 0):!1},options.error=Backbone.wrapError(options.error,model,options),(this.sync||Backbone.sync).call(this,"read",this,options)},save:function(key,value,options){var attrs,current;if(_.isObject(key)||key==null?(attrs=key,options=value):(attrs={},attrs[key]=value),options=options?_.clone(options):{},options.wait){if(!this._validate(attrs,options))return!1;current=_.clone(this.attributes)}var silentOptions=_.extend({},options,{silent:!0});if(attrs&&!this.set(attrs,options.wait?silentOptions:options))return!1;var model=this,success=options.success;options.success=function(resp,status,xhr){var serverAttrs=model.parse(resp,xhr);return options.wait&&(delete options.wait,serverAttrs=_.extend(attrs||{},serverAttrs)),model.set(serverAttrs,options)?(success?success(model,resp):model.trigger("sync",model,resp,options),void 0):!1},options.error=Backbone.wrapError(options.error,model,options);var method=this.isNew()?"create":"update",xhr=(this.sync||Backbone.sync).call(this,method,this,options);return options.wait&&this.set(current,silentOptions),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,triggerDestroy=function(){model.trigger("destroy",model,model.collection,options)};if(this.isNew())return triggerDestroy(),!1;options.success=function(resp){options.wait&&triggerDestroy(),success?success(model,resp):model.trigger("sync",model,resp,options)},options.error=Backbone.wrapError(options.error,model,options);var xhr=(this.sync||Backbone.sync).call(this,"delete",this,options);return options.wait||triggerDestroy(),xhr},url:function(){var base=getValue(this,"urlRoot")||getValue(this.collection,"url")||urlError();return this.isNew()?base:base+(base.charAt(base.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(resp,xhr){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(options){options||(options={});var changing=this._changing;this._changing=!0;for(var attr in this._silent)this._pending[attr]=!0;var changes=_.extend({},options.changes,this._silent);this._silent={};for(var attr in changes)this.trigger("change:"+attr,this,this.get(attr),options);if(changing)return this;while(!_.isEmpty(this._pending)){this._pending={},this.trigger("change",this,options);for(var attr in this.changed)this._pending[attr]||this._silent[attr]||delete this.changed[attr];this._previousAttributes=_.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(attr){return arguments.length?_.has(this.changed,attr):!_.isEmpty(this.changed)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._previousAttributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return arguments.length&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(attrs,options){if(options.silent||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validate(attrs,options);return error?(options&&options.error?options.error(this,error,options):this.trigger("error",this,error,options),!1):!0}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.model&&(this.model=options.model),options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,{silent:!0,parse:options.parse})};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},add:function(models,options){var i,index,length,model,cid,id,cids={},ids={},dups=[];for(options||(options={}),models=_.isArray(models)?models.slice():[models],i=0,length=models.length;length>i;i++){if(!(model=models[i]=this._prepareModel(models[i],options)))throw Error("Can't add an invalid model to a collection");cid=model.cid,id=model.id,cids[cid]||this._byCid[cid]||id!=null&&(ids[id]||this._byId[id])?dups.push(i):cids[cid]=ids[id]=model}i=dups.length;while(i--)models.splice(dups[i],1);for(i=0,length=models.length;length>i;i++)(model=models[i]).on("all",this._onModelEvent,this),this._byCid[model.cid]=model,model.id!=null&&(this._byId[model.id]=model);if(this.length+=length,index=options.at!=null?options.at:this.models.length,splice.apply(this.models,[index,0].concat(models)),this.comparator&&this.sort({silent:!0}),options.silent)return this;for(i=0,length=this.models.length;length>i;i++)cids[(model=this.models[i]).cid]&&(options.index=i,model.trigger("add",model,this,options));return this},remove:function(models,options){var i,l,index,model;for(options||(options={}),models=_.isArray(models)?models.slice():[models],i=0,l=models.length;l>i;i++)model=this.getByCid(models[i])||this.get(models[i]),model&&(delete this._byId[model.id],delete this._byCid[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model));return this},push:function(model,options){return model=this._prepareModel(model,options),this.add(model,options),model},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return model=this._prepareModel(model,options),this.add(model,_.extend({at:0},options)),model},shift:function(options){var model=this.at(0);return this.remove(model,options),model},get:function(id){return id==null?void 0:this._byId[id.id!=null?id.id:id]},getByCid:function(cid){return cid&&this._byCid[cid.cid||cid]},at:function(index){return this.models[index]},where:function(attrs){return _.isEmpty(attrs)?[]:this.filter(function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},sort:function(options){if(options||(options={}),!this.comparator)throw Error("Cannot sort a set without a comparator");var boundComparator=_.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(boundComparator):this.models.sort(boundComparator),options.silent||this.trigger("reset",this,options),this},pluck:function(attr){return _.map(this.models,function(model){return model.get(attr)})},reset:function(models,options){models||(models=[]),options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i]);return this._reset(),this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),this},fetch:function(options){options=options?_.clone(options):{},options.parse===void 0&&(options.parse=!0);var collection=this,success=options.success;return options.success=function(resp,status,xhr){collection[options.add?"add":"reset"](collection.parse(resp,xhr),options),success&&success(collection,resp)},options.error=Backbone.wrapError(options.error,collection,options),(this.sync||Backbone.sync).call(this,"read",this,options)},create:function(model,options){var coll=this;if(options=options?_.clone(options):{},model=this._prepareModel(model,options),!model)return!1;options.wait||coll.add(model,options);var success=options.success;return options.success=function(nextModel,resp,xhr){options.wait&&coll.add(nextModel,options),success?success(nextModel,resp):nextModel.trigger("sync",model,resp,options)},model.save(null,options),model},parse:function(resp,xhr){return resp},chain:function(){return _(this.models).chain()},_reset:function(options){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(model,options){if(options||(options={}),model instanceof Model)model.collection||(model.collection=this);else{var attrs=model;options.collection=this,model=new this.model(attrs,options),model._validate(model.attributes,options)||(model=!1)}return model},_removeReference:function(model){this==model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){(event!="add"&&event!="remove"||collection==this)&&(event=="destroy"&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],this._byId[model.id]=model),this.trigger.apply(this,arguments))}});var methods=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];_.each(methods,function(method){Collection.prototype[method]=function(){return _[method].apply(_,[this.models].concat(_.toArray(arguments)))}});var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},namedParam=/:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[-[\]{}()+?.,\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){return Backbone.history||(Backbone.history=new History),_.isRegExp(route)||(route=this._routeToRegExp(route)),callback||(callback=this[name]),Backbone.history.route(route,_.bind(function(fragment){var args=this._extractParameters(route,fragment);callback&&callback.apply(this,args),this.trigger.apply(this,["route:"+name].concat(args)),Backbone.history.trigger("route",this,name,args)},this)),this},navigate:function(fragment,options){Backbone.history.navigate(fragment,options)},_bindRoutes:function(){if(this.routes){var routes=[];for(var route in this.routes)routes.unshift([route,this.routes[route]]);for(var i=0,l=routes.length;l>i;i++)this.route(routes[i][0],routes[i][1],this[routes[i][1]])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(namedParam,"([^/]+)").replace(splatParam,"(.*?)"),RegExp("^"+route+"$")},_extractParameters:function(route,fragment){return route.exec(fragment).slice(1)}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl")},routeStripper=/^[#\/]/,isExplorer=/msie [\w.]+/;History.started=!1,_.extend(History.prototype,Events,{interval:50,getHash:function(windowOverride){var loc=windowOverride?windowOverride.location:window.location,match=loc.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(fragment==null)if(this._hasPushState||forcePushState){fragment=window.location.pathname;var search=window.location.search;search&&(fragment+=search)}else fragment=this.getHash();return fragment.indexOf(this.options.root)||(fragment=fragment.substr(this.options.root.length)),fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({},{root:"/"},this.options,options),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);oldIE&&(this.iframe=$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(fragment)),this._hasPushState?$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=window.location,atRoot=loc.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!atRoot?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),window.history.replaceState({},document.title,loc.protocol+"//"+loc.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();return current==this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current==this.fragment?!1:(this.iframe&&this.navigate(current),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride),matched=_.any(this.handlers,function(handler){return handler.route.test(fragment)?(handler.callback(fragment),!0):void 0});return matched},navigate:function(fragment,options){if(!History.started)return!1;options&&options!==!0||(options={trigger:options});var frag=(fragment||"").replace(routeStripper,"");this.fragment!=frag&&(this._hasPushState?(frag.indexOf(this.options.root)!=0&&(frag=this.options.root+frag),this.fragment=frag,window.history[options.replace?"replaceState":"pushState"]({},document.title,frag)):this._wantsHashChange?(this.fragment=frag,this._updateHash(window.location,frag,options.replace),this.iframe&&frag!=this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,frag,options.replace))):window.location.assign(this.options.root+fragment),options.trigger&&this.loadUrl(fragment))},_updateHash:function(location,fragment,replace){replace?location.replace((location+"").replace(/(javascript:|#).*$/,"")+"#"+fragment):location.hash=fragment}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),this._configure(options||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(tagName,attributes,content){var el=document.createElement(tagName);return attributes&&$(el).attr(attributes),content&&$(el).html(content),el},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof $?element:$(element),this.el=this.$el[0],delegate!==!1&&this.delegateEvents(),this},delegateEvents:function(events){if(events||(events=getValue(this,"events"))){this.undelegateEvents();for(var key in events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),!method)throw Error('Method "'+events[key]+'" does not exist');var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,selector===""?this.$el.bind(eventName,method):this.$el.delegate(selector,eventName,method)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(options){this.options&&(options=_.extend({},this.options,options));for(var i=0,l=viewOptions.length;l>i;i++){var attr=viewOptions[i];options[attr]&&(this[attr]=options[attr])}this.options=options},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var attrs=getValue(this,"attributes")||{};this.id&&(attrs.id=this.id),this.className&&(attrs["class"]=this.className),this.setElement(this.make(this.tagName,attrs),!1)}}});var extend=function(protoProps,classProps){var child=inherits(this,protoProps,classProps);return child.extend=this.extend,child};Model.extend=Collection.extend=Router.extend=View.extend=extend;var methodMap={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};Backbone.sync=function(method,model,options){var type=methodMap[method];options||(options={});var params={type:type,dataType:"json"};return options.url||(params.url=getValue(model,"url")||urlError()),options.data||!model||method!="create"&&method!="update"||(params.contentType="application/json",params.data=JSON.stringify(model.toJSON())),Backbone.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),Backbone.emulateHTTP&&(type==="PUT"||type==="DELETE")&&(Backbone.emulateJSON&&(params.data._method=type),params.type="POST",params.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type)}),params.type==="GET"||Backbone.emulateJSON||(params.processData=!1),$.ajax(_.extend(params,options))},Backbone.wrapError=function(onError,originalModel,options){return function(model,resp){resp=model===originalModel?resp:model,onError?onError(originalModel,resp,options):originalModel.trigger("error",originalModel,resp,options)}};var ctor=function(){},inherits=function(parent,protoProps,staticProps){var child;return child=protoProps&&protoProps.hasOwnProperty("constructor")?protoProps.constructor:function(){parent.apply(this,arguments)},_.extend(child,parent),ctor.prototype=parent.prototype,child.prototype=new ctor,protoProps&&_.extend(child.prototype,protoProps),staticProps&&_.extend(child,staticProps),child.prototype.constructor=child,child.__super__=parent.prototype,child},getValue=function(object,prop){return object&&object[prop]?_.isFunction(object[prop])?object[prop]():object[prop]:null},urlError=function(){throw Error('A "url" property or function must be specified')}}.call(this);var Kicksend={mailcheck:{threshold:3,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],run:function(opts){opts.domains=opts.domains||Kicksend.mailcheck.defaultDomains,opts.topLevelDomains=opts.topLevelDomains||Kicksend.mailcheck.defaultTopLevelDomains,opts.distanceFunction=opts.distanceFunction||Kicksend.sift3Distance;var result=Kicksend.mailcheck.suggest(encodeURI(opts.email),opts.domains,opts.topLevelDomains,opts.distanceFunction);result?opts.suggested&&opts.suggested(result):opts.empty&&opts.empty()},suggest:function(email,domains,topLevelDomains,distanceFunction){email=email.toLowerCase();var emailParts=this.splitEmail(email),closestDomain=this.findClosestDomain(emailParts.domain,domains,distanceFunction);if(closestDomain){if(closestDomain!=emailParts.domain)return{address:emailParts.address,domain:closestDomain,full:emailParts.address+"@"+closestDomain}}else{var closestTopLevelDomain=this.findClosestDomain(emailParts.topLevelDomain,topLevelDomains);if(emailParts.domain&&closestTopLevelDomain&&closestTopLevelDomain!=emailParts.topLevelDomain){var domain=emailParts.domain;return closestDomain=domain.substring(0,domain.lastIndexOf(emailParts.topLevelDomain))+closestTopLevelDomain,{address:emailParts.address,domain:closestDomain,full:emailParts.address+"@"+closestDomain}}}return!1},findClosestDomain:function(domain,domains,distanceFunction){var dist,minDist=99,closestDomain=null;if(!domain||!domains)return!1;distanceFunction||(distanceFunction=this.sift3Distance);for(var i=0;domains.length>i;i++){if(domain===domains[i])return domain;dist=distanceFunction(domain,domains[i]),minDist>dist&&(minDist=dist,closestDomain=domains[i])}return minDist>this.threshold||closestDomain===null?!1:closestDomain},sift3Distance:function(s1,s2){if(s1==null||s1.length===0)return s2==null||s2.length===0?0:s2.length;if(s2==null||s2.length===0)return s1.length;var c=0,offset1=0,offset2=0,lcs=0,maxOffset=5;while(s1.length>c+offset1&&s2.length>c+offset2){if(s1.charAt(c+offset1)==s2.charAt(c+offset2))lcs++;else{offset1=0,offset2=0;for(var i=0;maxOffset>i;i++){if(s1.length>c+i&&s1.charAt(c+i)==s2.charAt(c)){offset1=i;break}if(s2.length>c+i&&s1.charAt(c)==s2.charAt(c+i)){offset2=i;break}}}c++}return(s1.length+s2.length)/2-lcs},splitEmail:function(email){var parts=email.split("@");if(2>parts.length)return!1;for(var i=0;parts.length>i;i++)if(parts[i]==="")return!1;var domain=parts.pop(),domainParts=domain.split("."),tld="";if(domainParts.length==0)return!1;if(domainParts.length==1)tld=domainParts[0];else{for(var i=1;domainParts.length>i;i++)tld+=domainParts[i]+".";2>domainParts.length||(tld=tld.substring(0,tld.length-1))}return{topLevelDomain:tld,domain:domain,address:parts.join("@")}}}};window.jQuery&&function($){$.fn.mailcheck=function(opts){var self=this;if(opts.suggested){var oldSuggested=opts.suggested;opts.suggested=function(result){oldSuggested(self,result)}}if(opts.empty){var oldEmpty=opts.empty;opts.empty=function(){oldEmpty.call(null,self)}}opts.email=this.val(),Kicksend.mailcheck.run(opts)}}(jQuery),function(){var Application,_ref;Application=function(){function Application(instance){var registerNamespace,registerTopLevelNamespace,_this=this;this.ExperimentVersions={},registerTopLevelNamespace=function(){return _(NAMESPACES).each(function(ns){return _this[ns]={}})},registerNamespace=function(name){return _(NAMESPACES).each(function(ns){return _this[ns][name]={}})},registerTopLevelNamespace(),registerNamespace("Subscription"),registerNamespace("Validate")}var NAMESPACES;return NAMESPACES=["Collections","Models","Views"],Application.prototype.vent=_(Backbone.Events).clone(),Application}(),(_ref=window.Groupon)==null&&(window.Groupon={}),Groupon.BackboneApp=new Application}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Groupon.BackboneApp.Views.Subscription.BaseStepView=function(_super){function BaseStepView(){return BaseStepView.__super__.constructor.apply(this,arguments)}return __extends(BaseStepView,_super),BaseStepView.prototype.className="section",BaseStepView.prototype.nextStep=function(ev){return ev.preventDefault(),this.model.isValid()&&!$(ev.currentTarget).hasClass("inactive")?(this.successHandler(),this.options.subscriptionModel.incrementStep()):this.errorHandler()},BaseStepView.prototype.errorHandler=function(){},BaseStepView.prototype.successHandler=function(){},BaseStepView.prototype.show=function(){},BaseStepView.prototype.hide=function(){},BaseStepView}(Backbone.View)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Groupon.BackboneApp.Views.Subscription.LocalZipEmailStepView=function(_super){function LocalZipEmailStepView(){return LocalZipEmailStepView.__super__.constructor.apply(this,arguments)}return __extends(LocalZipEmailStepView,_super),LocalZipEmailStepView.prototype.classes={error:"js-error",success:"js-success"},LocalZipEmailStepView.prototype.el=$("#js-email-step"),LocalZipEmailStepView.prototype.completed=!1,LocalZipEmailStepView.prototype.input=$(".js-email"),LocalZipEmailStepView.prototype.events=function(){return{"click button":"stepSubmit","change #email":"emailChanged","keyup #email":"emailDidKeyUp"}},LocalZipEmailStepView.prototype.render=function(){return $("#email").emailSuggestions(),this.attemptSet(this.input)?this.successHandler():void 0},LocalZipEmailStepView.prototype.hide=function(){return $(".no-csstransitions #js-email-step").animate({left:0,marginLeft:"-420px",opacity:.25},300)},LocalZipEmailStepView.prototype.successHandler=function(){return this.input.removeClass(this.classes.error),this.input.addClass(this.classes.success),this.$("button").attr("disabled",!1)},LocalZipEmailStepView.prototype.errorHandler=function(){return this.input.removeClass(this.classes.success),this.input.addClass(this.classes.error),this.$("button").attr("disabled",!0)},LocalZipEmailStepView.prototype.emailDidKeyUp=function(ev){return this.completed?void 0:(this.attemptSet($(ev.currentTarget))?this.successHandler():this.errorHandler(),$(ev.currentTarget).val()===""?this.input.removeClass(this.classes.error):void 0)},LocalZipEmailStepView.prototype.emailChanged=function(ev){return this.completed?void 0:this.attemptSet($(ev.currentTarget))?this.successHandler():this.errorHandler()},LocalZipEmailStepView.prototype.stepSubmit=function(ev){return ev.preventDefault(),this.attemptSet(this.input)?(this.successHandler(),this.completed=!0,$.ajax({type:"POST",dataType:"json",url:ev.currentTarget.form.action,data:$(ev.currentTarget.form).serialize(),success:function(data){return OptimizeSuite.TrackingHub.add("goal",{goalType:"subscription",goalId:data.subscriptionId})},error:function(xhr){return OptimizeSuite.TrackingHub.add("goal",{goalType:"subscription",error:xhr.responseText})}}),this.nextStep(ev)):this.errorHandler()},LocalZipEmailStepView.prototype.attemptSet=function(el){return this.model.set({email:el.val()})},LocalZipEmailStepView}(Groupon.BackboneApp.Views.Subscription.BaseStepView)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Groupon.BackboneApp.Views.Subscription.LocalZipStepView=function(_super){function LocalZipStepView(){return LocalZipStepView.__super__.constructor.apply(this,arguments)}return __extends(LocalZipStepView,_super),LocalZipStepView.prototype.classes={error:"js-error",success:"js-success"},LocalZipStepView.prototype.el=$("#js-zip-step"),LocalZipStepView.prototype.input=$("#postal_code"),LocalZipStepView.prototype.events=function(){return{"click button":"stepSubmit","change #postal_code":"zipChanged","keyup #postal_code":"zipChanged"}
// },LocalZipStepView.prototype.render=function(){return this},LocalZipStepView.prototype.successHandler=function(){return this.input.removeClass(this.classes.error),this.input.addClass(this.classes.success),this.$("button").attr("disabled",!1)},LocalZipStepView.prototype.errorHandler=function(){return this.input.addClass(this.classes.error),this.input.removeClass(this.classes.success),this.$("button").attr("disabled",!0)},LocalZipStepView.prototype.attemptSet=function(el){return this.model.set({zip:el})},LocalZipStepView.prototype.show=function(){return $("form").addClass("js-pull"),$(".no-csstransitions #js-zip-step").animate({left:"50%",marginLeft:"-230px",opacity:1},300),this.$("button").attr("disabled",!0),$("#js-email-step button").attr("disabled",!0),this.attemptSet(this.input.val())&&this.successHandler(),setTimeout(function(){return $("#postal_code").focus(),$("#js-email-step button").attr("disabled",!0)},500)},LocalZipStepView.prototype.zipChanged=function(ev){return this.attemptSet($(ev.currentTarget).val())?this.successHandler():this.errorHandler()},LocalZipStepView.prototype.zipDidKeyUp=function(ev){return this.attemptSet($(ev.currentTarget).val())?this.successHandler():this.errorHandler()},LocalZipStepView.prototype.stepSubmit=function(ev){return ev.preventDefault(),this.attemptSet(this.input.val())?(this.successHandler(),this.nextStep(ev)):this.errorHandler()},LocalZipStepView}(Groupon.BackboneApp.Views.Subscription.BaseStepView)}.call(this),function(){$.extend($.fn,{emailSuggestions:function(){var commonDomains,emailField,getEmailSuggestion,onEmailSuggestionClicked;return onEmailSuggestionClicked=function(e){var link,newVal;return e.preventDefault(),link=$(this),newVal=link.text(),emailField.val(newVal),emailField.change(),link.parent().remove()},getEmailSuggestion=function(){var suggDisplay;return suggDisplay=emailField.siblings(".suggestion"),emailField.mailcheck({domains:commonDomains,suggested:function(element,suggestion){var output,val;return val=emailField.val(),/@.+\./.test(val)&&suggestion.full.slice(0,val.length)!==val?(output=I18n.translate("js.subscribe.email_step.suggest_email",{link_open:"<a href='#' class='accept-suggestion'>",suggested_email:suggestion.full,link_close:"</a>"}),suggDisplay[0]||(suggDisplay=$("<span>",{"class":"suggestion","data-bhw":"EmailSuggestion"}),emailField.after(suggDisplay)),suggDisplay.html(output)):suggDisplay.remove()},empty:function(element){return suggDisplay.remove()}})},emailField=$(this),commonDomains=["yahoo.com","gmail.com","hotmail.com","aol.com","comcast.net","msn.com","sbcglobal.net","verizon.net","att.net","cox.net","live.com","bellsouth.net","ymail.com","charter.net","yahoo.ca","optonline.net","earthlink.net","mac.com","juno.com","me.com","rogers.com","rocketmail.com","aim.com","shaw.ca","roadrunner.com","telus.net","windstream.net","sympatico.ca","embarqmail.com","q.com","live.ca","insightbb.com","frontier.com","netzero.net","netzero.com","mail.com","mchsi.com","netscape.net","hotmail.ca","cogeco.ca","wowway.com","hotmail.co.uk","fuse.net","suddenlink.net","mindspring.com","centurytel.net","sasktel.net","excite.com","tds.net","pacbell.net","163.com","yahoo.co.uk","ameritech.net","yahoo.co.in","prodigy.net","zoominternet.net","cableone.net","swbell.net","rcn.com","mail.ru","eastlink.ca","qq.com","ptd.net","msu.edu","centurylink.net","email.com","yahoo.fr","peoplepc.com","mailinator.com","mts.net","umich.edu","hughes.net","cs.com","gmx.com","rediffmail.com","126.com","us.army.mil","umn.edu"],emailField.keyup(function(e){return getEmailSuggestion()}),$(emailField.parent()).delegate(".accept-suggestion","click",onEmailSuggestionClicked)}})}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Groupon.BackboneApp.Views.Subscription.SubscriptionView=function(_super){function SubscriptionView(){return SubscriptionView.__super__.constructor.apply(this,arguments)}return __extends(SubscriptionView,_super),SubscriptionView.prototype.initialize=function(){var _this=this;return this.steps=this.collection.map(function(model){return new Groupon.BackboneApp.Views.Subscription[model.get("viewName")]({model:model,id:model.get("name")+"_step",subscriptionModel:_this.model})}),this.model.bind("change:index",this.indexChange,this)},SubscriptionView.prototype.render=function(){return $("#header h2").hide(),_.each(this.steps,function(view){return view.render()}),this.showStep(),$(this.el).fadeIn("fast"),this},SubscriptionView.prototype.indexChange=function(){return this.collection.length>this.model.get("index")?this.showStep():this.finish()},SubscriptionView.prototype.showStep=function(){var index,steps;return index=this.model.get("index"),steps=this.steps,index>0&&steps[index].hide(),steps[index].show()},SubscriptionView.prototype.finish=function(){return $("form").submit()},SubscriptionView}(Backbone.View)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Groupon.BackboneApp.Models.Subscription.Subscription=function(_super){function Subscription(){return Subscription.__super__.constructor.apply(this,arguments)}return __extends(Subscription,_super),Subscription.prototype.defaults={index:0},Subscription.prototype.incrementStep=function(){return this.previousIndex=this.get("index"),this.set({index:this.get("index")+1})},Subscription.prototype.indexIncreased=function(){return this.get("index")>this.previousIndex},Subscription}(Backbone.Model)}.call(this),function(){Groupon.Validate={email:function(value){var re;return value.length>100?!1:(re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,re.test(value))}}}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Groupon.BackboneApp.Models.Subscription.BaseStep=function(_super){function BaseStep(){return BaseStep.__super__.constructor.apply(this,arguments)}return __extends(BaseStep,_super),BaseStep.prototype.validate=function(attrs){return this.validateAttributes(attrs)?void 0:"invalid"},BaseStep.prototype.isValid=function(){return this.validateAttributes(this.toJSON())},BaseStep.prototype.validateAttributes=function(){},BaseStep}(Backbone.Model)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Groupon.BackboneApp.Models.Subscription.LocalZipEmailStep=function(_super){function LocalZipEmailStep(){return LocalZipEmailStep.__super__.constructor.apply(this,arguments)}return __extends(LocalZipEmailStep,_super),LocalZipEmailStep.prototype.defaults={name:"local_zip_email",viewName:"LocalZipEmailStepView"},LocalZipEmailStep.prototype.validateAttributes=function(attrs){return attrs.email==null?!1:Groupon.Validate.email(attrs.email)},LocalZipEmailStep}(window.Groupon.BackboneApp.Models.Subscription.BaseStep)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Groupon.BackboneApp.Models.Subscription.LocalZipStep=function(_super){function LocalZipStep(){return LocalZipStep.__super__.constructor.apply(this,arguments)}return __extends(LocalZipStep,_super),LocalZipStep.prototype.defaults={name:"postal_code",viewName:"LocalZipStepView"},LocalZipStep.prototype.validateAttributes=function(attrs){var regexp,zip;return attrs.zip==null||attrs.zip===""?!1:(zip=$.trim(attrs.zip),regexp=/(^([0-9]{5}(-[0-9]{4})?)$)|(^[ABCEGHJKLMNPRSTVXYabceghjklmnprstvxy]{1}\d{1}[A-Za-z]{1} *\d{1}[A-Za-z]{1}\d{1}$)/,regexp.test(zip))},LocalZipStep}(Groupon.BackboneApp.Models.Subscription.BaseStep)}.call(this),function(){$(document).ready(function(){return $("body").hasClass("local-zip")?(new Groupon.BackboneApp.Views.Subscription.SubscriptionView({url:"zip",el:$("#local_zip"),model:new Groupon.BackboneApp.Models.Subscription.Subscription,collection:new Backbone.Collection([new Groupon.BackboneApp.Models.Subscription.LocalZipEmailStep,new Groupon.BackboneApp.Models.Subscription.LocalZipStep])}).render(),OptimizeSuite.TrackingHub.add("finch-experiment",{layer:"InteractionTier",experiment:"RedirectSubscriptionFlowToItier",variant:"itier"})):void 0})}.call(this),function(){var $window,key,optimizeConfig,seed,sessionExpiry;sessionExpiry=1800,seed=Cookie.get("s"),seed||($window=$(window),key=["",window.history.length,window.location.href,(new Date).getTime(),$window.width(),$window.height(),navigator.userAgent,document.cookie,document.referrer].join(""),seed=md5(key),Cookie.set("s",seed,sessionExpiry)),Cookie.get("b")||Cookie.set("b",seed,31536e4),optimizeConfig={tracking:{seed:seed},referralMap:{utm_source:"source",utm_campaign:"campaign",utm_medium:"medium",utm_content:"content",utm_term:"term"},session:{cookieKey:"s",cookieDomain:optimizeSuiteData.cookieDomain},page:{type:optimizeSuiteData.pageType,division:optimizeSuiteData.division,country:optimizeSuiteData.country,channel:optimizeSuiteData.channel},user:{browserId:Cookie.get("b"),scid:Cookie.get("scid")},finch:{}},OptimizeSuite.init(optimizeConfig),$(document).ready(function(){return $("body").removeClass("no-js"),OptimizeSuite.initBloodhound()})}.call(this)